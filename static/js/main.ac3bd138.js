/*! For license information please see main.ac3bd138.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function q(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Te(e){if(e=yi(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),be(e.stateNode,e.type,t))}}function Ee(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Se(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Se())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,qe={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(qe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,bt,xt,It,Tt=!1,Et=[],St=null,Ct=null,Nt=null,At=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void It(e.priority,(function(){bt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ht(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Tt=!1,null!==St&&Ft(St)&&(St=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),At.forEach(Ut),Pt.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function jt(e){function t(t){return qt(t,e)}if(0<Et.length){qt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&qt(St,e),null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Bt=w.ReactCurrentBatchConfig;function zt(e,t,n,r){var i=gt,a=Bt.transition;Bt.transition=null;try{gt=1,Kt(e,t,n,r)}finally{gt=i,Bt.transition=a}}function Wt(e,t,n,r){var i=gt,a=Bt.transition;Bt.transition=null;try{gt=4,Kt(e,t,n,r)}finally{gt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=Ht(e,t,n,r);if(null===i)Br(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return St=Lt(St,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&wt(a),null===(a=Ht(e,t,n,r))&&Br(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Br(e,t,r,null,n)}var Gt=null;function Ht(e,t,n,r){if(Gt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Jt=null;function Xt(){if(Jt)return Jt;var e,t,n=$t,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),cn=F({},un,{view:0,detail:0}),ln=nn(cn),hn=F({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=nn(hn),dn=nn(F({},hn,{dataTransfer:0})),pn=nn(F({},cn,{relatedTarget:0})),vn=nn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=nn(yn),gn=nn(F({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function xn(){return bn}var In=F({},cn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=nn(In),En=nn(F({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Sn=nn(F({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Cn=nn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=nn(Nn),Pn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Dn=null;l&&"documentMode"in document&&(Dn=document.documentMode);var On=l&&"TextEvent"in window&&!Dn,Ln=l&&(!Rn||Dn&&8<Dn&&11>=Dn),Mn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function zn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Mr(e,0)}function Hn(e){if(H(mi(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(l){var $n;if(l){var Jn="oninput"in document;if(!Jn){var Xn=document.createElement("div");Xn.setAttribute("oninput","return;"),Jn="function"===typeof Xn.oninput}$n=Jn}else $n=!1;Yn=$n&&(!document.documentMode||9<document.documentMode)}function Zn(){Wn&&(Wn.detachEvent("onpropertychange",er),Kn=Wn=null)}function er(e){if("value"===e.propertyName&&Hn(Kn)){var t=[];zn(t,Kn,e,_e(e)),Pe(Gn,t)}}function tr(e,t,n){"focusin"===e?(Zn(),Kn=n,(Wn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Kn)}function rr(e,t){if("click"===e)return Hn(t)}function ir(e,t){if("input"===e||"change"===e)return Hn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,yr=null,mr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==pr||pr!==Q(r)||("selectionStart"in(r=pr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},_r={},br={};function xr(e){if(_r[e])return _r[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in br)return _r[e]=n[t];return e}l&&(br=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Ir=xr("animationend"),Tr=xr("animationiteration"),Er=xr("animationstart"),Sr=xr("transitionend"),Cr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Cr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Nr.length;Pr++){var Rr=Nr[Pr];Ar(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ar(Ir,"onAnimationEnd"),Ar(Tr,"onAnimationIteration"),Ar(Er,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Sr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Fr(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),jr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function jr(e,t,n,r){switch(Qt(t)){case 1:var i=zt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Br(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=vi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=_e(n),o=[];e:{var u=Cr.get(e);if(void 0!==u){var s=sn,c=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=pn;break;case"focusout":c="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Sn;break;case Ir:case Tr:case Er:s=vn;break;case Sr:s=Cn;break;case"scroll":s=ln;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=En}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(zr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[hi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=fn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=En,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:mi(s),d=null==c?u:mi(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,vi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Kr(d))p++;for(d=0,v=f;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)f=Kr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Kr(l),f=Kr(f)}l=null}else l=null;null!==s&&Gr(o,u,s,l,!1),null!==c&&null!==h&&Gr(o,h,c,l,!0)}if("select"===(s=(u=r?mi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Qn;else if(Bn(u))if(Yn)y=ir;else{y=nr;var m=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=rr);switch(y&&(y=y(e,r))?zn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?mi(r):window,e){case"focusin":(Bn(m)||"true"===m.contentEditable)&&(pr=m,vr=r,yr=null);break;case"focusout":yr=vr=pr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Un(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Ln&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=Xt()):($t="value"in(Yt=i)?Yt.value:Yt.textContent,qn=!0)),0<(m=Wr(r,k)).length&&(k=new gn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=On?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Rn&&Un(e,t)?(e=Xt(),Jt=$t=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(zr(e,a,i)),null!=(a=Re(e,t))&&r.push(zr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(zr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(zr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Hr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Hr,"\n").replace(Qr,"")}function $r(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Jr(){}var Xr=null;function Zr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ci="__reactFiber$"+si,li="__reactProps$"+si,hi="__reactContainer$"+si,fi="__reactEvents$"+si,di="__reactListeners$"+si,pi="__reactHandles$"+si;function vi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[ci])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[ci]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[li]||null}var ki=[],wi=-1;function _i(e){return{current:e}}function bi(e){0>wi||(e.current=ki[wi],ki[wi]=null,wi--)}function xi(e,t){wi++,ki[wi]=e.current,e.current=t}var Ii={},Ti=_i(Ii),Ei=_i(!1),Si=Ii;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){bi(Ei),bi(Ti)}function Pi(e,t,n){if(Ti.current!==Ii)throw Error(a(168));xi(Ti,t),xi(Ei,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Si=Ti.current,xi(Ti,e),xi(Ei,Ei.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Si),r.__reactInternalMemoizedMergedChildContext=e,bi(Ei),bi(Ti),xi(Ti,e)):bi(Ei),xi(Ei,n)}var Li=null,Mi=!1,Fi=!1;function Ui(e){null===Li?Li=[e]:Li.push(e)}function Vi(){if(!Fi&&null!==Li){Fi=!0;var e=0,t=gt;try{var n=Li;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Mi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),He(Ze,Vi),i}finally{gt=t,Fi=!1}}return null}var qi=w.ReactCurrentBatchConfig;function ji(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Bi=_i(null),zi=null,Wi=null,Ki=null;function Gi(){Ki=Wi=zi=null}function Hi(e){var t=Bi.current;bi(Bi),e._currentValue=t}function Qi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yi(e,t){zi=e,Ki=Wi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(mu=!0),e.firstContext=null)}function $i(e){var t=e._currentValue;if(Ki!==e)if(e={context:e,memoizedValue:t,next:null},null===Wi){if(null===zi)throw Error(a(308));Wi=e,zi.dependencies={lanes:0,firstContext:e}}else Wi=Wi.next=e;return t}var Ji=null,Xi=!1;function Zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=n.interleaved)?(t.next=t,null===Ji?Ji=[n]:Ji.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Xi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Xi=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ts|=o,e.lanes=o,e.memoizedState=h}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bs(),i=zs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ws(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bs(),i=zs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ws(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bs(),r=zs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Ws(e,r,n))&&ra(t,e,r)}};function la(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function ha(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=$i(a):(i=Ni(t)?Si:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function fa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,Zi(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=$i(a):(a=Ni(t)?Si:Ti.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var pa=[],va=0,ya=null,ma=0,ga=[],ka=0,wa=null,_a=1,ba="";function xa(e,t){pa[va++]=ma,pa[va++]=ya,ya=e,ma=t}function Ia(e,t,n){ga[ka++]=_a,ga[ka++]=ba,ga[ka++]=wa,wa=e;var r=_a;e=ba;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_a=1<<32-ot(t)+i|n<<i|r,ba=a+e}else _a=1<<a|n<<i|r,ba=e}function Ta(e){null!==e.return&&(xa(e,1),Ia(e,1,0))}function Ea(e){for(;e===ya;)ya=pa[--va],pa[va]=null,ma=pa[--va],pa[va]=null;for(;e===wa;)wa=ga[--ka],ga[ka]=null,ba=ga[--ka],ga[ka]=null,_a=ga[--ka],ga[ka]=null}var Sa=null,Ca=null,Na=!1,Aa=null;function Pa(e,t){var n=wc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ra(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Sa=e,Ca=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Sa=e,Ca=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==wa?{id:_a,overflow:ba}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=wc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Sa=e,Ca=null,!0);default:return!1}}function Da(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Oa(e){if(Na){var t=Ca;if(t){var n=t;if(!Ra(e,t)){if(Da(e))throw Error(a(418));t=oi(n.nextSibling);var r=Sa;t&&Ra(e,t)?Pa(r,n):(e.flags=-4097&e.flags|2,Na=!1,Sa=e)}}else{if(Da(e))throw Error(a(418));e.flags=-4097&e.flags|2,Na=!1,Sa=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Sa=e}function Ma(e){if(e!==Sa)return!1;if(!Na)return La(e),Na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Zr(e.type,e.memoizedProps)),t&&(t=Ca)){if(Da(e)){for(e=Ca;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Pa(e,t),t=oi(t.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ca=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ca=null}}else Ca=Sa?oi(e.stateNode.nextSibling):null;return!0}function Fa(){Ca=Sa=null,Na=!1}function Ua(e){null===Aa?Aa=[e]:Aa.push(e)}function Va(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ja(e){return(0,e._init)(e._payload)}function Ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=bc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ec(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&ja(a)===t.type)?((r=i(t,n.props)).ref=Va(e,t,n),r.return=e,r):((r=xc(n.type,n.key,n.props,null,e.mode,r)).ref=Va(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Sc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ec(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=xc(t.type,t.key,t.props,null,e.mode,n)).ref=Va(e,null,t),n.return=e,n;case b:return(t=Sc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ic(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);qa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),Na&&xa(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return Na&&xa(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),Na&&xa(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),Na&&xa(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return Na&&xa(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),Na&&xa(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ja(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Va(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Ic(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=xc(o.type,o.key,o.props,null,r.mode,s)).ref=Va(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Sc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ec(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var za=Ba(!0),Wa=Ba(!1),Ka={},Ga=_i(Ka),Ha=_i(Ka),Qa=_i(Ka);function Ya(e){if(e===Ka)throw Error(a(174));return e}function $a(e,t){switch(xi(Qa,t),xi(Ha,e),xi(Ga,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}bi(Ga),xi(Ga,t)}function Ja(){bi(Ga),bi(Ha),bi(Qa)}function Xa(e){Ya(Qa.current);var t=Ya(Ga.current),n=se(t,e.type);t!==n&&(xi(Ha,e),xi(Ga,n))}function Za(e){Ha.current===e&&(bi(Ga),bi(Ha))}var eo=_i(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=w.ReactCurrentDispatcher,ao=w.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,ho=!1,fo=0,po=0;function vo(){throw Error(a(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Zo:eu,e=n(r,i),ho){o=0;do{if(ho=!1,fo=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(ho)}if(io.current=Xo,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==fo;return fo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function wo(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function _o(e,t){return"function"===typeof t?t(e):t}function bo(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((oo&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,uo.lanes|=h,Ts|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ar(r,t.memoizedState)||(mu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Ts|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(mu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function To(e,t){var n=uo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,mu=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Po(9,So.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||Eo(n,t,i)}return i}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function So(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Ws(e,1,-1)}function Co(e,t,n){return n((function(){No(t)&&Ws(e,1,-1)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Ho.bind(null,uo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return wo().memoizedState}function Do(e,t,n,r){var i=ko();uo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=wo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&yo(r,o.deps))return void(i.memoizedState=Po(t,n,a,r))}uo.flags|=e,i.memoizedState=Po(1|t,n,a,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function Uo(e,t){return Oo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Vo.bind(null,t,e),n)}function jo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Ko(){return wo().memoizedState}function Go(e,t,n){var r=zs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Yo(t,n):($o(e,t,n),null!==(e=Ws(e,r,n=Bs()))&&Jo(e,t,r))}function Ho(e,t,n){var r=zs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{$o(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Ws(e,r,n=Bs()))&&Jo(e,t,r)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Yo(e,t){ho=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=t.interleaved)?(n.next=n,null===Ji?Ji=[t]:Ji.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Xo={readContext:$i,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Zo={readContext:$i,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:$i,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Ao,useDebugValue:jo,useDeferredValue:function(e){var t=Ao(e),n=t[0],r=t[1];return Lo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=Ao(!1),t=e[0];return e=Wo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=ko();if(Na){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||Eo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,So.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=gs.identifierPrefix;if(Na){var n=ba;t=":"+t+"R"+(n=(_a&~(1<<32-ot(_a)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:$i,useCallback:Bo,useContext:$i,useEffect:Mo,useImperativeHandle:qo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:zo,useReducer:bo,useRef:Ro,useState:function(){return bo(_o)},useDebugValue:jo,useDeferredValue:function(e){var t=bo(_o),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[bo(_o)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:To,useId:Ko,unstable_isNewReconciler:!1},tu={readContext:$i,useCallback:Bo,useContext:$i,useEffect:Mo,useImperativeHandle:qo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:zo,useReducer:xo,useRef:Ro,useState:function(){return xo(_o)},useDebugValue:jo,useDeferredValue:function(e){var t=xo(_o),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[xo(_o)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:To,useId:Ko,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rs||(Rs=!0,Ds=r),ru(0,t)},n}function cu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Os?Os=new Set([this]):Os.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function lu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function hu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Na)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vu(e,t,n){var r=t.pendingProps;switch(Ea(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pu(t),null;case 1:case 17:return Ni(t.type)&&Ai(),pu(t),null;case 3:return r=t.stateNode,Ja(),bi(Ei),bi(Ti),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Aa&&(Ys(Aa),Aa=null))),pu(t),null;case 5:Za(t);var i=Ya(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return pu(t),null}if(e=Ya(Ga.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ci]=t,r[li]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":$(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&($r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&($r(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ci]=t,e[li]=r,iu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Qa.current),Ya(Ga.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[ci]=t,(o=r.nodeValue!==n)&&null!==(e=Sa))switch(s=0!==(1&e.mode),e.tag){case 3:$r(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&$r(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r}return pu(t),null;case 13:if(bi(eo),r=t.memoizedState,Na&&null!==Ca&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ca;r;)r=oi(r.nextSibling);return Fa(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ci]=t}else Fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pu(t),null}return null!==Aa&&(Ys(Aa),Aa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===xs&&(xs=3):ic())),null!==t.updateQueue&&(t.flags|=4),pu(t),null);case 4:return Ja(),null===e&&qr(t.stateNode.containerInfo),pu(t),null;case 10:return Hi(t.type._context),pu(t),null;case 19:if(bi(eo),null===(o=t.memoizedState))return pu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==xs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Ps&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Na)return pu(t),null}else 2*Je()-o.renderingStartTime>Ps&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=eo.current,xi(eo,r?1&n|2:1&n),t):(pu(t),null);case 22:case 23:return ec(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&_s)&&(pu(t),6&t.subtreeFlags&&(t.flags|=8192)):pu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Ga.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Fr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var yu=w.ReactCurrentOwner,mu=!1;function gu(e,t,n,r){t.child=null===e?Wa(t,null,n,r):za(t,e.child,n,r)}function ku(e,t,n,r,i){n=n.render;var a=t.ref;return Yi(t,i),r=mo(e,t,n,r,a,i),n=go(),null===e||mu?(Na&&n&&Ta(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vu(e,t,i))}function wu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||_c(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=xc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_u(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return Vu(e,t,i)}return t.flags|=1,(e=bc(a,r)).ref=t.ref,e.return=t,t.child=e}function _u(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(mu=!1,0===(e.lanes&i))return t.lanes=e.lanes,Vu(e,t,i);0!==(131072&e.flags)&&(mu=!0)}return Iu(e,t,n,r,i)}function bu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},xi(bs,_s),_s|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,xi(bs,_s),_s|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,xi(bs,_s),_s|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xi(bs,_s),_s|=r;return gu(e,t,i,n),t.child}function xu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Ni(n)?Si:Ti.current;return a=Ci(t,a),Yi(t,i),n=mo(e,t,n,r,a,i),r=go(),null===e||mu?(Na&&r&&Ta(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vu(e,t,i))}function Tu(e,t,n,r,i){if(Ni(n)){var a=!0;Di(t)}else a=!1;if(Yi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ha(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=$i(c):c=Ci(t,c=Ni(n)?Si:Ti.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&fa(t,o,r,c),Xi=!1;var f=t.memoizedState;o.state=f,aa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ei.current||Xi?("function"===typeof l&&(sa(t,n,l,r),s=t.memoizedState),(u=Xi||la(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ji(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=$i(s):s=Ci(t,s=Ni(n)?Si:Ti.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&fa(t,o,r,s),Xi=!1,f=t.memoizedState,o.state=f,aa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ei.current||Xi?("function"===typeof d&&(sa(t,n,d,r),p=t.memoizedState),(c=Xi||la(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Eu(e,t,n,r,a,i)}function Eu(e,t,n,r,i,a){xu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),Vu(e,t,a);r=t.stateNode,yu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=za(t,e.child,null,a),t.child=za(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Su(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),$a(e,t.containerInfo)}function Cu(e,t,n,r,i){return Fa(),Ua(i),t.flags|=256,gu(e,t,n,r),t.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Au(e){return{baseLanes:e,cachePool:null}}function Pu(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xi(eo,1&o),null===e)return Oa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Tc(o,i,0,null),e=Ic(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Au(n),t.memoizedState=Nu,e):Ru(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Lu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Tc({mode:"visible",children:i.children},o,0,null),(u=Ic(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&za(t,e.child,null,n),t.child.memoizedState=Au(n),t.memoizedState=Nu,u);if(0===(1&t.mode))t=Lu(e,t,n,null);else if("$!"===r.data)t=Lu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),mu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Ws(e,i,-1))}ic(),t=Lu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=yc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ca=oi(r.nextSibling),Sa=t,Na=!0,Aa=null,null!==n&&(ga[ka++]=_a,ga[ka++]=ba,ga[ka++]=wa,_a=n.id,ba=n.overflow,wa=t),(t=Ru(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Du(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Du(e,t,i.children,n),t.memoizedState=null,n)}function Ru(e,t){return(t=Tc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Du(e,t,n,r){var i=e.child;return e=i.sibling,n=bc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Ou(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=bc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=bc(o,r):(r=Ic(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Lu(e,t,n,r){return null!==r&&Ua(r),za(t,e.child,null,n),(e=Ru(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Qi(e.return,t,n)}function Fu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Uu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fu(t,!0,n,null,a);break;case"together":Fu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ts|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=bc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=bc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qu(e,t){switch(Ea(t),t.tag){case 1:return Ni(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),bi(Ei),bi(Ti),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(bi(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return bi(eo),null;case 4:return Ja(),null;case 10:return Hi(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var ju=!1,Bu=!1,zu="function"===typeof WeakSet?WeakSet:Set,Wu=null;function Ku(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dc(e,t,r)}else n.current=null}function Gu(e,t,n){try{n()}catch(r){dc(e,t,r)}}var Hu=!1;function Qu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Gu(t,n,a)}i=i.next}while(i!==r)}}function Yu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $u(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function Ju(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Gu(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Ku(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dc(t,n,o)}break;case 5:Ku(t,n);break;case 4:is(e,t,n)}}function Xu(e){var t=e.alternate;null!==t&&(e.alternate=null,Xu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ci],delete t[li],delete t[fi],delete t[di],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zu(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Zu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if(Zu(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(fe(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=n,h=c;;)if(Ju(s,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break e;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(s=r,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,c=o.stateNode,8===s.nodeType?ai(s.parentNode,c):1===s.nodeType&&ai(s,c),jt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Ju(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Qu(3,t,t.return),Yu(3,t),void Qu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&J(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?ye(n,s):"dangerouslySetInnerHTML"===u?he(n,s):"children"===u?fe(n,s):k(n,u,s,t)}switch(e){case"input":X(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[li]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&jt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new zu),t.forEach((function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Wu=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Wu;){var i=Wu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||ju;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Bu;u=ju;var c=Bu;if(ju=o,(Bu=s)&&!c)for(Wu=i;null!==Wu;)s=(o=Wu).child,22===o.tag&&null!==o.memoizedState?hs(i):null!==s?(s.return=o,Wu=s):hs(i);for(;null!==a;)Wu=a,ss(a,t,n),a=a.sibling;Wu=i,ju=u,Bu=c}cs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Wu=a):cs(e)}}function cs(e){for(;null!==Wu;){var t=Wu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Bu||Yu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Bu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ji(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&jt(f)}}}break;default:throw Error(a(163))}Bu||512&t.flags&&$u(t)}catch(d){dc(t,t.return,d)}}if(t===e){Wu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Wu=n;break}Wu=t.return}}function ls(e){for(;null!==Wu;){var t=Wu;if(t===e){Wu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Wu=n;break}Wu=t.return}}function hs(e){for(;null!==Wu;){var t=Wu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yu(4,t)}catch(s){dc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dc(t,i,s)}}var a=t.return;try{$u(t)}catch(s){dc(t,a,s)}break;case 5:var o=t.return;try{$u(t)}catch(s){dc(t,o,s)}}}catch(s){dc(t,t.return,s)}if(t===e){Wu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Wu=u;break}Wu=t.return}}var fs,ds=Math.ceil,ps=w.ReactCurrentDispatcher,vs=w.ReactCurrentOwner,ys=w.ReactCurrentBatchConfig,ms=0,gs=null,ks=null,ws=0,_s=0,bs=_i(0),xs=0,Is=null,Ts=0,Es=0,Ss=0,Cs=null,Ns=null,As=0,Ps=1/0,Rs=!1,Ds=null,Os=null,Ls=!1,Ms=null,Fs=0,Us=0,Vs=null,qs=-1,js=0;function Bs(){return 0!==(6&ms)?Je():-1!==qs?qs:qs=Je()}function zs(e){return 0===(1&e.mode)?1:0!==(2&ms)&&0!==ws?ws&-ws:null!==qi.transition?(0===js&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),js=e),js):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Ws(e,t,n){if(50<Us)throw Us=0,Vs=null,Error(a(185));var r=Ks(e,t);return null===r?null:(yt(r,t,n),0!==(2&ms)&&r===gs||(r===gs&&(0===(2&ms)&&(Es|=t),4===xs&&$s(r,ws)),Gs(r,n),1===t&&0===ms&&0===(1&e.mode)&&(Ps=Je()+500,Mi&&Vi())),r)}function Ks(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Gs(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===gs?ws:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Ui(e)}(Js.bind(null,e)):Ui(Js.bind(null,e)),ri((function(){0===ms&&Vi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gc(n,Hs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hs(e,t){if(qs=-1,js=0,0!==(6&ms))throw Error(a(327));var n=e.callbackNode;if(hc()&&e.callbackNode!==n)return null;var r=ft(e,e===gs?ws:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ac(e,r);else{t=r;var i=ms;ms|=2;var o=rc();for(gs===e&&ws===t||(Ps=Je()+500,tc(e,t));;)try{uc();break}catch(s){nc(e,s)}Gi(),ps.current=o,ms=i,null!==ks?t=0:(gs=null,ws=0,t=xs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=Qs(e,i))),1===t)throw n=Is,tc(e,0),$s(e,r),Gs(e,Je()),n;if(6===t)$s(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ac(e,r))&&(0!==(o=pt(e))&&(r=o,t=Qs(e,o))),1===t))throw n=Is,tc(e,0),$s(e,r),Gs(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:lc(e,Ns);break;case 3:if($s(e,r),(130023424&r)===r&&10<(t=As+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Bs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(lc.bind(null,e,Ns),t);break}lc(e,Ns);break;case 4:if($s(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(lc.bind(null,e,Ns),r);break}lc(e,Ns);break;default:throw Error(a(329))}}}return Gs(e,Je()),e.callbackNode===n?Hs.bind(null,e):null}function Qs(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=ac(e,t))&&(t=Ns,Ns=n,null!==t&&Ys(t)),e}function Ys(e){null===Ns?Ns=e:Ns.push.apply(Ns,e)}function $s(e,t){for(t&=~Ss,t&=~Es,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function Js(e){if(0!==(6&ms))throw Error(a(327));hc();var t=ft(e,0);if(0===(1&t))return Gs(e,Je()),null;var n=ac(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Qs(e,r))}if(1===n)throw n=Is,tc(e,0),$s(e,t),Gs(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e,Ns),Gs(e,Je()),null}function Xs(e,t){var n=ms;ms|=1;try{return e(t)}finally{0===(ms=n)&&(Ps=Je()+500,Mi&&Vi())}}function Zs(e){null!==Ms&&0===Ms.tag&&0===(6&ms)&&hc();var t=ms;ms|=1;var n=ys.transition,r=gt;try{if(ys.transition=null,gt=1,e)return e()}finally{gt=r,ys.transition=n,0===(6&(ms=t))&&Vi()}}function ec(){_s=bs.current,bi(bs)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(Ea(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:Ja(),bi(Ei),bi(Ti),ro();break;case 5:Za(r);break;case 4:Ja();break;case 13:case 19:bi(eo);break;case 10:Hi(r.type._context);break;case 22:case 23:ec()}n=n.return}if(gs=e,ks=e=bc(e.current,null),ws=_s=t,xs=0,Is=null,Ss=Es=Ts=0,Ns=Cs=null,null!==Ji){for(t=0;t<Ji.length;t++)if(null!==(r=(n=Ji[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ji=null}return e}function nc(e,t){for(;;){var n=ks;try{if(Gi(),io.current=Xo,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,ho=!1,fo=0,vs.current=null,null===n||null===n.return){xs=1,Is=t,ks=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=ws,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=hu(u);if(null!==p){p.flags&=-257,fu(p,u,s,0,t),1&p.mode&&lu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){lu(o,l,t),ic();break e}c=Error(a(426))}else if(Na&&1&s.mode){var m=hu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),fu(m,u,s,0,t),Ua(c);break e}}o=c,4!==xs&&(xs=2),null===Cs?Cs=[o]:Cs.push(o),c=nu(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Os||!Os.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,cu(s,o,t));break e}}s=s.return}while(null!==s)}cc(n)}catch(w){t=w,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function rc(){var e=ps.current;return ps.current=Xo,null===e?Xo:e}function ic(){0!==xs&&3!==xs&&2!==xs||(xs=4),null===gs||0===(268435455&Ts)&&0===(268435455&Es)||$s(gs,ws)}function ac(e,t){var n=ms;ms|=2;var r=rc();for(gs===e&&ws===t||tc(e,t);;)try{oc();break}catch(i){nc(e,i)}if(Gi(),ms=n,ps.current=r,null!==ks)throw Error(a(261));return gs=null,ws=0,xs}function oc(){for(;null!==ks;)sc(ks)}function uc(){for(;null!==ks&&!Ye();)sc(ks)}function sc(e){var t=fs(e.alternate,e,_s);e.memoizedProps=e.pendingProps,null===t?cc(e):ks=t,vs.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vu(n,t,_s)))return void(ks=n)}else{if(null!==(n=qu(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return xs=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===xs&&(xs=5)}function lc(e,t){var n=gt,r=ys.transition;try{ys.transition=null,gt=1,function(e,t,n){do{hc()}while(null!==Ms);if(0!==(6&ms))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(ks=gs=null,ws=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Ls||(Ls=!0,gc(tt,(function(){return hc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ys.transition,ys.transition=null;var u=gt;gt=1;var s=ms;ms|=4,vs.current=null,function(e,t){if(hr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xr={focusedElem:e,selectionRange:n},Wu=t;null!==Wu;)if(e=(t=Wu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Wu=e;else for(;null!==Wu;){t=Wu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ji(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;if(1===w.nodeType)w.textContent="";else if(9===w.nodeType){var _=w.body;null!=_&&(_.textContent="")}break;default:throw Error(a(163))}}catch(b){dc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Wu=e;break}Wu=t.return}v=Hu,Hu=!1}(e,r),function(e,t){for(Wu=t;null!==Wu;){var n=(t=Wu).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(I){dc(i,t,I)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Wu=n;else for(;null!==Wu;){t=Wu;try{var o=t.flags;if(32&o&&fe(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(As=Je())}break;case 22:var l=null!==t.memoizedState,h=t.alternate,f=null!==h&&null!==h.memoizedState;e:{i=l;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var v=p.stateNode;if(i){var y=v.style;"function"===typeof y.setProperty?y.setProperty("display","none","important"):y.display="none"}else{var m=p.stateNode,g=p.memoizedProps.style,k=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;m.style.display=ve("display",k)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(l&&!f&&0!==(1&n.mode)){Wu=n;for(var w=n.child;null!==w;){for(n=Wu=w;null!==Wu;){var _=(r=Wu).child;switch(r.tag){case 0:case 11:case 14:case 15:Qu(4,r,r.return);break;case 1:Ku(r,r.return);var b=r.stateNode;if("function"===typeof b.componentWillUnmount){var x=r.return;try{b.props=r.memoizedProps,b.state=r.memoizedState,b.componentWillUnmount()}catch(I){dc(r,x,I)}}break;case 5:Ku(r,r.return);break;case 22:if(null!==r.memoizedState){ls(n);continue}}null!==_?(_.return=r,Wu=_):ls(n)}w=w.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(I){dc(t,t.return,I)}if(null!==(n=t.sibling)){n.return=t.return,Wu=n;break}Wu=t.return}}}(e,r),fr(Xr),Xr=null,e.current=r,us(r,e,i),$e(),ms=s,gt=u,ys.transition=o}else e.current=r;if(Ls&&(Ls=!1,Ms=e,Fs=i),0===(o=e.pendingLanes)&&(Os=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Gs(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Rs)throw Rs=!1,e=Ds,Ds=null,e;0!==(1&Fs)&&0!==e.tag&&hc(),0!==(1&(o=e.pendingLanes))?e===Vs?Us++:(Us=0,Vs=e):Us=0,Vi()}(e,t,n)}finally{ys.transition=r,gt=n}return null}function hc(){if(null!==Ms){var e=kt(Fs),t=ys.transition,n=gt;try{if(ys.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,Fs=0,0!==(6&ms))throw Error(a(331));var i=ms;for(ms|=4,Wu=e.current;null!==Wu;){var o=Wu,u=o.child;if(0!==(16&Wu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Wu=l;null!==Wu;){var h=Wu;switch(h.tag){case 0:case 11:case 15:Qu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Wu=f;else for(;null!==Wu;){var d=(h=Wu).sibling,p=h.return;if(Xu(h),h===l){Wu=null;break}if(null!==d){d.return=p,Wu=d;break}Wu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Wu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Wu=u;else e:for(;null!==Wu;){if(0!==(2048&(o=Wu).flags))switch(o.tag){case 0:case 11:case 15:Qu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Wu=g;break e}Wu=o.return}}var k=e.current;for(Wu=k;null!==Wu;){var w=(u=Wu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Wu=w;else e:for(u=k;null!==Wu;){if(0!==(2048&(s=Wu).flags))try{switch(s.tag){case 0:case 11:case 15:Yu(9,s)}}catch(b){dc(s,s.return,b)}if(s===u){Wu=null;break e}var _=s.sibling;if(null!==_){_.return=s.return,Wu=_;break e}Wu=s.return}}if(ms=i,Vi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{gt=n,ys.transition=t}}return!1}function fc(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=Bs(),null!==(e=Ks(e,1))&&(yt(e,1,t),Gs(e,t))}function dc(e,t,n){if(3===e.tag)fc(e,e,n);else for(;null!==t;){if(3===t.tag){fc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Os||!Os.has(r))){na(t,e=cu(t,e=nu(n,e),1)),e=Bs(),null!==(t=Ks(t,1))&&(yt(t,1,e),Gs(t,e));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Bs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(ws&n)===n&&(4===xs||3===xs&&(130023424&ws)===ws&&500>Je()-As?tc(e,0):Ss|=n),Gs(e,t)}function vc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Bs();null!==(e=Ks(e,t))&&(yt(e,t,n),Gs(e,n))}function yc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),vc(e,n)}function gc(e,t){return He(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wc(e,t,n,r){return new kc(e,t,n,r)}function _c(e){return!(!(e=e.prototype)||!e.isReactComponent)}function bc(e,t){var n=e.alternate;return null===n?((n=wc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)_c(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Ic(n.children,i,o,t);case I:u=8,i|=8;break;case T:return(e=wc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=wc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=wc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Tc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case S:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=wc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ic(e,t,n,r){return(e=wc(7,e,r,t)).lanes=n,e}function Tc(e,t,n,r){return(e=wc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Ec(e,t,n){return(e=wc(6,e,null,t)).lanes=n,e}function Sc(e,t,n){return(t=wc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,a,o,u,s){return e=new Cc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=wc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Zi(a),e}function Ac(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Pc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Ri(e,n,t)}return t}function Rc(e,t,n,r,i,a,o,u,s){return(e=Nc(n,r,!0,e,0,a,0,u,s)).context=Pc(null),n=e.current,(a=ta(r=Bs(),i=zs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,yt(e,i,r),Gs(e,r),e}function Dc(e,t,n,r){var i=t.current,a=Bs(),o=zs(i);return n=Pc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Ws(i,o,a))&&ra(e,i,o),o}function Oc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}fs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)mu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return mu=!1,function(e,t,n){switch(t.tag){case 3:Su(t),Fa();break;case 5:Xa(t);break;case 1:Ni(t.type)&&Di(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(Bi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Pu(e,t,n):(xi(eo,1&eo.current),null!==(e=Vu(e,t,n))?e.sibling:null);xi(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Uu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,bu(e,t,n)}return Vu(e,t,n)}(e,t,n);mu=0!==(131072&e.flags)}else mu=!1,Na&&0!==(1048576&t.flags)&&Ia(t,ma,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ci(t,Ti.current);Yi(t,n),i=mo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Di(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Zi(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Eu(null,t,r,!0,o,n)):(t.tag=0,Na&&o&&Ta(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return _c(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ji(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Tu(null,t,r,e,n);break e;case 11:t=ku(null,t,r,e,n);break e;case 14:t=wu(null,t,r,ji(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ji(r,i),n);case 3:e:{if(Su(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Cu(e,t,r,n,i=Error(a(424)));break e}for(Ca=oi(t.stateNode.containerInfo.firstChild),Sa=t,Na=!0,Aa=null,n=Wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Fa(),r===i){t=Vu(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&Oa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Zr(r,i)?u=null:null!==o&&Zr(r,o)&&(t.flags|=32),xu(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&Oa(t),null;case 13:return Pu(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=za(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:ji(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,xi(Bi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!Ei.current){t=Vu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Qi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Qi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yi(t,n),r=r(i=$i(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=ji(r=t.type,t.pendingProps),wu(e,t,r,i=ji(r.type,i),n);case 15:return _u(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ni(r)?(e=!0,Di(t)):e=!1,Yi(t,n),ha(t,r,i),da(t,r,i,n),Eu(null,t,r,!0,e,n);case 19:return Uu(e,t,n);case 22:return bu(e,t,n)}throw Error(a(156,t.tag))};var Fc="function"===typeof reportError?reportError:function(e){console.error(e)};function Uc(e){this._internalRoot=e}function Vc(e){this._internalRoot=e}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Bc(){}function zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Oc(o);u.call(e)}}Dc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Oc(o);a.call(e)}}var o=Rc(t,r,e,0,null,!1,0,"",Bc);return e._reactRootContainer=o,e[hi]=o.current,qr(8===e.nodeType?e.parentNode:e),Zs(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Oc(s);u.call(e)}}var s=Nc(e,0,!1,null,0,!1,0,"",Bc);return e._reactRootContainer=s,e[hi]=s.current,qr(8===e.nodeType?e.parentNode:e),Zs((function(){Dc(t,s,n,r)})),s}(n,t,e,i,r);return Oc(o)}Vc.prototype.render=Uc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Dc(e,t,null,null)},Vc.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zs((function(){Dc(null,e,null,null)})),t[hi]=null}},Vc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(mt(t,1|n),Gs(t,Je()),0===(6&ms)&&(Ps=Je()+500,Vi()))}break;case 13:var r=Bs();Zs((function(){return Ws(e,1,r)})),Mc(e,1)}},_t=function(e){13===e.tag&&(Ws(e,134217728,Bs()),Mc(e,134217728))},bt=function(e){if(13===e.tag){var t=Bs(),n=zs(e);Ws(e,n,t),Mc(e,n)}},xt=function(){return gt},It=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},be=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=Xs,Ne=Zs;var Wc={usingClientEntryPoint:!1,Events:[yi,mi,gi,Ee,Se,Xs]},Kc={findFiberByHostInstance:vi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Gc={bundleType:Kc.bundleType,version:Kc.version,rendererPackageName:Kc.rendererPackageName,rendererConfig:Kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:Kc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{it=Hc.inject(Gc),at=Hc}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(a(200));return Ac(e,t,null,n)},t.createRoot=function(e,t){if(!qc(e))throw Error(a(299));var n=!1,r="",i=Fc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Uc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return Zs(e)},t.hydrate=function(e,t,n){if(!jc(t))throw Error(a(200));return zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!qc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Fc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Rc(t,null,e,1,null!=n?n:null,i,0,o,u),e[hi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Vc(t)},t.render=function(e,t,n){if(!jc(t))throw Error(a(200));return zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!jc(e))throw Error(a(40));return!!e._reactRootContainer&&(Zs((function(){zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=Xs,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return zc(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var _=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,_(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(P){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=h;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=T(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:f,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(N([])));_&&_!==n&&r.call(_,a)&&(k=_);var b=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=g,s(b,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),s(b,u,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,D(b);else{var t=r(l);null!==t&&O(_,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(_,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,T=null,E=-1,S=5,C=-1;function N(){return!(t.unstable_now()-C<S)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?x():(I=!1,T=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){m(A,0)};function D(e){T=e,I||(I=!0,x())}function O(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,O(_,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".6a541d2d.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var f=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/xoxo-game-react/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkgame=self.webpackChunkgame||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Y},SDK_VERSION:function(){return bt},_DEFAULT_ENTRY_NAME:function(){return ct},_addComponent:function(){return dt},_addOrOverwriteComponent:function(){return pt},_apps:function(){return ht},_clearComponents:function(){return gt},_components:function(){return ft},_getProvider:function(){return yt},_registerComponent:function(){return vt},_removeServiceInstance:function(){return mt},deleteApp:function(){return Et},getApp:function(){return It},getApps:function(){return Tt},initializeApp:function(){return xt},onLog:function(){return Nt},registerVersion:function(){return Ct},setLogLevel:function(){return At}});var t=n(791),r=n(164);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){return u(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||c(e,t)||l()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t){if(t&&("object"===_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function x(e){var t=w();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function I(e,t,n){return I=w()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i},I.apply(null,arguments)}function T(e){var t="function"===typeof Map?new Map:void 0;return T=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)},T(e)}var E=!1,S=!1,C="${JSCORE_VERSION}",N=function(e,t){if(!e)throw A(t)},A=function(e){return new Error("Firebase Database ("+C+") INTERNAL ASSERT FAILED: "+e)},P=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},R={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(P(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},D=function(e){var t=P(e);return R.encodeByteArray(t,!0)},O=function(e){return D(e).replace(/\./g,"")},L=function(e){try{return R.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function M(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=M(e[n],t[n]));return e}var F=function(){function e(){var t=this;f(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return p(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function U(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[O(JSON.stringify({alg:"none",type:"JWT"})),O(JSON.stringify(a)),""].join(".")}function V(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function q(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(V())}function j(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function B(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function z(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function W(){var e=V();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function K(){return!0===E||!0===S}function G(){return"object"===typeof indexedDB}function H(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(GC){t(GC)}}))}function Q(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}var Y=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(y(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(y(a),$.prototype.create),a}return p(n)}(T(Error)),$=function(){function e(t,n,r){f(this,e),this.service=t,this.serviceName=n,this.errors=r}return p(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?J(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Y(n,a,t);return o}}]),e}();function J(e,t){return e.replace(X,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var X=/\{\$([^}]+)}/g;function Z(e){return JSON.parse(e)}function ee(e){return JSON.stringify(e)}var te=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Z(L(a[0])||""),n=Z(L(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ne(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function re(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ie(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ae(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function oe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ue(u)&&ue(s)){if(!oe(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function ue(e){return null!==e&&"object"===typeof e}function se(e){for(var t=[],n=function(){var e=h(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ce(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=h(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function le(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var he=function(){function e(){f(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return p(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function fe(e,t){var n=new de(e,t);return n.subscribe.bind(n)}var de=function(){function e(t,n){var r=this;f(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return p(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=v(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=pe),void 0===r.error&&(r.error=pe),void 0===r.complete&&(r.complete=pe);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function pe(){}var ve=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ye(e,t){return"".concat(e," failed: ").concat(t," argument ")}function me(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ye(e,t)+"must be a valid function.")}function ge(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ye(e,t)+"must be a valid context object.")}var ke=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},we=144e5;function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(we,r+i)}function be(e){return e&&e._delegate?e._delegate:e}function xe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ie(e){return function(e){if(Array.isArray(e))return s(e)}(e)||xe(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(GC){return void n(GC)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Te(a,r,i,o,u,"next",e)}function u(e){Te(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Se=n(757),Ce=n.n(Se),Ne=function(){function e(t,n,r){f(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return p(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ae="[DEFAULT]",Pe=function(){function e(t,n){f(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return p(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new F;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ae})}catch(s){}var t,n=v(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ee(Se.mark((function e(){var t;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ie(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ie(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=v(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=h(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=v(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(hT){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ae?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(hT){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;return this.component?this.component.multipleInstances?e:Ae:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Re,De,Oe=function(){function e(t){f(this,e),this.name=t,this.providers=new Map}return p(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Pe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Le=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(De||(De={}));var Me={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Fe=De.INFO,Ue=(i(Re={},De.DEBUG,"log"),i(Re,De.VERBOSE,"log"),i(Re,De.INFO,"info"),i(Re,De.WARN,"warn"),i(Re,De.ERROR,"error"),Re),Ve=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ue[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},qe=function(){function e(t){f(this,e),this.name=t,this._logLevel=Fe,this._logHandler=Ve,this._userLogHandler=null,Le.push(this)}return p(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in De))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Me[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,De.DEBUG].concat(t)),this._logHandler.apply(this,[this,De.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,De.VERBOSE].concat(t)),this._logHandler.apply(this,[this,De.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,De.INFO].concat(t)),this._logHandler.apply(this,[this,De.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,De.WARN].concat(t)),this._logHandler.apply(this,[this,De.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,De.ERROR].concat(t)),this._logHandler.apply(this,[this,De.ERROR].concat(t))}}]),e}();var je,Be;var ze=new WeakMap,We=new WeakMap,Ke=new WeakMap,Ge=new WeakMap,He=new WeakMap;var Qe={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return We.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ke.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Je(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ye(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Be||(Be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Xe(this),n),Je(ze.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Je(e.apply(Xe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Xe(this),t].concat(r));return Ke.set(a,t.sort?t.sort():[t]),Je(a)}}function $e(e){return"function"===typeof e?Ye(e):(e instanceof IDBTransaction&&function(e){if(!We.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));We.set(e,t)}}(e),t=e,(je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Qe):e);var t}function Je(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Je(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ze.set(t,e)})).catch((function(){})),He.set(t,e),t}(e);if(Ge.has(e))return Ge.get(e);var t=$e(e);return t!==e&&(Ge.set(e,t),He.set(t,e)),t}var Xe=function(e){return He.get(e)};var Ze,et,tt=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],rt=new Map;function it(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(rt.get(t))return rt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=nt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||tt.includes(n))){var a=function(){var e=Ee(Se.mark((function e(t){var a,o,u,s,c,l,h=arguments;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return rt.set(t,a),a}}}Qe=function(e){return o(o({},e),{},{get:function(t,n,r){return it(t,n)||e.get(t,n,r)},has:function(t,n){return!!it(t,n)||e.has(t,n)}})}(Qe);var at=function(){function e(t){f(this,e),this.container=t}return p(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ot="@firebase/app",ut="0.7.24",st=new qe("@firebase/app"),ct="[DEFAULT]",lt=(i(Ze={},ot,"fire-core"),i(Ze,"@firebase/app-compat","fire-core-compat"),i(Ze,"@firebase/analytics","fire-analytics"),i(Ze,"@firebase/analytics-compat","fire-analytics-compat"),i(Ze,"@firebase/app-check","fire-app-check"),i(Ze,"@firebase/app-check-compat","fire-app-check-compat"),i(Ze,"@firebase/auth","fire-auth"),i(Ze,"@firebase/auth-compat","fire-auth-compat"),i(Ze,"@firebase/database","fire-rtdb"),i(Ze,"@firebase/database-compat","fire-rtdb-compat"),i(Ze,"@firebase/functions","fire-fn"),i(Ze,"@firebase/functions-compat","fire-fn-compat"),i(Ze,"@firebase/installations","fire-iid"),i(Ze,"@firebase/installations-compat","fire-iid-compat"),i(Ze,"@firebase/messaging","fire-fcm"),i(Ze,"@firebase/messaging-compat","fire-fcm-compat"),i(Ze,"@firebase/performance","fire-perf"),i(Ze,"@firebase/performance-compat","fire-perf-compat"),i(Ze,"@firebase/remote-config","fire-rc"),i(Ze,"@firebase/remote-config-compat","fire-rc-compat"),i(Ze,"@firebase/storage","fire-gcs"),i(Ze,"@firebase/storage-compat","fire-gcs-compat"),i(Ze,"@firebase/firestore","fire-fst"),i(Ze,"@firebase/firestore-compat","fire-fst-compat"),i(Ze,"fire-js","fire-js"),i(Ze,"firebase","fire-js-all"),Ze),ht=new Map,ft=new Map;function dt(e,t){try{e.container.addComponent(t)}catch(n){st.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function pt(e,t){e.container.addOrOverwriteComponent(t)}function vt(e){var t=e.name;if(ft.has(t))return st.debug("There were multiple attempts to register component ".concat(t,".")),!1;ft.set(t,e);var n,r=v(ht.values());try{for(r.s();!(n=r.n()).done;){dt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function yt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function mt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ct;yt(e,t).clearInstance(n)}function gt(){ft.clear()}var kt=(i(et={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(et,"bad-app-name","Illegal App name: '{$appName}"),i(et,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),i(et,"app-deleted","Firebase App named '{$appName}' already deleted"),i(et,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),i(et,"invalid-log-argument","First argument to `onLog` must be null or a function."),i(et,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),i(et,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),i(et,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),i(et,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),et),wt=new $("app","Firebase",kt),_t=function(){function e(t,n,r){var i=this;f(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ne("app",(function(){return i}),"PUBLIC"))}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw wt.create("app-deleted",{appName:this._name})}}]),e}(),bt="9.8.1";function xt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ct,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wt.create("bad-app-name",{appName:String(i)});var a=ht.get(i);if(a){if(oe(e,a.options)&&oe(r,a.config))return a;throw wt.create("duplicate-app",{appName:i})}var o,u=new Oe(i),s=v(ft.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new _t(e,r,u);return ht.set(i,l),l}function It(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=ht.get(e);if(!t)throw wt.create("no-app",{appName:e});return t}function Tt(){return Array.from(ht.values())}function Et(e){return St.apply(this,arguments)}function St(){return St=Ee(Se.mark((function e(t){var n;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ht.has(n)){e.next=6;break}return ht.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),St.apply(this,arguments)}function Ct(e,t,n){var r,i=null!==(r=lt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void st.warn(u.join(" "))}vt(new Ne("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Nt(e,t){if(null!==e&&"function"!==typeof e)throw wt.create("invalid-log-argument");!function(e,t){var n,r=v(Le);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Me[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:De[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function At(e){var t;t=e,Le.forEach((function(e){e.setLogLevel(t)}))}var Pt="firebase-heartbeat-store",Rt=null;function Dt(){return Rt||(Rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Je(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Je(u.result),e.oldVersion,e.newVersion,Je(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Pt)}}).catch((function(e){throw wt.create("storage-open",{originalErrorMessage:e.message})}))),Rt}function Ot(e){return Lt.apply(this,arguments)}function Lt(){return Lt=Ee(Se.mark((function e(t){var n;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Pt).objectStore(Pt).get(Ut(t)));case 7:throw e.prev=7,e.t0=e.catch(0),wt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Lt.apply(this,arguments)}function Mt(e,t){return Ft.apply(this,arguments)}function Ft(){return Ft=Ee(Se.mark((function e(t,n){var r,i,a;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dt();case 3:return r=e.sent,i=r.transaction(Pt,"readwrite"),a=i.objectStore(Pt),e.next=8,a.put(n,Ut(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),wt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Ft.apply(this,arguments)}function Ut(e){return"".concat(e.name,"!").concat(e.options.appId)}var Vt=function(){function e(t){var n=this;f(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Wt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return p(e,[{key:"triggerHeartbeat",value:function(){var e=Ee(Se.mark((function e(){var t,n,r;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=qt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ee(Se.mark((function e(){var t,n,r,i,a;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=qt(),n=jt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=O(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function qt(){return(new Date).toISOString().substring(0,10)}function jt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=v(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Kt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Kt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Bt,zt,Wt=function(){function e(t){f(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return p(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ee(Se.mark((function e(){return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",H().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ee(Se.mark((function e(){var t;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ot(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ee(Se.mark((function e(t){var n,r;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ee(Se.mark((function e(t){var n,r;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ie(r.heartbeats),Ie(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Kt(e){return O(JSON.stringify({version:2,heartbeats:e})).length}Bt="",vt(new Ne("platform-logger",(function(e){return new at(e)}),"PRIVATE")),vt(new Ne("heartbeat",(function(e){return new Vt(e)}),"PRIVATE")),Ct(ot,ut,Bt),Ct(ot,ut,"esm2017"),Ct("fire-js","");var Gt=function(){function e(t,n){var r=this;f(this,e),this._delegate=t,this.firebase=n,dt(t,new Ne("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Et(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){dt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){pt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ht=(i(zt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(zt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),zt),Qt=new $("app-compat","Firebase",Ht);var Yt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=xt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ne(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ct,setLogLevel:At,onLog:Nt,apps:null,SDK_VERSION:bt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(vt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Qt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&M(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ne(n,e=e||ct))throw Qt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Gt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){M(n,e)},createSubscribe:fe,ErrorFactory:$,deepExtend:M}),n}(),$t=new qe("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){$t.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Jt=self.firebase.SDK_VERSION;Jt&&Jt.indexOf("LITE")>=0&&$t.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Xt=Yt;!function(e){Ct("@firebase/app-compat","0.1.25",e)}();Xt.registerVersion("firebase","9.8.1","app-compat");var Zt,en;var tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,an=new WeakMap,on=new WeakMap;var un={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return nn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||rn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function sn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(en||(en=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(hn(this),n),ln(tn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ln(e.apply(hn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[hn(this),t].concat(r));return rn.set(a,t.sort?t.sort():[t]),ln(a)}}function cn(e){return"function"===typeof e?sn(e):(e instanceof IDBTransaction&&function(e){if(!nn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));nn.set(e,t)}}(e),t=e,(Zt||(Zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,un):e);var t}function ln(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ln(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&tn.set(t,e)})).catch((function(){})),on.set(t,e),t}(e);if(an.has(e))return an.get(e);var t=cn(e);return t!==e&&(an.set(e,t),on.set(t,e)),t}var hn=function(e){return on.get(e)};var fn,dn=["get","getKey","getAll","getAllKeys","count"],pn=["put","add","delete","clear"],vn=new Map;function yn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(vn.get(t))return vn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=pn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||dn.includes(n))){var a=function(){var e=Ee(Se.mark((function e(t){var a,o,u,s,c,l,h=arguments;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return vn.set(t,a),a}}}!function(e){un=e(un)}((function(e){return o(o({},e),{},{get:function(t,n,r){return yn(t,n)||e.get(t,n,r)},has:function(t,n){return!!yn(t,n)||e.has(t,n)}})}));var mn="@firebase/installations",gn="0.5.9",kn=1e4,wn="w:".concat(gn),_n="FIS_v2",bn=36e5,xn=(i(fn={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),i(fn,"not-registered","Firebase Installation is not registered."),i(fn,"installation-not-found","Firebase Installation not found."),i(fn,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),i(fn,"app-offline","Could not process request. Application offline."),i(fn,"delete-pending-registration","Can't delete installation while there is a pending registration request."),fn),In=new $("installations","Installations",xn);function Tn(e){return e instanceof Y&&e.code.includes("request-failed")}function En(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function Sn(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Cn(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=Ee(Se.mark((function e(t,n){var r,i;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",In.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Pn(e,t){var n=t.refreshToken,r=An(e);return r.append("Authorization",function(e){return"".concat(_n," ").concat(e)}(n)),r}function Rn(e){return Dn.apply(this,arguments)}function Dn(){return Dn=Ee(Se.mark((function e(t){var n;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function On(e,t){return Ln.apply(this,arguments)}function Ln(){return(Ln=Ee(Se.mark((function e(t,n){var r,i,a,o,u,s,c,l,h,f,d,p;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=En(r),u=An(r),!(s=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,s.getHeartbeatsHeader();case 8:(c=e.sent)&&u.append("x-firebase-client",c);case 10:return l={fid:a,authVersion:_n,appId:r.appId,sdkVersion:wn},h={method:"POST",headers:u,body:JSON.stringify(l)},e.next=14,Rn((function(){return fetch(o,h)}));case 14:if(!(f=e.sent).ok){e.next=23;break}return e.next=18,f.json();case 18:return d=e.sent,p={fid:d.fid||a,registrationStatus:2,refreshToken:d.refreshToken,authToken:Sn(d.authToken)},e.abrupt("return",p);case 23:return e.next=25,Cn("Create Installation",f);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mn(e){return new Promise((function(t){setTimeout(t,e)}))}var Fn=/^[cdef][\w-]{21}$/;function Un(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Ie(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return Fn.test(t)?t:""}catch(hT){return""}}function Vn(e){return"".concat(e.appName,"!").concat(e.appId)}var qn=new Map;function jn(e,t){var n=Vn(e);Bn(n,t),function(e,t){var n=Wn();n&&n.postMessage({key:e,fid:t});Kn()}(n,t)}function Bn(e,t){var n=qn.get(e);if(n){var r,i=v(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var zn=null;function Wn(){return!zn&&"BroadcastChannel"in self&&((zn=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Bn(e.data.key,e.data.fid)}),zn}function Kn(){0===qn.size&&zn&&(zn.close(),zn=null)}var Gn="firebase-installations-store",Hn=null;function Qn(){return Hn||(Hn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ln(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ln(u.result),e.oldVersion,e.newVersion,ln(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Gn)}})),Hn}function Yn(e,t){return $n.apply(this,arguments)}function $n(){return $n=Ee(Se.mark((function e(t,n){var r,i,a,o,u;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vn(t),e.next=3,Qn();case 3:return i=e.sent,a=i.transaction(Gn,"readwrite"),o=a.objectStore(Gn),e.next=8,o.get(r);case 8:return u=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.done;case 13:return u&&u.fid===n.fid||jn(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),$n.apply(this,arguments)}function Jn(e){return Xn.apply(this,arguments)}function Xn(){return Xn=Ee(Se.mark((function e(t){var n,r,i;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vn(t),e.next=3,Qn();case 3:return r=e.sent,i=r.transaction(Gn,"readwrite"),e.next=7,i.objectStore(Gn).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)}))),Xn.apply(this,arguments)}function Zn(e,t){return er.apply(this,arguments)}function er(){return er=Ee(Se.mark((function e(t,n){var r,i,a,o,u,s;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vn(t),e.next=3,Qn();case 3:return i=e.sent,a=i.transaction(Gn,"readwrite"),o=a.objectStore(Gn),e.next=8,o.get(r);case 8:if(u=e.sent,void 0!==(s=n(u))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(s,r);case 17:return e.next=19,a.done;case 19:return!s||u&&u.fid===s.fid||jn(t,s.fid),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}function tr(e){return nr.apply(this,arguments)}function nr(){return(nr=Ee(Se.mark((function e(t){var n,r;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn(t.appConfig,(function(e){var r=rr(e),i=ir(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e){return cr(e||{fid:Un(),registrationStatus:0})}function ir(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(In.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return ar.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:or(e)}:{installationEntry:t}}function ar(){return(ar=Ee(Se.mark((function e(t,n){var r;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,On(t,n);case 3:return r=e.sent,e.abrupt("return",Yn(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!Tn(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,Jn(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,Yn(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function or(e){return ur.apply(this,arguments)}function ur(){return(ur=Ee(Se.mark((function e(t){var n,r,i,a;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,Mn(100);case 6:return e.next=8,sr(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,tr(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sr(e){return Zn(e,(function(e){if(!e)throw In.create("installation-not-found");return cr(e)}))}function cr(e){return 1===(t=e).registrationStatus&&t.registrationTime+kn<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function lr(e,t){return hr.apply(this,arguments)}function hr(){return(hr=Ee(Se.mark((function e(t,n){var r,i,a,o,u,s,c,l,h,f,d;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=fr(r,n),o=Pn(r,n),!(u=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(s=e.sent)&&o.append("x-firebase-client",s);case 9:return c={installation:{sdkVersion:wn,appId:r.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,Rn((function(){return fetch(a,l)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return f=e.sent,d=Sn(f),e.abrupt("return",d);case 22:return e.next=24,Cn("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fr(e,t){var n=t.fid;return"".concat(En(e),"/").concat(n,"/authTokens:generate")}function dr(e){return pr.apply(this,arguments)}function pr(){return pr=Ee(Se.mark((function e(t){var n,r,i,a,o=arguments;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,Zn(t.appConfig,(function(e){if(!wr(e))throw In.create("not-registered");var i=e.authToken;if(!n&&_r(i))return e;if(1===i.requestStatus)return r=vr(t,n),e;if(!navigator.onLine)throw In.create("app-offline");var a=br(e);return r=gr(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t){return yr.apply(this,arguments)}function yr(){return(yr=Ee(Se.mark((function e(t,n){var r,i;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,Mn(100);case 6:return e.next=8,mr(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",dr(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mr(e){return Zn(e,(function(e){if(!wr(e))throw In.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+kn<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function gr(e,t){return kr.apply(this,arguments)}function kr(){return(kr=Ee(Se.mark((function e(t,n){var r,i,a;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lr(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,Yn(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!Tn(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,Jn(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,Yn(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function wr(e){return void 0!==e&&2===e.registrationStatus}function _r(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+bn}(e)}function br(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function xr(){return(xr=Ee(Se.mark((function e(t){var n,r,i,a;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,tr(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):dr(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(){return Ir=Ee(Se.mark((function e(t){var n,r,i,a=arguments;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,Tr(r);case 4:return e.next=6,dr(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Tr(e){return Er.apply(this,arguments)}function Er(){return(Er=Ee(Se.mark((function e(t){var n,r;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e){return In.create("missing-app-config-values",{valueName:e})}var Cr,Nr="installations",Ar=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Sr("App Configuration");if(!e.name)throw Sr("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw Sr(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:yt(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},Pr=function(e){var t=yt(e.getProvider("app").getImmediate(),Nr).getImmediate(),n={getId:function(){return function(e){return xr.apply(this,arguments)}(t)},getToken:function(e){return function(e){return Ir.apply(this,arguments)}(t,e)}};return n};vt(new Ne(Nr,Ar,"PUBLIC")),vt(new Ne("installations-internal",Pr,"PRIVATE")),Ct(mn,gn),Ct(mn,gn,"esm2017");var Rr="analytics",Dr=6e4,Or="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lr="https://www.googletagmanager.com/gtag/js",Mr=new qe("@firebase/analytics");function Fr(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function Ur(e,t){var n=document.createElement("script");n.src="".concat(Lr,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function Vr(e,t,n,r,i,a){return qr.apply(this,arguments)}function qr(){return qr=Ee(Se.mark((function e(t,n,r,i,a,o){var u,s,c;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,Fr(r);case 9:if(s=e.sent,!(c=s.find((function(e){return e.measurementId===a})))){e.next=14;break}return e.next=14,n[c.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),Mr.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),qr.apply(this,arguments)}function jr(e,t,n,r,i){return Br.apply(this,arguments)}function Br(){return Br=Ee(Se.mark((function e(t,n,r,i,a){var o,u,s,c,l,h;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,Fr(r);case 7:s=e.sent,c=v(u),e.prev=9,h=function(){var e=l.value,t=s.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},c.s();case 12:if((l=c.n()).done){e.next=18;break}if("break"!==h()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),Mr.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),Br.apply(this,arguments)}function zr(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=Ee(Se.mark((function i(a,o,u){return Se.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,jr(e,t,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,Vr(e,t,n,r,o,u);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),Mr.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function Wr(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Lr))return r}return null}var Kr=(i(Cr={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),i(Cr,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),i(Cr,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),i(Cr,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),i(Cr,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),i(Cr,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),i(Cr,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),i(Cr,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),i(Cr,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),i(Cr,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),Cr),Gr=new $("analytics","Analytics",Kr),Hr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;f(this,e),this.throttleMetadata=t,this.intervalMillis=n}return p(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),Qr=new Hr;function Yr(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function $r(e){return Jr.apply(this,arguments)}function Jr(){return Jr=Ee(Se.mark((function e(t){var n,r,i,a,o,u,s,c;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:Yr(i)},o=Or.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(u=e.sent).status||304===u.status){e.next=18;break}return s="",e.prev=8,e.next=11,u.json();case 11:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw Gr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 18:return e.abrupt("return",u.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),Jr.apply(this,arguments)}function Xr(e){return Zr.apply(this,arguments)}function Zr(){return Zr=Ee(Se.mark((function e(t){var n,r,i,a,o,u,s,c,l=arguments;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:Qr,r=l.length>2?l[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,u=i.measurementId,a){e.next=5;break}throw Gr.create("no-app-id");case 5:if(o){e.next=9;break}if(!u){e.next=8;break}return e.abrupt("return",{measurementId:u,appId:a});case 8:throw Gr.create("no-api-key");case 9:return s=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new ii,setTimeout(Ee(Se.mark((function e(){return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:Dr),e.abrupt("return",ei({appId:a,apiKey:o,measurementId:u},s,c,n));case 13:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function ei(e,t,n){return ti.apply(this,arguments)}function ti(){return ti=Ee(Se.mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f=arguments;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=f.length>3&&void 0!==f[3]?f[3]:Qr,u=t.appId,s=t.measurementId,e.prev=3,e.next=6,ni(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!s){e.next=13;break}return Mr.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t0.message,"]")),e.abrupt("return",{appId:u,measurementId:s});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,$r(t);case 17:return c=e.sent,o.deleteThrottleMetadata(u),e.abrupt("return",c);case 22:if(e.prev=22,e.t1=e.catch(14),ri(e.t1)){e.next=32;break}if(o.deleteThrottleMetadata(u),!s){e.next=31;break}return Mr.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t1.message,"]")),e.abrupt("return",{appId:u,measurementId:s});case 31:throw e.t1;case 32:return l=503===Number(e.t1.customData.httpStatus)?_e(a,o.intervalMillis,30):_e(a,o.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:a+1},o.setThrottleMetadata(u,h),Mr.debug("Calling attemptFetch again in ".concat(l," millis")),e.abrupt("return",ei(t,h,r,o));case 37:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),ti.apply(this,arguments)}function ni(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(Gr.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function ri(e){if(!(e instanceof Y)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var ii=function(){function e(){f(this,e),this.listeners=[]}return p(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function ai(){return oi.apply(this,arguments)}function oi(){return(oi=Ee(Se.mark((function e(){return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G()){e.next=5;break}return Mr.warn(Gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,H();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),Mr.warn(Gr.create("indexeddb-unavailable",{errorInfo:e.t0}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function ui(){return ui=Ee(Se.mark((function e(t,n,r,i,a,o,u){var s,c,l,f,d,p,v,y;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=Xr(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Mr.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return Mr.error(e)})),n.push(c),l=ai().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([c,l]);case 6:return f=e.sent,d=h(f,2),p=d[0],v=d[1],Wr()||Ur(o,p.measurementId),a("js",new Date),(y=null!==(s=null===u||void 0===u?void 0:u.config)&&void 0!==s?s:{}).origin="firebase",y.update=!0,null!=v&&(y.firebase_id=v),a("config",p.measurementId,y),e.abrupt("return",p.measurementId);case 18:case"end":return e.stop()}}),e)}))),ui.apply(this,arguments)}var si,ci,li=function(){function e(t){f(this,e),this.app=t}return p(e,[{key:"_delete",value:function(){return delete hi[this.app.options.appId],Promise.resolve()}}]),e}(),hi={},fi=[],di={},pi="dataLayer",vi="gtag",yi=!1;function mi(e){if(yi)throw Gr.create("already-initialized");e.dataLayerName&&(pi=e.dataLayerName),e.gtagName&&(vi=e.gtagName)}function gi(e,t,n){!function(){var e=[];if(B()&&e.push("This is a browser extension environment."),Q()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=Gr.create("invalid-analytics-context",{errorInfo:t});Mr.warn(n.message)}}();var r=e.options.appId;if(!r)throw Gr.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Gr.create("no-api-key");Mr.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=hi[r])throw Gr.create("already-exists",{id:r});if(!yi){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(pi);var i=zr(hi,fi,di,pi,vi),a=i.wrappedGtag,o=i.gtagCore;ci=a,si=o,yi=!0}return hi[r]=function(e,t,n,r,i,a,o){return ui.apply(this,arguments)}(e,fi,di,t,si,pi,n),new li(e)}function ki(){return(ki=Ee(Se.mark((function e(t,n,r,i,a){var o,u;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,u=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(){return(wi=Ee(Se.mark((function e(t,n,r,i){var a;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=5;break}return t("set",{screen_name:r}),e.abrupt("return",Promise.resolve());case 5:return e.next=7,n;case 7:a=e.sent,t("config",a,{update:!0,screen_name:r});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _i(){return _i=Ee(Se.mark((function e(t,n,r,i){var a;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=5;break}return t("set",{user_id:r}),e.abrupt("return",Promise.resolve());case 5:return e.next=7,n;case 7:a=e.sent,t("config",a,{update:!0,user_id:r});case 9:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function bi(){return(bi=Ee(Se.mark((function e(t,n,r,i){var a,o,u,s,c;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=7;break}for(a={},o=0,u=Object.keys(r);o<u.length;o++)s=u[o],a["user_properties.".concat(s)]=r[s];return t("set",a),e.abrupt("return",Promise.resolve());case 7:return e.next=9,n;case 9:c=e.sent,t("config",c,{update:!0,user_properties:r});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xi(){return(xi=Ee(Se.mark((function e(t,n){var r;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:r=e.sent,window["ga-disable-".concat(r)]=!n;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(){return Ti.apply(this,arguments)}function Ti(){return(Ti=Ee(Se.mark((function e(){var t;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B()){e.next=2;break}return e.abrupt("return",!1);case 2:if(Q()){e.next=4;break}return e.abrupt("return",!1);case 4:if(G()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,H();case 9:return t=e.sent,e.abrupt("return",t);case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function Ei(e,t,n){e=be(e),function(e,t,n,r){return wi.apply(this,arguments)}(ci,hi[e.app.options.appId],t,n).catch((function(e){return Mr.error(e)}))}function Si(e,t,n){e=be(e),function(e,t,n,r){return _i.apply(this,arguments)}(ci,hi[e.app.options.appId],t,n).catch((function(e){return Mr.error(e)}))}function Ci(e,t,n){e=be(e),function(e,t,n,r){return bi.apply(this,arguments)}(ci,hi[e.app.options.appId],t,n).catch((function(e){return Mr.error(e)}))}function Ni(e,t){e=be(e),function(e,t){return xi.apply(this,arguments)}(hi[e.app.options.appId],t).catch((function(e){return Mr.error(e)}))}function Ai(e,t,n,r){e=be(e),function(e,t,n,r,i){return ki.apply(this,arguments)}(ci,hi[e.app.options.appId],t,n,r).catch((function(e){return Mr.error(e)}))}var Pi="@firebase/analytics",Ri="0.7.9";vt(new Ne(Rr,(function(e,t){var n=t.options;return gi(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),vt(new Ne("analytics-internal",(function(e){try{var t=e.getProvider(Rr).getImmediate();return{logEvent:function(e,n,r){return Ai(t,e,n,r)}}}catch(n){throw Gr.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),Ct(Pi,Ri),Ct(Pi,Ri,"esm2017");var Di,Oi=function(){function e(t,n){f(this,e),this.app=t,this._delegate=n}return p(e,[{key:"logEvent",value:function(e,t,n){Ai(this._delegate,e,t,n)}},{key:"setCurrentScreen",value:function(e,t){Ei(this._delegate,e,t)}},{key:"setUserId",value:function(e,t){Si(this._delegate,e,t)}},{key:"setUserProperties",value:function(e,t){Ci(this._delegate,e,t)}},{key:"setAnalyticsCollectionEnabled",value:function(e){Ni(this._delegate,e)}}]),e}();!function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(Di||(Di={}));var Li=function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("analytics").getImmediate();return new Oi(t,n)};function Mi(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function Fi(){return Fi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Mi(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Fi.apply(this,arguments)}!function(){var e={Analytics:Oi,settings:mi,isSupported:Ii,EventName:Di};Xt.INTERNAL.registerComponent(new Ne("analytics-compat",Li,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),Xt.registerVersion("@firebase/analytics-compat","0.1.10");function Ui(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Vi;Object.create;var qi="facebook.com",ji="github.com",Bi="google.com",zi="password",Wi="twitter.com",Ki="EMAIL_SIGNIN",Gi="PASSWORD_RESET",Hi="RECOVER_EMAIL",Qi="REVERT_SECOND_FACTOR_ADDITION",Yi="VERIFY_AND_CHANGE_EMAIL",$i="VERIFY_EMAIL";function Ji(){return i({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Xi=function(){var e;return i(e={},"admin-restricted-operation","This operation is restricted to administrators only."),i(e,"argument-error",""),i(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),i(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),i(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),i(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),i(e,"cordova-not-ready","Cordova framework is not ready."),i(e,"cors-unsupported","This browser is not supported."),i(e,"credential-already-in-use","This credential is already associated with a different user account."),i(e,"custom-token-mismatch","The custom token corresponds to a different audience."),i(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),i(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),i(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),i(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),i(e,"email-already-in-use","The email address is already in use by another account."),i(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),i(e,"expired-action-code","The action code has expired."),i(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),i(e,"internal-error","An internal AuthError has occurred."),i(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),i(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),i(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),i(e,"invalid-auth-event","An internal AuthError has occurred."),i(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),i(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),i(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),i(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),i(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),i(e,"invalid-email","The email address is badly formatted."),i(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),i(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),i(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),i(e,"invalid-credential","The supplied auth credential is malformed or has expired."),i(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),i(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),i(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),i(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),i(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),i(e,"wrong-password","The password is invalid or the user does not have a password."),i(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),i(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),i(e,"invalid-provider-id","The specified provider ID is invalid."),i(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),i(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),i(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),i(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),i(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),i(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),i(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),i(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),i(e,"missing-continue-uri","A continue URL must be provided in the request."),i(e,"missing-iframe-start","An internal AuthError has occurred."),i(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),i(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),i(e,"missing-multi-factor-info","No second factor identifier is provided."),i(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),i(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),i(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),i(e,"app-deleted","This instance of FirebaseApp has been deleted."),i(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),i(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),i(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),i(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),i(e,"no-auth-event","An internal AuthError has occurred."),i(e,"no-such-provider","User was not linked to an account with the given provider."),i(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),i(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),i(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),i(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),i(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),i(e,"provider-already-linked","User can only be linked to one identity for the given provider."),i(e,"quota-exceeded","The project's quota for this operation has been exceeded."),i(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),i(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),i(e,"rejected-credential","The request contains malformed or mismatching credentials."),i(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),i(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),i(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),i(e,"timeout","The operation has timed out."),i(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),i(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),i(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),i(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),i(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),i(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),i(e,"unverified-email","The operation requires a verified email."),i(e,"user-cancelled","The user did not grant your application the permissions it requested."),i(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),i(e,"user-disabled","The user account has been disabled by an administrator."),i(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),i(e,"user-signed-out",""),i(e,"weak-password","The password must be 6 characters long or more."),i(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),i(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Zi=Ji,ea=new $("auth","Firebase",Ji()),ta=new qe("@firebase/auth");function na(e){if(ta.logLevel<=De.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ta.error.apply(ta,["Auth (".concat(bt,"): ").concat(e)].concat(n))}}function ra(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ua.apply(void 0,[e].concat(n))}function ia(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ua.apply(void 0,[e].concat(n))}function aa(e,t,n){var r=Object.assign(Object.assign({},Zi()),i({},t,n));return new $("auth","Firebase",r).create(t,{appName:e.name})}function oa(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ra(e,"argument-error"),aa(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ua(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ie(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ie(o)))}return ea.create.apply(ea,[e].concat(n))}function sa(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ua.apply(void 0,[t].concat(r))}}function ca(e){var t="INTERNAL ASSERTION FAILED: "+e;throw na(t),new Error(t)}function la(e,t){e||ca(t)}var ha=new Map;function fa(e){la(e instanceof Function,"Expected a class definition");var t=ha.get(e);return t?(la(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ha.set(e,t),t)}function da(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function pa(){return"http:"===va()||"https:"===va()}function va(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ya=function(){function e(t,n){f(this,e),this.shortDelay=t,this.longDelay=n,la(n>t,"Short delay should be less than long delay!"),this.isMobile=q()||z()}return p(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(pa()||B()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ma(e,t){la(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ga=function(){function e(){f(this,e)}return p(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ca("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ca("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ca("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ka=(i(Vi={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),i(Vi,"MISSING_CUSTOM_TOKEN","internal-error"),i(Vi,"INVALID_IDENTIFIER","invalid-email"),i(Vi,"MISSING_CONTINUE_URI","internal-error"),i(Vi,"INVALID_PASSWORD","wrong-password"),i(Vi,"MISSING_PASSWORD","internal-error"),i(Vi,"EMAIL_EXISTS","email-already-in-use"),i(Vi,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),i(Vi,"INVALID_IDP_RESPONSE","invalid-credential"),i(Vi,"INVALID_PENDING_TOKEN","invalid-credential"),i(Vi,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),i(Vi,"MISSING_REQ_TYPE","internal-error"),i(Vi,"EMAIL_NOT_FOUND","user-not-found"),i(Vi,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),i(Vi,"EXPIRED_OOB_CODE","expired-action-code"),i(Vi,"INVALID_OOB_CODE","invalid-action-code"),i(Vi,"MISSING_OOB_CODE","internal-error"),i(Vi,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),i(Vi,"INVALID_ID_TOKEN","invalid-user-token"),i(Vi,"TOKEN_EXPIRED","user-token-expired"),i(Vi,"USER_NOT_FOUND","user-token-expired"),i(Vi,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),i(Vi,"INVALID_CODE","invalid-verification-code"),i(Vi,"INVALID_SESSION_INFO","invalid-verification-id"),i(Vi,"INVALID_TEMPORARY_PROOF","invalid-credential"),i(Vi,"MISSING_SESSION_INFO","missing-verification-id"),i(Vi,"SESSION_EXPIRED","code-expired"),i(Vi,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),i(Vi,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),i(Vi,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),i(Vi,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),i(Vi,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),i(Vi,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),i(Vi,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),i(Vi,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),i(Vi,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),i(Vi,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),i(Vi,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Vi),wa=new ya(3e4,6e4);function _a(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function ba(e,t,n,r){return xa.apply(this,arguments)}function xa(){return xa=Ee(Ce().mark((function e(t,n,r,i){var a,o=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Ia(t,a,Ee(Ce().mark((function e(){var a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=se(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ga.fetch()(Ca(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}function Ia(e,t,n){return Ta.apply(this,arguments)}function Ta(){return(Ta=Ee(Ce().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d,p;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ka),n),e.prev=2,a=new Na(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Aa(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=h(c,2),f=l[0],d=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Aa(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw Aa(t,"email-already-in-use",u);case 25:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw aa(t,p,d);case 30:ra(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Y)){e.next=37;break}throw e.t0;case 37:ra(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function Ea(e,t,n,r){return Sa.apply(this,arguments)}function Sa(){return Sa=Ee(Ce().mark((function e(t,n,r,i){var a,o,u=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,ba(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ra(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}function Ca(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ma(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Na=function(){function e(t){var n=this;f(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ia(n.auth,"network-request-failed"))}),wa.get())}))}return p(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Aa(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ia(e,t,r);return i.customData._tokenResponse=n,i}function Pa(e,t){return Ra.apply(this,arguments)}function Ra(){return(Ra=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(e,t){return Oa.apply(this,arguments)}function Oa(){return(Oa=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(e,t){return Ma.apply(this,arguments)}function Ma(){return(Ma=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ua(){return Ua=Ee(Ce().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=be(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,sa((a=qa(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Fa(Va(a.auth_time)),issuedAtTime:Fa(Va(a.iat)),expirationTime:Fa(Va(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function Va(e){return 1e3*Number(e)}function qa(e){var t=h(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return na("JWT malformed, contained fewer than 3 sections"),null;try{var a=L(r);return a?JSON.parse(a):(na("Failed to decode base64 JWT payload"),null)}catch(o){return na("Caught error parsing JWT payload as JSON",o),null}}function ja(e,t){return Ba.apply(this,arguments)}function Ba(){return Ba=Ee(Ce().mark((function e(t,n){var r=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Y&&za(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ba.apply(this,arguments)}function za(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Wa=function(){function e(t){f(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return p(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ee(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ka=function(){function e(t,n){f(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return p(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Fa(this.lastLoginAt),this.creationTime=Fa(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ga(e){return Ha.apply(this,arguments)}function Ha(){return Ha=Ee(Ce().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ja(t,La(r,{idToken:i}));case 6:sa(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?$a(o.providerUserInfo):[],s=Ya(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ka(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Qa(){return(Qa=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=be(t),e.next=3,Ga(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ya(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ie(n),Ie(t))}function $a(e){return e.map((function(e){var t=e.providerId,n=Ui(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ja(e,t){return Xa.apply(this,arguments)}function Xa(){return(Xa=Ee(Ce().mark((function e(t,n){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ia(t,{},Ee(Ce().mark((function e(){var r,i,a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=se({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Ca(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ga.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Za=function(){function e(){f(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return p(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){sa(e.idToken,"internal-error"),sa("undefined"!==typeof e.idToken,"internal-error"),sa("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=qa(e);return sa(t,"internal-error"),sa("undefined"!==typeof t.exp,"internal-error"),sa("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ee(Ce().mark((function e(t){var n,r=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],sa(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ee(Ce().mark((function e(t,n){var r,i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ja(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ca("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(sa("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(sa("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(sa("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function eo(e,t){sa("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var to=function(){function e(t){f(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Ui(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Ie(a.providerData):[],this.metadata=new Ka(a.createdAt||void 0,a.lastLoginAt||void 0)}return p(e,[{key:"getIdToken",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(sa(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ua.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Qa.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(sa(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){sa(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ee(Ce().mark((function e(t){var n,r,i=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ga(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ja(this,Pa(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,_=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;sa(k&&x,t,"internal-error");var I=Za.fromJSON(this.name,x);sa("string"===typeof k,t,"internal-error"),eo(h,t.name),eo(f,t.name),sa("boolean"===typeof w,t,"internal-error"),sa("boolean"===typeof _,t,"internal-error"),eo(d,t.name),eo(p,t.name),eo(v,t.name),eo(y,t.name),eo(m,t.name),eo(g,t.name);var T=new e({uid:k,auth:t,email:f,emailVerified:w,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(T.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(){var t=Ee(Ce().mark((function t(n,r){var i,a,o,u=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Za).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ga(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),no=function(){function e(){f(this,e),this.type="NONE",this.storage={}}return p(e,[{key:"_isAvailable",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();no.type="NONE";var ro=no;function io(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ao=function(){function e(t,n,r){f(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=io(this.userKey,a.apiKey,o),this.fullPersistenceKey=io("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return p(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?to._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ee(Ce().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,d,p,y=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(fa(ro),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||fa(ro),u=io(i,n.config.apiKey,n.name),s=null,c=v(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return d=to._fromJSON(n,f),h!==o&&(s=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function oo(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lo(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(uo(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fo(t))return"Blackberry";if(po(t))return"Webos";if(so(t))return"Safari";if((t.includes("chrome/")||co(t))&&!t.includes("edge/"))return"Chrome";if(ho(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/firefox\//i.test(e)}function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function co(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/crios\//i.test(e)}function lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/iemobile/i.test(e)}function ho(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/android/i.test(e)}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/blackberry/i.test(e)}function po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/webos/i.test(e)}function vo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/iphone|ipad|ipod/i.test(e)}function yo(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return vo(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function mo(){return W()&&10===document.documentMode}function go(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return vo(e)||ho(e)||po(e)||fo(e)||/windows phone/i.test(e)||lo(e)}function ko(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oo(V());break;case"Worker":t="".concat(oo(V()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(bt,"/").concat(r)}var wo=function(){function e(t){f(this,e),this.auth=t,this.queue=[]}return p(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Ee(Ce().mark((function e(t){var n,r,i,a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=v(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=v(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_o=function(){function e(t,n,r){f(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xo(this),this.idTokenSubscription=new xo(this),this.beforeStateQueue=new wo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ea,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return p(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=fa(t)),this._initializationPromise=this.queue(Ee(Ce().mark((function r(){var i,a;return Ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ao.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ee(Ce().mark((function e(t){var n,r,i,a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return sa(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ga(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?be(t):null)&&sa(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ee(Ce().mark((function e(t){var n,r=this,i=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&sa(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ee(Ce().mark((function n(){return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(fa(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new $("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ee(Ce().mark((function e(t,n){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return sa(n=t&&fa(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ao.create(this,[fa(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ee(Ce().mark((function e(t){var n=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return sa(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return sa(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ko(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ee(Ce().mark((function e(){var t,n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function bo(e){return be(e)}var xo=function(){function e(t){var n=this;f(this,e),this.auth=t,this.observer=null,this.addObserver=fe((function(e){return n.observer=e}))}return p(e,[{key:"next",get:function(){return sa(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Io(e,t,n){var r=bo(e);sa(r._canInitEmulator,r,"emulator-config-failed"),sa(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=To(t),o=function(e){var t=To(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Eo(r.substr(a.length+1))}}var o=h(r.split(":"),2);return{host:o[0],port:Eo(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function To(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Eo(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var So=function(){function e(t,n){f(this,e),this.providerId=t,this.signInMethod=n}return p(e,[{key:"toJSON",value:function(){return ca("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ca("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ca("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ca("not implemented")}}]),e}();function Co(e,t){return No.apply(this,arguments)}function No(){return(No=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:resetPassword",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ao(e,t){return Po.apply(this,arguments)}function Po(){return(Po=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(e,t){return Do.apply(this,arguments)}function Do(){return(Do=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:update",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e,t){return Lo.apply(this,arguments)}function Lo(){return(Lo=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,"POST","/v1/accounts:signInWithPassword",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mo(e,t){return Fo.apply(this,arguments)}function Fo(){return(Fo=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:sendOobCode",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(e,t){return Vo.apply(this,arguments)}function Vo(){return(Vo=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mo(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(e,t){return jo.apply(this,arguments)}function jo(){return(jo=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mo(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(e,t){return zo.apply(this,arguments)}function zo(){return(zo=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mo(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(e,t){return Ko.apply(this,arguments)}function Ko(){return(Ko=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mo(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(e,t){return Ho.apply(this,arguments)}function Ho(){return(Ho=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,"POST","/v1/accounts:signInWithEmailLink",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(e,t){return Yo.apply(this,arguments)}function Yo(){return(Yo=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,"POST","/v1/accounts:signInWithEmailLink",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $o=function(e){g(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return p(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Oo(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Go(t,{email:this._email,oobCode:this._password}));case 5:ra(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ao(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Qo(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ra(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(So);function Jo(e,t){return Xo.apply(this,arguments)}function Xo(){return(Xo=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,"POST","/v1/accounts:signInWithIdp",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zo=function(e){g(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return p(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Jo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Jo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=se(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ra("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ui(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(So);function eu(e,t){return tu.apply(this,arguments)}function tu(){return(tu=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:sendVerificationCode",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(){return(nu=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,"POST","/v1/accounts:signInWithPhoneNumber",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ru(){return(ru=Ee(Ce().mark((function e(t,n){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea(t,"POST","/v1/accounts:signInWithPhoneNumber",_a(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Aa(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iu=i({},"USER_NOT_FOUND","user-not-found");function au(){return(au=Ee(Ce().mark((function e(t,n){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ea(t,"POST","/v1/accounts:signInWithPhoneNumber",_a(t,r),iu));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ou=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone","phone")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return nu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ru.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return au.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(So);var uu=function(){function e(t){var n,r,i,a,o,u;f(this,e);var s=ce(le(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);sa(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return p(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ce(le(e)).link,n=t?ce(le(t)).deep_link_id:null,r=ce(le(e)).deep_link_id;return(r?ce(le(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(hT){return null}}}]),e}();var su=function(){function e(){f(this,e),this.providerId=e.PROVIDER_ID}return p(e,null,[{key:"credential",value:function(e,t){return $o._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=uu.parseLink(t);return sa(n,"argument-error"),$o._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();su.PROVIDER_ID="password",su.EMAIL_PASSWORD_SIGN_IN_METHOD="password",su.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var cu=function(){function e(t){f(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return p(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),lu=function(e){g(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).scopes=[],e}return p(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ie(this.scopes)}}]),n}(cu),hu=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return sa(e.idToken||e.accessToken,"argument-error"),Zo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return sa("providerId"in t&&"signInMethod"in t,"argument-error"),Zo._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(lu),fu=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.call(this,"facebook.com")}return p(n,null,[{key:"credential",value:function(e){return Zo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(hT){return null}}}]),n}(lu);fu.FACEBOOK_SIGN_IN_METHOD="facebook.com",fu.PROVIDER_ID="facebook.com";var du=function(e){g(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return p(n,null,[{key:"credential",value:function(e,t){return Zo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(hT){return null}}}]),n}(lu);du.GOOGLE_SIGN_IN_METHOD="google.com",du.PROVIDER_ID="google.com";var pu=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.call(this,"github.com")}return p(n,null,[{key:"credential",value:function(e){return Zo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(hT){return null}}}]),n}(lu);pu.GITHUB_SIGN_IN_METHOD="github.com",pu.PROVIDER_ID="github.com";var vu=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return p(n,[{key:"_getIdTokenResponse",value:function(e){return Jo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Jo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(So),yu=function(e){g(n,e);var t=x(n);function n(e){return f(this,n),sa(e.startsWith("saml."),"argument-error"),t.call(this,e)}return p(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=vu.fromJSON(e);return sa(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return vu._create(r,n)}catch(i){return null}}}]),n}(cu),mu=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.call(this,"twitter.com")}return p(n,null,[{key:"credential",value:function(e,t){return Zo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(hT){return null}}}]),n}(lu);function gu(e,t){return ku.apply(this,arguments)}function ku(){return(ku=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,"POST","/v1/accounts:signUp",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}mu.TWITTER_SIGN_IN_METHOD="twitter.com",mu.PROVIDER_ID="twitter.com";var wu=function(){function e(t){f(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return p(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ee(Ce().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,to._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=_u(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ee(Ce().mark((function t(n,r,i){var a;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=_u(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function _u(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function bu(){return bu=Ee(Ce().mark((function e(t){var n,r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bo(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new wu({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,gu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,wu._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),bu.apply(this,arguments)}var xu=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o,u;return f(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(y(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return p(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Y);function Iu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw xu._fromErrorAndOperation(e,n,t,r);throw n}))}function Tu(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Eu(e,t){return Su.apply(this,arguments)}function Su(){return Su=Ee(Ce().mark((function e(t,n){var r,i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=be(t),e.next=3,Au(!0,r,n);case 3:return e.t0=Da,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Tu(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Su.apply(this,arguments)}function Cu(e,t){return Nu.apply(this,arguments)}function Nu(){return Nu=Ee(Ce().mark((function e(t,n){var r,i,a=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ja,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",wu._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Nu.apply(this,arguments)}function Au(e,t,n){return Pu.apply(this,arguments)}function Pu(){return(Pu=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ga(n);case 2:i=Tu(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",sa(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ru(e,t){return Du.apply(this,arguments)}function Du(){return Du=Ee(Ce().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ja(t,Iu(i,a,n,t),r);case 6:return sa((o=e.sent).idToken,i,"internal-error"),sa(u=qa(o.idToken),i,"internal-error"),s=u.sub,sa(t.uid===s,i,"user-mismatch"),e.abrupt("return",wu._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&ra(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Du.apply(this,arguments)}function Ou(e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=Ee(Ce().mark((function e(t,n){var r,i,a,o,u=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Iu(t,i,n);case 4:return a=e.sent,e.next=7,wu._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(e,t){return Fu.apply(this,arguments)}function Fu(){return(Fu=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ou(bo(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uu(e,t){return Vu.apply(this,arguments)}function Vu(){return(Vu=Ee(Ce().mark((function e(t,n){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=be(t),e.next=3,Au(!1,r,n.providerId);case 3:return e.abrupt("return",Cu(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qu(e,t){return ju.apply(this,arguments)}function ju(){return(ju=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(be(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e,t){return zu.apply(this,arguments)}function zu(){return(zu=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,"POST","/v1/accounts:signInWithCustomToken",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(){return(Wu=Ee(Ce().mark((function e(t,n){var r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bo(t),e.next=3,Bu(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,wu._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ku=function(){function e(t,n){f(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return p(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Gu._fromServerResponse(e,t):ra(e,"internal-error")}}]),e}(),Gu=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return p(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ku);function Hu(e,t,n){var r;sa((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),sa("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(sa(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(sa(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Qu(){return(Qu=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=be(t),a={requestType:"PASSWORD_RESET",email:n},r&&Hu(i,a,r),e.next=5,qo(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yu(){return(Yu=Ee(Ce().mark((function e(t,n,r){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Co(be(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $u(){return($u=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ro(be(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ju(e,t){return Xu.apply(this,arguments)}function Xu(){return(Xu=Ee(Ce().mark((function e(t,n){var r,i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=be(t),e.next=3,Co(r,{oobCode:n});case 3:i=e.sent,sa(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return sa(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:sa(i.mfaInfo,r,"internal-error");case 13:sa(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ku._fromServerResponse(bo(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zu(){return(Zu=Ee(Ce().mark((function e(t,n){var r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ju(be(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t,n){return ts.apply(this,arguments)}function ts(){return(ts=Ee(Ce().mark((function e(t,n,r){var i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bo(t),e.next=3,gu(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,wu._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(){return(ns=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=be(t),a={requestType:"EMAIL_SIGNIN",email:n},sa(r.handleCodeInApp,i,"argument-error"),r&&Hu(i,a,r),e.next=6,Bo(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(){return(rs=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=be(t),sa((a=su.credentialWithLink(n,r||da()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Mu(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function is(e,t){return as.apply(this,arguments)}function as(){return(as=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:createAuthUri",_a(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function os(){return(os=Ee(Ce().mark((function e(t,n){var r,i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pa()?da():"http://localhost",i={identifier:n,continueUri:r},e.next=4,is(be(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(){return(us=Ee(Ce().mark((function e(t,n){var r,i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=be(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Hu(r.auth,a,n),e.next=8,Uo(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ss(){return(ss=Ee(Ce().mark((function e(t,n,r){var i,a,o,u;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=be(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Hu(i.auth,o,r),e.next=8,Wo(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cs(e,t){return ls.apply(this,arguments)}function ls(){return(ls=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ba(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hs(){return(hs=Ee(Ce().mark((function e(t,n){var r,i,a,o,u,s,c;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=be(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ja(a,cs(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fs(e,t,n){return ds.apply(this,arguments)}function ds(){return(ds=Ee(Ce().mark((function e(t,n,r){var i,a,o,u;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ja(t,Ao(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ps=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),vs=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i)).username=a,o}return p(n)}(ps),ys=function(e){g(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"facebook.com",r)}return p(n)}(ps),ms=function(e){g(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return p(n)}(vs),gs=function(e){g(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"google.com",r)}return p(n)}(ps),ks=function(e){g(n,e);var t=x(n);function n(e,r,i){return f(this,n),t.call(this,e,"twitter.com",r,i)}return p(n)}(vs);function ws(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=qa(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ps(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ys(a,i);case"github.com":return new ms(a,i);case"google.com":return new gs(a,i);case"twitter.com":return new ks(a,i,e.screenName||null);case"custom":case"anonymous":return new ps(a,null);default:return new ps(a,r,i)}}(n)}var _s=function(){function e(t,n){f(this,e),this.type=t,this.credential=n}return p(e,[{key:"toJSON",value:function(){return{multiFactorSession:i({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),bs=function(){function e(t,n,r){f(this,e),this.session=t,this.hints=n,this.signInResolver=r}return p(e,[{key:"resolveSignIn",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=bo(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ku._fromServerResponse(r,e)}));sa(i.mfaPendingCredential,r,"internal-error");var o=_s._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ee(Ce().mark((function e(t){var a,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,wu._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return sa(n.user,r,"internal-error"),e.abrupt("return",wu._forOperation(n.user,n.operationType,u));case 17:ra(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function xs(e,t){return ba(e,"POST","/v2/accounts/mfaEnrollment:start",_a(e,t))}var Is=function(){function e(t){var n=this;f(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ku._fromServerResponse(t.auth,e)})))}))}return p(e,[{key:"getSession",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=_s,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ee(Ce().mark((function e(t,n){var r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ja(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ee(Ce().mark((function e(t){var n,r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,ja(this.user,ba(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",_a(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Ts=new WeakMap;var Es="__sak",Ss=function(){function e(t,n){f(this,e),this.storageRetriever=t,this.type=n}return p(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Es,"1"),this.storage.removeItem(Es),Promise.resolve(!0)):Promise.resolve(!1)}catch(hT){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Cs=function(e){g(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=V();return so(e)||vo(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=go(),e._shouldAllowMigration=!0,e}return p(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);mo()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ee(Ce().mark((function e(t,r){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fi(k(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ee(Ce().mark((function e(t){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fi(k(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fi(k(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ss);Cs.type="LOCAL";var Ns=Cs,As=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return p(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ss);As.type="SESSION";var Ps=As;function Rs(e){return Promise.all(e.map(function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ds=function(){function e(t){f(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return p(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ee(Ce().mark((function e(t){var n,r,i,a,o,u,s,c;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Rs(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Os(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ds.receivers=[];var Ls=function(){function e(t){f(this,e),this.target=t,this.handlers=new Set}return p(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ee(Ce().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Os("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ms(){return window}function Fs(){return"undefined"!==typeof Ms().WorkerGlobalScope&&"function"===typeof Ms().importScripts}function Us(){return Vs.apply(this,arguments)}function Vs(){return(Vs=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function qs(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var js="firebaseLocalStorageDb",Bs="firebaseLocalStorage",zs="fbase_key",Ws=function(){function e(t){f(this,e),this.request=t}return p(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ks(e,t){return e.transaction([Bs],t?"readwrite":"readonly").objectStore(Bs)}function Gs(){var e=indexedDB.deleteDatabase(js);return new Ws(e).toPromise()}function Hs(){var e=indexedDB.open(js,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Bs,{keyPath:zs})}catch(r){n(r)}})),e.addEventListener("success",Ee(Ce().mark((function n(){var r;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Bs)){n.next=12;break}return r.close(),n.next=5,Gs();case 5:return n.t0=t,n.next=8,Hs();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Qs(e,t,n){return Ys.apply(this,arguments)}function Ys(){return Ys=Ee(Ce().mark((function e(t,n,r){var a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ks(t,!0).put((i(a={},zs,n),i(a,"value",r),a)),e.abrupt("return",new Ws(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}function $s(e,t){return Js.apply(this,arguments)}function Js(){return Js=Ee(Ce().mark((function e(t,n){var r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ks(t,!1).get(n),e.next=3,new Ws(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Js.apply(this,arguments)}function Xs(e,t){var n=Ks(e,!0).delete(t);return new Ws(n).toPromise()}var Zs=function(){function e(){f(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return p(e,[{key:"_openDb",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Hs();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ee(Ce().mark((function e(){var t=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ds._getInstance(Fs()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ee(Ce().mark((function e(n,r){var i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ee(Ce().mark((function e(){var t,n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ls(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&qs()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Hs();case 5:return t=e.sent,e.next=8,Qs(t,Es,"1");case 8:return e.next=10,Xs(t,Es);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ee(Ce().mark((function e(t,n){var r=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Qs(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return $s(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ee(Ce().mark((function e(t){var n=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Xs(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ee(Ce().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ks(e,!1).getAll();return new Ws(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=v(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ee(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Zs.type="LOCAL";var ec=Zs;function tc(e,t){return ba(e,"POST","/v2/accounts/mfaSignIn:start",_a(e,t))}function nc(e){return rc.apply(this,arguments)}function rc(){return(rc=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ic(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ia("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ac(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var oc=1e12,uc=function(){function e(t){f(this,e),this.auth=t,this.counter=oc,this._widgets=new Map}return p(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new sc(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||oc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||oc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||oc,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),sc=function(){function e(t,n,r){var i=this;f(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;sa(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return p(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var cc=ac("rcb"),lc=new ya(3e4,6e4),hc="https://www.google.com/recaptcha/api.js?",fc=function(){function e(){f(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ms().grecaptcha}return p(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return sa(dc(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ms().grecaptcha):new Promise((function(r,i){var a=Ms().setTimeout((function(){i(ia(e,"network-request-failed"))}),lc.get());Ms()[cc]=function(){Ms().clearTimeout(a),delete Ms()[cc];var o=Ms().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(ia(e,"internal-error"))},ic("".concat(hc,"?").concat(se({onload:cc,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(ia(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Ms().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function dc(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var pc=function(){function e(){f(this,e)}return p(e,[{key:"load",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new uc(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),vc="recaptcha",yc={theme:"light",type:"image"},mc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},yc),r=arguments.length>2?arguments[2]:void 0;f(this,e),this.parameters=n,this.type=vc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bo(r),this.isInvisible="invisible"===this.parameters.size,sa("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;sa(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pc:new fc,this.validateStartingState()}return p(e,[{key:"verify",value:function(){var e=Ee(Ce().mark((function e(){var t,n,r,i=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){sa(!this.parameters.sitekey,this.auth,"argument-error"),sa(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),sa("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ms()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){sa(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ee(Ce().mark((function e(){var t,n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sa(pa()&&!Fs(),this.auth,"internal-error"),e.next=3,gc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,nc(this.auth);case 8:sa(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return sa(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function gc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var kc=function(){function e(t,n){f(this,e),this.verificationId=t,this.onConfirmation=n}return p(e,[{key:"confirm",value:function(e){var t=ou._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function wc(){return(wc=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bo(t),e.next=3,Ic(i,n,be(r));case 3:return a=e.sent,e.abrupt("return",new kc(a,(function(e){return Mu(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _c(e,t,n){return bc.apply(this,arguments)}function bc(){return(bc=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=be(t),e.next=3,Au(!1,i,"phone");case 3:return e.next=5,Ic(i.auth,n,be(r));case 5:return a=e.sent,e.abrupt("return",new kc(a,(function(e){return Uu(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xc(){return(xc=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=be(t),e.next=3,Ic(i.auth,n,be(r));case 3:return a=e.sent,e.abrupt("return",new kc(a,(function(e){return qu(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ic(e,t,n){return Tc.apply(this,arguments)}function Tc(){return Tc=Ee(Ce().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,sa("string"===typeof a,t,"argument-error"),sa(r.type===vc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return sa("enroll"===u.type,t,"internal-error"),e.next=13,xs(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return sa("signin"===u.type,t,"internal-error"),sa(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,tc(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,eu(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Tc.apply(this,arguments)}function Ec(){return(Ec=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cu(be(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Sc=function(){function e(t){f(this,e),this.providerId=e.PROVIDER_ID,this.auth=bo(t)}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return Ic(this.auth,e,be(t))}}],[{key:"credential",value:function(e,t){return ou._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ou._fromTokenResponse(n,r):null}}]),e}();function Cc(e,t){return t?fa(t):(sa(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Sc.PROVIDER_ID="phone",Sc.PHONE_SIGN_IN_METHOD="phone";var Nc=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,"custom","custom")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return Jo(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Jo(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Jo(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(So);function Ac(e){return Ou(e.auth,new Nc(e),e.bypassAuthState)}function Pc(e){var t=e.auth,n=e.user;return sa(n,t,"internal-error"),Ru(n,new Nc(e),e.bypassAuthState)}function Rc(e){return Dc.apply(this,arguments)}function Dc(){return(Dc=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,sa(r=t.user,n,"internal-error"),e.abrupt("return",Cu(r,new Nc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];f(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return p(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ee(Ce().mark((function t(n,r){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ee(Ce().mark((function e(t){var n,r,i,a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ac;case"linkViaPopup":case"linkViaRedirect":return Rc;case"reauthViaPopup":case"reauthViaRedirect":return Pc;default:ra(this.auth,"internal-error")}}},{key:"resolve",value:function(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Lc=new ya(2e3,1e4);function Mc(e,t,n){return Fc.apply(this,arguments)}function Fc(){return(Fc=Ee(Ce().mark((function e(t,n,r){var i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bo(t),oa(t,n,cu),a=Cc(i,r),o=new jc(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uc(){return(Uc=Ee(Ce().mark((function e(t,n,r){var i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oa((i=be(t)).auth,n,cu),a=Cc(i.auth,r),o=new jc(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vc(e,t,n){return qc.apply(this,arguments)}function qc(){return(qc=Ee(Ce().mark((function e(t,n,r){var i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oa((i=be(t)).auth,n,cu),a=Cc(i.auth,r),o=new jc(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jc=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o){var u;return f(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=y(u),u}return p(n,[{key:"executeNotNull",value:function(){var e=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return sa(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ee(Ce().mark((function e(){var t,n=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return la(1===this.filter.length,"Popup operations only handle one event"),t=Os(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ia(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ia(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ia(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Lc.get())}()}}]),n}(Oc);jc.currentPopupAction=null;var Bc=new Map,zc=function(e){g(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return p(n,[{key:"execute",value:function(){var e=Ee(Ce().mark((function e(){var t,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Bc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Wc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Fi(k(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Bc.set(this.auth._key(),t);case 21:return this.bypassAuthState||Bc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ee(Ce().mark((function e(t){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Fi(k(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Fi(k(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Oc);function Wc(e,t){return Kc.apply(this,arguments)}function Kc(){return(Kc=Ee(Ce().mark((function e(t,n){var r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$c(n),i=Yc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gc(e,t){return Hc.apply(this,arguments)}function Hc(){return(Hc=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yc(t)._set($c(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qc(e,t){Bc.set(e._key(),t)}function Yc(e){return fa(e._redirectPersistence)}function $c(e){return io("pendingRedirect",e.config.apiKey,e.name)}function Jc(e,t,n){return function(e,t,n){return Xc.apply(this,arguments)}(e,t,n)}function Xc(){return(Xc=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bo(t),oa(t,n,cu),a=Cc(i,r),e.next=5,Gc(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zc(e,t,n){return function(e,t,n){return el.apply(this,arguments)}(e,t,n)}function el(){return(el=Ee(Ce().mark((function e(t,n,r){var i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oa((i=be(t)).auth,n,cu),a=Cc(i.auth,r),e.next=5,Gc(a,i.auth);case 5:return e.next=7,ul(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tl(e,t,n){return function(e,t,n){return nl.apply(this,arguments)}(e,t,n)}function nl(){return(nl=Ee(Ce().mark((function e(t,n,r){var i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oa((i=be(t)).auth,n,cu),a=Cc(i.auth,r),e.next=5,Au(!1,i,n.providerId);case 5:return e.next=7,Gc(a,i.auth);case 7:return e.next=9,ul(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rl(e,t){return il.apply(this,arguments)}function il(){return(il=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bo(t)._initializationPromise;case 2:return e.abrupt("return",al(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function al(e,t){return ol.apply(this,arguments)}function ol(){return ol=Ee(Ce().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=bo(t),a=Cc(i,n),o=new zc(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),ol.apply(this,arguments)}function ul(e){return sl.apply(this,arguments)}function sl(){return(sl=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Os("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cl=function(){function e(t){f(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return p(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!hl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ia(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ll(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ll(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ll(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function hl(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function fl(e){return dl.apply(this,arguments)}function dl(){return dl=Ee(Ce().mark((function e(t){var n,r=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",ba(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),dl.apply(this,arguments)}var pl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vl=/^https?/;function yl(){return(yl=Ee(Ce().mark((function e(t){var n,r,i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fl(t);case 4:n=e.sent,r=n.authorizedDomains,i=v(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ml(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ra(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function ml(e){var t=da(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!vl.test(r))return!1;if(pl.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var gl=new ya(3e4,6e4);function kl(){var e=Ms().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ie(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var wl=null;function _l(e){return wl=wl||function(e){return new Promise((function(t,n){var r,i,a;function o(){kl(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){kl(),n(ia(e,"network-request-failed"))},timeout:gl.get()})}if(null===(i=null===(r=Ms().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ms().gapi)||void 0===a?void 0:a.load)){var u=ac("iframefcb");return Ms()[u]=function(){gapi.load?o():n(ia(e,"network-request-failed"))},ic("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw wl=null,e}))}(e),wl}var bl=new ya(5e3,15e3),xl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Il=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tl(e){var t=e.config;sa(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ma(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:bt},i=Il.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(se(r).slice(1))}function El(e){return Sl.apply(this,arguments)}function Sl(){return Sl=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_l(t);case 2:return n=e.sent,sa(r=Ms().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Tl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xl,dontclear:!0},(function(e){return new Promise(function(){var n=Ee(Ce().mark((function n(r,i){var a,o,u;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ms().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ia(t,"network-request-failed"),o=Ms().setTimeout((function(){i(a)}),bl.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Sl.apply(this,arguments)}var Cl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nl="_blank",Al="http://localhost",Pl=function(){function e(t){f(this,e),this.window=t,this.associatedEvent=null}return p(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Rl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Cl),{width:r.toString(),height:i.toString(),top:a,left:o}),c=V().toLowerCase();n&&(u=co(c)?Nl:n),uo(c)&&(t=t||Al,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=h(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(yo(c)&&"_self"!==u)return Dl(t||"",u),new Pl(null);var f=window.open(t||"",u,l);sa(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Pl(f)}function Dl(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Ol="__/auth/handler",Ll="emulator/auth/handler";function Ml(e,t,n,r,i,a){sa(e.config.authDomain,e,"auth-domain-config-required"),sa(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:bt,eventId:i};if(t instanceof cu){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ie(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=h(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof lu){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ol);return ma(t,Ll)}(e),"?").concat(se(p).slice(1))}var Fl="webStorageSupport",Ul=function(){function e(){f(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ps,this._completeRedirectFn=al,this._overrideRedirectResult=Qc}return p(e,[{key:"_openPopup",value:function(){var e=Ee(Ce().mark((function e(t,n,r,i){var a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return la(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ml(t,n,r,da(),i),e.abrupt("return",Rl(t,o,Os()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ee(Ce().mark((function e(t,n,r,i){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ml(t,n,r,da(),i),Ms().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(la(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,El(t);case 2:return n=e.sent,r=new cl(t),n.register("authEvent",(function(e){return sa(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Fl,{type:Fl},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),ra(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return go()||so()||vo()}}]),e}(),Vl=Ul,ql=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone")).credential=e,r}return p(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return ba(e,"POST","/v2/accounts/mfaEnrollment:finalize",_a(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return ba(e,"POST","/v2/accounts/mfaSignIn:finalize",_a(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){f(this,e),this.factorId=t}return p(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ca("unexpected MultiFactorSessionType")}}}]),e}()),jl=function(){function e(){f(this,e)}return p(e,null,[{key:"assertion",value:function(e){return ql._fromCredential(e)}}]),e}();jl.FACTOR_ID="phone";var Bl,zl="@firebase/auth",Wl="0.20.1",Kl=function(){function e(t){f(this,e),this.auth=t,this.internalListeners=new Map}return p(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){sa(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Gl(){return window}Bl="Browser",vt(new Ne("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){sa(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),sa(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Bl,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ko(Bl)},i=new _o(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fa);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),vt(new Ne("auth-internal",(function(e){return function(e){return new Kl(e)}(bo(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ct(zl,Wl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Bl)),Ct(zl,Wl,"esm2017");function Hl(e,t,n){return Ql.apply(this,arguments)}function Ql(){return Ql=Ee(Ce().mark((function e(t,n,r){var i,a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gl(),o=a.BuildInfo,la(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,eh(n.sessionId);case 4:return u=e.sent,s={},vo()?s.ibi=o.packageName:ho()?s.apn=o.packageName:ra(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Ml(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Ql.apply(this,arguments)}function Yl(){return(Yl=Ee(Ce().mark((function e(t){var n,r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gl(),r=n.BuildInfo,i={},vo()?i.iosBundleId=r.packageName:ho()?i.androidPackageName=r.packageName:ra(t,"operation-not-supported-in-this-environment"),e.next=5,fl(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $l(e){var t=Gl().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Jl(e,t,n){return Xl.apply(this,arguments)}function Xl(){return Xl=Ee(Ce().mark((function e(t,n,r){var i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gl(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(ia(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ho()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Xl.apply(this,arguments)}function Zl(e){var t,n,r,i,a,o,u,s,c,l,h=Gl();sa("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),sa("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),sa("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),sa("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),sa("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function eh(e){return th.apply(this,arguments)}function th(){return(th=Ee(Ce().mark((function e(t){var n,r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nh(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nh(e){if(la(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var rh=function(e){g(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return p(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Fi(k(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(cl);function ih(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:ch(),postBody:null,tenantId:e.tenantId,error:ia(e,"no-auth-event")}}function ah(e,t){return lh()._set(hh(e),t)}function oh(e){return uh.apply(this,arguments)}function uh(){return(uh=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lh()._get(hh(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,lh()._remove(hh(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sh(e,t){var n,r,i=function(e){var t=fh(e),n=t.link?decodeURIComponent(t.link):void 0,r=fh(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return fh(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=fh(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?ia(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ch(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function lh(){return fa(Ns)}function hh(e){return io("authEvent",e.config.apiKey,e.name)}function fh(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=u(t=n)||xe(t)||c(t)||l();r[0];return ce(r.slice(1).join("?"))}var dh=function(){function e(){f(this,e),this._redirectPersistence=Ps,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=al,this._overrideRedirectResult=Qc}return p(e,[{key:"_initialize",value:function(){var e=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new rh(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){ra(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ee(Ce().mark((function e(t,n,r,i){var a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zl(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Bc.clear(),e.next=10,this._originValidation(t);case 10:return o=ih(t,r,i),e.next=13,ah(t,o);case 13:return e.next=15,Hl(t,o,n);case 15:return u=e.sent,e.next=18,$l(u);case 18:return s=e.sent,e.abrupt("return",Jl(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Yl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Gl(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ee(Ce().mark((function n(){return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,oh(e);case 2:t.onEvent(vh());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Ee(Ce().mark((function n(r){var i,a;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,oh(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=sh(i,r.url)),t.onEvent(a||vh());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Gl().handleOpenURL=function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),ph=dh;function vh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ia("no-auth-event")}}function yh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function mh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return!("file:"!==yh()&&"ionic:"!==yh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function gh(){return W()&&11===(null===document||void 0===document?void 0:document.documentMode)}function kh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/Edge\/\d+/.test(e)}function wh(){try{var e=self.localStorage,t=Os();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return gh()||kh(e)}()||G()}catch(n){return _h()&&G()}return!1}function _h(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function bh(){return("http:"===yh()||"https:"===yh()||B()||mh())&&!(z()||j())&&wh()&&!_h()}function xh(){return mh()&&"undefined"!==typeof document}function Ih(){return Th.apply(this,arguments)}function Th(){return(Th=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xh()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eh={LOCAL:"local",NONE:"none",SESSION:"session"},Sh=sa,Ch="persistence";function Nh(e,t){Sh(Object.values(Eh).includes(t),e,"invalid-persistence-type"),z()?Sh(t!==Eh.SESSION,e,"unsupported-persistence-type"):j()?Sh(t===Eh.NONE,e,"unsupported-persistence-type"):_h()?Sh(t===Eh.NONE||t===Eh.LOCAL&&G(),e,"unsupported-persistence-type"):Sh(t===Eh.NONE||wh(),e,"unsupported-persistence-type")}function Ah(e){return Ph.apply(this,arguments)}function Ph(){return(Ph=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Rh(),r=io(Ch,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Dh=sa,Oh=function(){function e(){f(this,e),this.browserResolver=fa(Vl),this.cordovaResolver=fa(ph),this.underlyingResolver=null,this._redirectPersistence=Ps,this._completeRedirectFn=al,this._overrideRedirectResult=Qc}return p(e,[{key:"_initialize",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ee(Ce().mark((function e(t,n,r,i){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ee(Ce().mark((function e(t,n,r,i){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return xh()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Dh(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ih();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Lh(e){return e.unwrap()}function Mh(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new jh(e,function(e,t){var n,r=be(e),i=t;return sa(t.customData.operationType,r,"argument-error"),sa(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bs._fromError(r,i)}(e,t));else if(r){var i=Fh(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Fh(e){var t=(e instanceof Y?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Y)&&"temporaryProof"in t&&"phoneNumber"in t)return Sc.credentialFromResult(e);var n,r=t.providerId;if(!r||r===zi)return null;switch(r){case Bi:n=du;break;case qi:n=fu;break;case ji:n=pu;break;case Wi:n=mu;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?vu._create(r,u):Zo._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new hu(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Y?n.credentialFromError(e):n.credentialFromResult(e)}function Uh(e,t){return t.catch((function(t){throw t instanceof Y&&Mh(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Fh(t)),additionalUserInfo:ws(e),user:Bh.getOrCreate(r)}}))}function Vh(e,t){return qh.apply(this,arguments)}function qh(){return(qh=Ee(Ce().mark((function e(t,n){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Uh(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jh=function(){function e(t,n){f(this,e),this.resolver=n,this.auth=t.wrapped()}return p(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Uh(Lh(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Bh=function(){function e(t){f(this,e),this._delegate=t,this.multiFactor=function(e){var t=be(e);return Ts.has(t)||Ts.set(t,Is._fromUser(t)),Ts.get(t)}(t)}return p(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uh(this.auth,Uu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vh(this.auth,_c(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uh(this.auth,Vc(this._delegate,t,Oh)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ah(bo(this.auth));case 2:return e.abrupt("return",tl(this._delegate,t,Oh));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uh(this.auth,qu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Vh(this.auth,function(e,t,n){return xc.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Uh(this.auth,function(e,t,n){return Uc.apply(this,arguments)}(this._delegate,e,Oh))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ah(bo(this.auth));case 2:return e.abrupt("return",Zc(this._delegate,t,Oh));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return us.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eu(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return fs(be(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return fs(be(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Ec.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return hs.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ss.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Bh.USER_MAP=new WeakMap;var zh=sa,Wh=function(){function e(t,n){if(f(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;zh(r,"invalid-api-key",{appName:t.name}),zh(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Oh:void 0;this._delegate=n.initialize({options:{persistence:Gh(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Xi),this.linkUnderlyingAuth()}return p(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Bh.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Io(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return $u.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ju(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Yu.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uh(this._delegate,es(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return os.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=uu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zh(bh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,rl(this._delegate,Oh);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Uh(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){bo(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Kh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Kh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ns.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Qu.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Nh(this._delegate,t),e.t0=t,e.next=e.t0===Eh.SESSION?4:e.t0===Eh.LOCAL?6:e.t0===Eh.NONE?11:13;break;case 4:return n=Ps,e.abrupt("break",14);case 6:return e.next=8,fa(ec)._isAvailable();case 8:return r=e.sent,n=r?ec:Ns,e.abrupt("break",14);case 11:return n=ro,e.abrupt("break",14);case 13:return e.abrupt("return",ra("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Uh(this._delegate,function(e){return bu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Uh(this._delegate,Mu(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Uh(this._delegate,function(e,t){return Wu.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Uh(this._delegate,function(e,t,n){return Mu(be(e),su.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Uh(this._delegate,function(e,t,n){return rs.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Vh(this._delegate,function(e,t,n){return wc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zh(bh(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Uh(this._delegate,Mc(this._delegate,t,Oh)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zh(bh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ah(this._delegate);case 3:return e.abrupt("return",Jc(this._delegate,t,Oh));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Zu.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Kh(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Bh.getOrCreate(e))},error:t,complete:n}}function Gh(e,t){var n=function(e,t){var n=Rh();if(!n)return[];var r=io(Ch,e,t);switch(n.getItem(r)){case Eh.NONE:return[ro];case Eh.LOCAL:return[ec,Ps];case Eh.SESSION:return[Ps];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ec)||n.push(ec),"undefined"!==typeof window)for(var r=0,i=[Ns,Ps];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(ro)||n.push(ro),n}Wh.Persistence=Eh;var Hh=function(){function e(){f(this,e),this.providerId="phone",this._delegate=new Sc(Lh(Xt.auth()))}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Sc.credential(e,t)}}]),e}();Hh.PHONE_SIGN_IN_METHOD=Sc.PHONE_SIGN_IN_METHOD,Hh.PROVIDER_ID=Sc.PROVIDER_ID;var Qh,Yh=sa,$h=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xt.app();f(this,e),Yh(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new mc(t,n,i.auth()),this.type=this._delegate.type}return p(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Qh=Xt).INTERNAL.registerComponent(new Ne("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Wh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ki,PASSWORD_RESET:Gi,RECOVER_EMAIL:Hi,REVERT_SECOND_FACTOR_ADDITION:Qi,VERIFY_AND_CHANGE_EMAIL:Yi,VERIFY_EMAIL:$i}},EmailAuthProvider:su,FacebookAuthProvider:fu,GithubAuthProvider:pu,GoogleAuthProvider:du,OAuthProvider:hu,SAMLAuthProvider:yu,PhoneAuthProvider:Hh,PhoneMultiFactorGenerator:jl,RecaptchaVerifier:$h,TwitterAuthProvider:mu,Auth:Wh,AuthCredential:So,Error:Y}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Qh.registerVersion("@firebase/auth-compat","0.2.14");var Jh,Xh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Zh={},ef=ef||{},tf=Xh||self;function nf(){}function rf(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function af(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var of="closure_uid_"+(1e9*Math.random()>>>0),uf=0;function sf(e,t,n){return e.call.apply(e.bind,arguments)}function cf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function lf(e,t,n){return(lf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sf:cf).apply(null,arguments)}function hf(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ff(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function df(){this.s=this.s,this.o=this.o}var pf={};df.prototype.s=!1,df.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,of)&&e[of]||(e[of]=++uf)}(this);delete pf[e]}},df.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},yf=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function mf(e){return Array.prototype.concat.apply([],arguments)}function gf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function kf(e){return/^[\s\xa0]*$/.test(e)}var wf,_f=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function bf(e,t){return-1!=e.indexOf(t)}function xf(e,t){return e<t?-1:e>t?1:0}e:{var If=tf.navigator;if(If){var Tf=If.userAgent;if(Tf){wf=Tf;break e}}wf=""}function Ef(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Sf(e){var t={};for(var n in e)t[n]=e[n];return t}var Cf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Cf.length;a++)n=Cf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Af(e){return Af[" "](e),e}Af[" "]=nf;var Pf,Rf=bf(wf,"Opera"),Df=bf(wf,"Trident")||bf(wf,"MSIE"),Of=bf(wf,"Edge"),Lf=Of||Df,Mf=bf(wf,"Gecko")&&!(bf(wf.toLowerCase(),"webkit")&&!bf(wf,"Edge"))&&!(bf(wf,"Trident")||bf(wf,"MSIE"))&&!bf(wf,"Edge"),Ff=bf(wf.toLowerCase(),"webkit")&&!bf(wf,"Edge");function Uf(){var e=tf.document;return e?e.documentMode:void 0}e:{var Vf="",qf=function(){var e=wf;return Mf?/rv:([^\);]+)(\)|;)/.exec(e):Of?/Edge\/([\d\.]+)/.exec(e):Df?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ff?/WebKit\/(\S+)/.exec(e):Rf?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(qf&&(Vf=qf?qf[1]:""),Df){var jf=Uf();if(null!=jf&&jf>parseFloat(Vf)){Pf=String(jf);break e}}Pf=Vf}var Bf,zf={};function Wf(){return function(e){var t=zf;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=_f(String(Pf)).split("."),n=_f("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=xf(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||xf(0==a[2].length,0==o[2].length)||xf(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(tf.document&&Df){var Kf=Uf();Bf=Kf||(parseInt(Pf,10)||void 0)}else Bf=void 0;var Gf=Bf,Hf=function(){if(!tf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{tf.addEventListener("test",nf,t),tf.removeEventListener("test",nf,t)}catch(n){}return e}();function Qf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Yf(e,t){if(Qf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Mf){e:{try{Af(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:$f[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Yf.Z.h.call(this)}}Qf.prototype.h=function(){this.defaultPrevented=!0},ff(Yf,Qf);var $f={2:"touch",3:"pen",4:"mouse"};Yf.prototype.h=function(){Yf.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Jf="closure_listenable_"+(1e6*Math.random()|0),Xf=0;function Zf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Xf,this.ca=this.fa=!1}function ed(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function td(e){this.src=e,this.g={},this.h=0}function nd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=vf(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ed(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function rd(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}td.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=rd(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Zf(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var id="closure_lm_"+(1e6*Math.random()|0),ad={};function od(e,t,n,r,i){if(r&&r.once)return sd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)od(e,t[a],n,r,i);return null}return n=vd(n),e&&e[Jf]?e.N(t,n,af(r)?!!r.capture:!!r,i):ud(e,t,n,!1,r,i)}function ud(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=af(i)?!!i.capture:!!i,u=dd(e);if(u||(e[id]=u=new td(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=fd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Hf||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function sd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)sd(e,t[a],n,r,i);return null}return n=vd(n),e&&e[Jf]?e.O(t,n,af(r)?!!r.capture:!!r,i):ud(e,t,n,!0,r,i)}function cd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)cd(e,t[a],n,r,i);else r=af(r)?!!r.capture:!!r,n=vd(n),e&&e[Jf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=rd(a=e.g[t],n,r,i))&&(ed(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=dd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=rd(t,n,r,i)),(n=-1<e?t[e]:null)&&ld(n))}function ld(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Jf])nd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=dd(t))?(nd(n,e),0==n.h&&(n.src=null,t[id]=null)):ed(e)}}}function hd(e){return e in ad?ad[e]:ad[e]="on"+e}function fd(e,t){if(e.ca)e=!0;else{t=new Yf(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ld(e),e=n.call(r,t)}return e}function dd(e){return(e=e[id])instanceof td?e:null}var pd="__closure_events_fn_"+(1e9*Math.random()>>>0);function vd(e){return"function"===typeof e?e:(e[pd]||(e[pd]=function(t){return e.handleEvent(t)}),e[pd])}function yd(){df.call(this),this.i=new td(this),this.P=this,this.I=null}function md(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Qf(t,e);else if(t instanceof Qf)t.target=t.target||e;else{var i=t;Nf(t=new Qf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=gd(o,r,!0,t)&&i}if(i=gd(o=t.g=e,r,!0,t)&&i,i=gd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=gd(o=t.g=n[a],r,!1,t)&&i}function gd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&nd(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ff(yd,df),yd.prototype[Jf]=!0,yd.prototype.removeEventListener=function(e,t,n,r){cd(this,e,t,n,r)},yd.prototype.M=function(){if(yd.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ed(n[r]);delete t.g[e],t.h--}}this.I=null},yd.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},yd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var kd=tf.JSON.stringify;function wd(){var e=Cd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _d,bd=function(){function e(){f(this,e),this.h=this.g=null}return p(e,[{key:"add",value:function(e,t){var n=xd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),xd=new(function(){function e(t,n){f(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return p(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Id}),(function(e){return e.reset()})),Id=function(){function e(){f(this,e),this.next=this.g=this.h=null}return p(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Td(e){tf.setTimeout((function(){throw e}),0)}function Ed(e,t){_d||function(){var e=tf.Promise.resolve(void 0);_d=function(){e.then(Nd)}}(),Sd||(_d(),Sd=!0),Cd.add(e,t)}var Sd=!1,Cd=new bd;function Nd(){for(var e;e=wd();){try{e.h.call(e.g)}catch(n){Td(n)}var t=xd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Sd=!1}function Ad(e,t){yd.call(this),this.h=e||1,this.g=t||tf,this.j=lf(this.kb,this),this.l=Date.now()}function Pd(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Rd(e,t,n){if("function"===typeof e)n&&(e=lf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=lf(e.handleEvent,e)}return 2147483647<Number(t)?-1:tf.setTimeout(e,t||0)}function Dd(e){e.g=Rd((function(){e.g=null,e.i&&(e.i=!1,Dd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ff(Ad,yd),(Jh=Ad.prototype).da=!1,Jh.S=null,Jh.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),md(this,"tick"),this.da&&(Pd(this),this.start()))}},Jh.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Jh.M=function(){Ad.Z.M.call(this),Pd(this),delete this.g};var Od=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return p(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Dd(this)}},{key:"M",value:function(){Fi(k(n.prototype),"M",this).call(this),this.g&&(tf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(df);function Ld(e){df.call(this),this.h=e,this.g={}}ff(Ld,df);var Md=[];function Fd(e,t,n,r){Array.isArray(n)||(n&&(Md[0]=n.toString()),n=Md);for(var i=0;i<n.length;i++){var a=od(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ud(e){Ef(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ld(e)}),e),e.g={}}function Vd(){this.g=!0}function qd(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return kd(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ld.prototype.M=function(){Ld.Z.M.call(this),Ud(this)},Ld.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vd.prototype.Aa=function(){this.g=!1},Vd.prototype.info=function(){};var jd={},Bd=null;function zd(){return Bd=Bd||new yd}function Wd(e){Qf.call(this,jd.Ma,e)}function Kd(e){var t=zd();md(t,new Wd(t,e))}function Gd(e,t){Qf.call(this,jd.STAT_EVENT,e),this.stat=t}function Hd(e){var t=zd();md(t,new Gd(t,e))}function Qd(e,t){Qf.call(this,jd.Na,e),this.size=t}function Yd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return tf.setTimeout((function(){e()}),t)}jd.Ma="serverreachability",ff(Wd,Qf),jd.STAT_EVENT="statevent",ff(Gd,Qf),jd.Na="timingevent",ff(Qd,Qf);var $d={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Jd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Xd(){}function Zd(e){return e.h||(e.h=e.i())}function ep(){}Xd.prototype.h=null;var tp,np={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rp(){Qf.call(this,"d")}function ip(){Qf.call(this,"c")}function ap(){}function op(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ld(this),this.P=sp,e=Lf?125:void 0,this.W=new Ad(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new up}function up(){this.i=null,this.g="",this.h=!1}ff(rp,Qf),ff(ip,Qf),ff(ap,Xd),ap.prototype.g=function(){return new XMLHttpRequest},ap.prototype.i=function(){return{}},tp=new ap;var sp=45e3,cp={},lp={};function hp(e,t,n){e.K=1,e.v=Op(Cp(t)),e.s=n,e.U=!0,fp(e,null)}function fp(e,t){e.F=Date.now(),yp(e),e.A=Cp(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Hp(n.h,"t",r),e.C=0,n=e.l.H,e.h=new up,e.g=Yv(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Od(lf(e.Ia,e,e.g),e.O)),Fd(e.V,e.g,"readystatechange",e.gb),t=e.H?Sf(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Kd(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function dp(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function pp(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=vp(e,n))==lp){4==t&&(e.o=4,Hd(14),i=!1),qd(e.j,e.m,null,"[Incomplete Response]");break}if(r==cp){e.o=4,Hd(15),qd(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}qd(e.j,e.m,r,null),_p(e,r)}dp(e)&&r!=lp&&r!=cp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Hd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),jv(t),t.L=!0,Hd(11))):(qd(e.j,e.m,n,"[Invalid Chunked Response]"),wp(e),kp(e))}function vp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?lp:(n=Number(t.substring(n,r)),isNaN(n)?cp:(r+=1)+n>t.length?lp:(t=t.substr(r,n),e.C=r+n,t))}function yp(e){e.Y=Date.now()+e.P,mp(e,e.P)}function mp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Yd(lf(e.eb,e),t)}function gp(e){e.B&&(tf.clearTimeout(e.B),e.B=null)}function kp(e){0==e.l.G||e.I||Wv(e.l,e)}function wp(e){gp(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Pd(e.W),Ud(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function _p(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||tv(n.i,e)))if(n.I=e.N,!e.J&&tv(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;zv(n),Rv(n)}qv(n),Hd(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Yd(lf(n.ab,n),6e3));if(1>=ev(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Gv(n,11)}else if((e.J||n.g==e)&&zv(n),!kf(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(bf(l,"spdy")||bf(l,"quic")||bf(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(nv(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Dp(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Qv(r,r.H?r.la:null,r.W),d.J){rv(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(gp(p),yp(p)),r.g=d}else Vv(r);0<n.l.length&&Lv(n)}else"stop"!=a[0]&&"close"!=a[0]||Gv(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Gv(n,7):Pv(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Kd(4)}catch(a){}}function bp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(rf(e)||"string"===typeof e)yf(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(rf(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(rf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function xp(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof xp)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ip(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Tp(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Tp(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Tp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Jh=op.prototype).setTimeout=function(e){this.P=e},Jh.gb=function(e){e=e.target;var t=this.L;t&&3==Ev(e)?t.l():this.Ia(e)},Jh.Ia=function(e){try{if(e==this.g)e:{var t=Ev(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Lf||this.g&&(this.h.h||this.g.ga()||Sv(this.g)))){this.I||4!=t||7==n||Kd(8==n||0>=r?3:2),gp(this);var i=this.g.ba();this.N=i;t:if(dp(this)){var a=Sv(this.g);e="";var o=a.length,u=4==Ev(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){wp(this),kp(this);var s="";break t}this.h.i=new tf.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kf(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Hd(12),wp(this),kp(this);break e}qd(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_p(this,i)}this.U?(pp(this,t,s),Lf&&this.i&&3==t&&(Fd(this.V,this.W,"tick",this.fb),this.W.start())):(qd(this.j,this.m,s,null),_p(this,s)),4==t&&wp(this),this.i&&!this.I&&(4==t?Wv(this.l,this):(this.i=!1,yp(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Hd(12)):(this.o=0,Hd(13)),wp(this),kp(this)}}}catch(t){}},Jh.fb=function(){if(this.g){var e=Ev(this.g),t=this.g.ga();this.C<t.length&&(gp(this),pp(this,e,t),this.i&&4!=e&&yp(this))}},Jh.cancel=function(){this.I=!0,wp(this)},Jh.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Kd(3),Hd(17)),wp(this),this.o=2,kp(this)):mp(this,this.Y-e)},(Jh=xp.prototype).R=function(){Ip(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Jh.T=function(){return Ip(this),this.g.concat()},Jh.get=function(e,t){return Tp(this.h,e)?this.h[e]:t},Jh.set=function(e,t){Tp(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Jh.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Ep=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Sp(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Sp){this.g=void 0!==t?t:e.g,Np(this,e.j),this.s=e.s,Ap(this,e.i),Pp(this,e.m),this.l=e.l,t=e.h;var n=new zp;n.i=t.i,t.g&&(n.g=new xp(t.g),n.h=t.h),Rp(this,n),this.o=e.o}else e&&(n=String(e).match(Ep))?(this.g=!!t,Np(this,n[1]||"",!0),this.s=Lp(n[2]||""),Ap(this,n[3]||"",!0),Pp(this,n[4]),this.l=Lp(n[5]||"",!0),Rp(this,n[6]||"",!0),this.o=Lp(n[7]||"")):(this.g=!!t,this.h=new zp(null,this.g))}function Cp(e){return new Sp(e)}function Np(e,t,n){e.j=n?Lp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ap(e,t,n){e.i=n?Lp(t,!0):t}function Pp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Rp(e,t,n){t instanceof zp?(e.h=t,function(e,t){t&&!e.j&&(Wp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Kp(this,t),Hp(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Mp(t,jp)),e.h=new zp(t,e.g))}function Dp(e,t,n){e.h.set(t,n)}function Op(e){return Dp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Lp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Mp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Fp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Sp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Mp(t,Up,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Mp(t,Up,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Mp(n,"/"==n.charAt(0)?qp:Vp,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Mp(n,Bp)),e.join("")};var Up=/[#\/\?@]/g,Vp=/[#\?:]/g,qp=/[#\?]/g,jp=/[#\?@]/g,Bp=/#/g;function zp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Wp(e){e.g||(e.g=new xp,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Kp(e,t){Wp(e),t=Qp(e,t),Tp(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Tp((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ip(e)))}function Gp(e,t){return Wp(e),t=Qp(e,t),Tp(e.g.h,t)}function Hp(e,t,n){Kp(e,t),0<n.length&&(e.i=null,e.g.set(Qp(e,t),gf(n)),e.h+=n.length)}function Qp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Jh=zp.prototype).add=function(e,t){Wp(this),this.i=null,e=Qp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Jh.forEach=function(e,t){Wp(this),this.g.forEach((function(n,r){yf(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Jh.T=function(){Wp(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Jh.R=function(e){Wp(this);var t=[];if("string"===typeof e)Gp(this,e)&&(t=mf(t,this.g.get(Qp(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=mf(t,e[n])}return t},Jh.set=function(e,t){return Wp(this),this.i=null,Gp(this,e=Qp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Jh.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Jh.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Yp=p((function e(t,n){f(this,e),this.h=t,this.g=n}));function $p(e){this.l=e||Xp,tf.PerformanceNavigationTiming?e=0<(e=tf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(tf.g&&tf.g.Ea&&tf.g.Ea()&&tf.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Jp,Xp=10;function Zp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ev(e){return e.h?1:e.g?e.g.size:0}function tv(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function nv(e,t){e.g?e.g.add(t):e.h=t}function rv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function iv(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=v(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return gf(e.i)}function av(){}function ov(){this.g=new av}function uv(e,t,n){var r=n||"";try{bp(e,(function(e,n){var i=e;af(e)&&(i=kd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function cv(e){this.l=e.$b||null,this.j=e.ib||!1}function lv(e,t){yd.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=hv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$p.prototype.cancel=function(){if(this.i=iv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=v(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},av.prototype.stringify=function(e){return tf.JSON.stringify(e,void 0)},av.prototype.parse=function(e){return tf.JSON.parse(e,void 0)},ff(cv,Xd),cv.prototype.g=function(){return new lv(this.l,this.j)},cv.prototype.i=(Jp={},function(){return Jp}),ff(lv,yd);var hv=0;function fv(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function dv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,pv(e)}function pv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Jh=lv.prototype).open=function(e,t){if(this.readyState!=hv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,pv(this)},Jh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||tf).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Jh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dv(this)),this.readyState=hv},Jh.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,pv(this)),this.g&&(this.readyState=3,pv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof tf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fv(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Jh.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?dv(this):pv(this),3==this.readyState&&fv(this)}},Jh.Ua=function(e){this.g&&(this.response=this.responseText=e,dv(this))},Jh.Ta=function(e){this.g&&(this.response=e,dv(this))},Jh.ha=function(){this.g&&dv(this)},Jh.setRequestHeader=function(e,t){this.v.append(e,t)},Jh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Jh.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(lv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var vv=tf.JSON.parse;function yv(e){yd.call(this),this.headers=new xp,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=mv,this.K=this.L=!1}ff(yv,yd);var mv="",gv=/^https?$/i,kv=["POST","PUT"];function wv(e){return"content-type"==e.toLowerCase()}function _v(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,bv(e),Iv(e)}function bv(e){e.D||(e.D=!0,md(e,"complete"),md(e,"error"))}function xv(e){if(e.h&&"undefined"!=typeof ef&&(!e.C[1]||4!=Ev(e)||2!=e.ba()))if(e.v&&4==Ev(e))Rd(e.Fa,0,e);else if(md(e,"readystatechange"),4==Ev(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ep)[1]||null;if(!a&&tf.self&&tf.self.location){var o=tf.self.location.protocol;a=o.substr(0,o.length-1)}i=!gv.test(a?a.toLowerCase():"")}t=i}if(t)md(e,"complete"),md(e,"success");else{e.m=6;try{var u=2<Ev(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",bv(e)}}finally{Iv(e)}}}function Iv(e,t){if(e.g){Tv(e);var n=e.g,r=e.C[0]?nf:null;e.g=null,e.C=null,t||md(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Tv(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(tf.clearTimeout(e.A),e.A=null)}function Ev(e){return e.g?e.g.readyState:0}function Sv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case mv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Cv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Ef(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Dp(e,t,n))}function Nv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Av(e){this.za=0,this.l=[],this.h=new Vd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Nv("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Nv("baseRetryDelayMs",5e3,e),this.$a=Nv("retryDelaySeedMs",1e4,e),this.Ya=Nv("forwardChannelMaxRetries",2,e),this.ra=Nv("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new $p(e&&e.concurrentRequestLimit),this.Ca=new ov,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Pv(e){if(Dv(e),3==e.G){var t=e.V++,n=Cp(e.F);Dp(n,"SID",e.J),Dp(n,"RID",t),Dp(n,"TYPE","terminate"),Fv(e,n),(t=new op(e,e.h,t,void 0)).K=2,t.v=Op(Cp(n)),n=!1,tf.navigator&&tf.navigator.sendBeacon&&(n=tf.navigator.sendBeacon(t.v.toString(),"")),!n&&tf.Image&&((new Image).src=t.v,n=!0),n||(t.g=Yv(t.l,null),t.g.ea(t.v)),t.F=Date.now(),yp(t)}Hv(e)}function Rv(e){e.g&&(jv(e),e.g.cancel(),e.g=null)}function Dv(e){Rv(e),e.u&&(tf.clearTimeout(e.u),e.u=null),zv(e),e.i.cancel(),e.m&&("number"===typeof e.m&&tf.clearTimeout(e.m),e.m=null)}function Ov(e,t){e.l.push(new Yp(e.Za++,t)),3==e.G&&Lv(e)}function Lv(e){Zp(e.i)||e.m||(e.m=!0,Ed(e.Ha,e),e.C=0)}function Mv(e,t){var n;n=t?t.m:e.V++;var r=Cp(e.F);Dp(r,"SID",e.J),Dp(r,"RID",n),Dp(r,"AID",e.U),Fv(e,r),e.o&&e.s&&Cv(r,e.o,e.s),n=new op(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Uv(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),nv(e.i,n),hp(n,r,t)}function Fv(e,t){e.j&&bp({},(function(e,n){Dp(t,n,e)}))}function Uv(e,t,n){n=Math.min(e.l.length,n);var r=e.j?lf(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{uv(l,o,"req"+c+"_")}catch(xy){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Vv(e){e.g||e.u||(e.Y=1,Ed(e.Ga,e),e.A=0)}function qv(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Yd(lf(e.Ga,e),Kv(e,e.A)),e.A++,!0)}function jv(e){null!=e.B&&(tf.clearTimeout(e.B),e.B=null)}function Bv(e){e.g=new op(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Cp(e.oa);Dp(t,"RID","rpc"),Dp(t,"SID",e.J),Dp(t,"CI",e.N?"0":"1"),Dp(t,"AID",e.U),Fv(e,t),Dp(t,"TYPE","xmlhttp"),e.o&&e.s&&Cv(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Op(Cp(t)),n.s=null,n.U=!0,fp(n,e)}function zv(e){null!=e.v&&(tf.clearTimeout(e.v),e.v=null)}function Wv(e,t){var n=null;if(e.g==t){zv(e),jv(e),e.g=null;var r=2}else{if(!tv(e.i,t))return;n=t.D,rv(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;md(r=zd(),new Qd(r,n,t,i)),Lv(e)}else Vv(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ev(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Yd(lf(e.Ha,e,t),Kv(e,e.C)),e.C++,!0))}(e,t)||2==r&&qv(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Gv(e,5);break;case 4:Gv(e,10);break;case 3:Gv(e,6);break;default:Gv(e,2)}}function Kv(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Gv(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=lf(e.jb,e);n||(n=new Sp("//www.google.com/images/cleardot.gif"),tf.location&&"http"==tf.location.protocol||Np(n,"https"),Op(n)),function(e,t){var n=new Vd;if(tf.Image){var r=new Image;r.onload=hf(sv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=hf(sv,n,r,"TestLoadImage: error",!1,t),r.onabort=hf(sv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=hf(sv,n,r,"TestLoadImage: timeout",!1,t),tf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Hd(2);e.G=0,e.j&&e.j.va(t),Hv(e),Dv(e)}function Hv(e){e.G=0,e.I=-1,e.j&&(0==iv(e.i).length&&0==e.l.length||(e.i.i.length=0,gf(e.l),e.l.length=0),e.j.ua())}function Qv(e,t,n){var r=function(e){return e instanceof Sp?Cp(e):new Sp(e,void 0)}(n);if(""!=r.i)t&&Ap(r,t+"."+r.i),Pp(r,r.m);else{var i=tf.location;r=function(e,t,n,r){var i=new Sp(null,void 0);return e&&Np(i,e),t&&Ap(i,t),n&&Pp(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Ef(e.aa,(function(e,t){Dp(r,t,e)})),t=e.D,n=e.sa,t&&n&&Dp(r,t,n),Dp(r,"VER",e.ma),Fv(e,r),r}function Yv(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new yv(new cv({ib:!0})):new yv(e.qa)).L=e.H,t}function $v(){}function Jv(){if(Df&&!(10<=Number(Gf)))throw Error("Environmental error: no available transport.")}function Xv(e,t){yd.call(this),this.g=new Av(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!kf(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!kf(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ty(this)}function Zv(e){rp.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ey(){ip.call(this),this.status=1}function ty(e){this.g=e}(Jh=yv.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():tp.g(),this.C=this.u?Zd(this.u):Zd(tp),this.g.onreadystatechange=lf(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void _v(this,a)}e=n||"";var i=new xp(this.headers);r&&bp(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=wv,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=tf.FormData&&e instanceof tf.FormData,!(0<=vf(kv,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tv(this),0<this.B&&((this.K=function(e){return Df&&Wf()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lf(this.pa,this)):this.A=Rd(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){_v(this,a)}},Jh.pa=function(){"undefined"!=typeof ef&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,md(this,"timeout"),this.abort(8))},Jh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,md(this,"complete"),md(this,"abort"),Iv(this))},Jh.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Iv(this,!0)),yv.Z.M.call(this)},Jh.Fa=function(){this.s||(this.F||this.v||this.l?xv(this):this.cb())},Jh.cb=function(){xv(this)},Jh.ba=function(){try{return 2<Ev(this)?this.g.status:-1}catch(Jp){return-1}},Jh.ga=function(){try{return this.g?this.g.responseText:""}catch(Jp){return""}},Jh.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),vv(t)}},Jh.Da=function(){return this.m},Jh.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Jh=Av.prototype).ma=8,Jh.G=1,Jh.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Jh.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new op(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Nf(n=Sf(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Uv(this,t,r),Dp(i=Cp(this.F),"RID",e),Dp(i,"CVER",22),this.D&&Dp(i,"X-HTTP-Session-Id",this.D),Fv(this,i),this.o&&n&&Cv(i,this.o,n),nv(this.i,t),this.Ra&&Dp(i,"TYPE","init"),this.ja?(Dp(i,"$req",r),Dp(i,"SID","null"),t.$=!0,hp(t,i,null)):hp(t,i,r),this.G=2}}else 3==this.G&&(e?Mv(this,e):0==this.l.length||Zp(this.i)||Mv(this))},Jh.Ga=function(){if(this.u=null,Bv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Yd(lf(this.bb,this),e)}},Jh.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hd(10),Rv(this),Bv(this))},Jh.ab=function(){null!=this.v&&(this.v=null,Rv(this),qv(this),Hd(19))},Jh.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Hd(2)):(this.h.info("Failed to ping google.com"),Hd(1))},(Jh=$v.prototype).xa=function(){},Jh.wa=function(){},Jh.va=function(){},Jh.ua=function(){},Jh.Oa=function(){},Jv.prototype.g=function(e,t){return new Xv(e,t)},ff(Xv,yd),Xv.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ed(lf(e.hb,e,t))),Hd(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Qv(e,null,e.W),Lv(e)},Xv.prototype.close=function(){Pv(this.g)},Xv.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ov(this.g,t)}else this.v?((t={}).__data__=kd(e),Ov(this.g,t)):Ov(this.g,e)},Xv.prototype.M=function(){this.g.j=null,delete this.j,Pv(this.g),delete this.g,Xv.Z.M.call(this)},ff(Zv,rp),ff(ey,ip),ff(ty,$v),ty.prototype.xa=function(){md(this.g,"a")},ty.prototype.wa=function(e){md(this.g,new Zv(e))},ty.prototype.va=function(e){md(this.g,new ey(e))},ty.prototype.ua=function(){md(this.g,"b")},Jv.prototype.createWebChannel=Jv.prototype.g,Xv.prototype.send=Xv.prototype.u,Xv.prototype.open=Xv.prototype.m,Xv.prototype.close=Xv.prototype.close,$d.NO_ERROR=0,$d.TIMEOUT=8,$d.HTTP_ERROR=6,Jd.COMPLETE="complete",ep.EventType=np,np.OPEN="a",np.CLOSE="b",np.ERROR="c",np.MESSAGE="d",yd.prototype.listen=yd.prototype.N,yv.prototype.listenOnce=yv.prototype.O,yv.prototype.getLastError=yv.prototype.La,yv.prototype.getLastErrorCode=yv.prototype.Da,yv.prototype.getStatus=yv.prototype.ba,yv.prototype.getResponseJson=yv.prototype.Qa,yv.prototype.getResponseText=yv.prototype.ga,yv.prototype.send=yv.prototype.ea;var ny=Zh.createWebChannelTransport=function(){return new Jv},ry=Zh.getStatEventTarget=function(){return zd()},iy=Zh.ErrorCode=$d,ay=Zh.EventType=Jd,oy=Zh.Event=jd,uy=Zh.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},sy=Zh.FetchXmlHttpFactory=cv,cy=Zh.WebChannel=ep,ly=Zh.XhrIo=yv,hy="@firebase/firestore",fy=function(){function e(t){f(this,e),this.uid=t}return p(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();fy.UNAUTHENTICATED=new fy(null),fy.GOOGLE_CREDENTIALS=new fy("google-credentials-uid"),fy.FIRST_PARTY=new fy("first-party-uid"),fy.MOCK_USER=new fy("mock-user");var dy="9.8.0",py=new qe("@firebase/firestore");function vy(){return py.logLevel}function yy(e){if(py.logLevel<=De.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ky);py.debug.apply(py,["Firestore (".concat(dy,"): ").concat(e)].concat(Ie(i)))}}function my(e){if(py.logLevel<=De.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ky);py.error.apply(py,["Firestore (".concat(dy,"): ").concat(e)].concat(Ie(i)))}}function gy(e){if(py.logLevel<=De.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ky);py.warn.apply(py,["Firestore (".concat(dy,"): ").concat(e)].concat(Ie(i)))}}function ky(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function wy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(dy,") INTERNAL ASSERTION FAILED: ")+e;throw my(t),new Error(t)}function _y(e,t){e||wy()}function by(e,t){return e}var xy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Iy=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return p(n)}(Y),Ty=p((function e(){var t=this;f(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ey=p((function e(t,n){f(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Sy=function(){function e(){f(this,e)}return p(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fy.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Cy=function(){function e(t){f(this,e),this.token=t,this.changeListener=null}return p(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ny=function(){function e(t){f(this,e),this.t=t,this.currentUser=fy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ty;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ty,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){yy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(yy("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ty)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(yy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(_y("string"==typeof n.accessToken),new Ey(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return _y(null===e||"string"==typeof e),new fy(e)}}]),e}(),Ay=p((function e(t,n,r){f(this,e),this.type="FirstParty",this.user=fy.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Py=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r}return p(e,[{key:"getToken",value:function(){return Promise.resolve(new Ay(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fy.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ry=p((function e(t){f(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Dy=function(){function e(t){f(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&yy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,yy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){yy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):yy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(_y("string"==typeof t.token),e.p=t.token,new Ry(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Oy=function(){function e(t,n){var r=this;f(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return p(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Ly(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Oy.A=-1;var My=function(){function e(){f(this,e)}return p(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Ly(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Fy(e,t){return e<t?-1:e>t?1:0}function Uy(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Vy(e){return e+"\0"}var qy=function(){function e(t,n){if(f(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Iy(xy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Iy(xy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Iy(xy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Iy(xy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return p(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Fy(this.nanoseconds,e.nanoseconds):Fy(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),jy=function(){function e(t){f(this,e),this.timestamp=t}return p(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new qy(0,0))}},{key:"max",value:function(){return new e(new qy(253402300799,999999999))}}]),e}();function By(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zy(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Wy(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ky=function(){function e(t,n,r){f(this,e),void 0===n?n=0:n>t.length&&wy(),void 0===r?r=t.length-n:r>t.length-n&&wy(),this.segments=t,this.offset=n,this.len=r}return p(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Gy=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Iy(xy.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ie(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ky),Hy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qy=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Hy.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Iy(xy.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Iy(xy.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Iy(xy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Iy(xy.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ky),Yy=function(){function e(t){f(this,e),this.fields=t,t.sort(Qy.comparator)}return p(e,[{key:"covers",value:function(e){var t,n=v(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Uy(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var $y=function(e){function t(e){f(this,t),this.binaryString=e}return p(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Fy(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();$y.EMPTY_BYTE_STRING=new $y("");var Jy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xy(e){if(_y(!!e),"string"==typeof e){var t=0,n=Jy.exec(e);if(_y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Zy(e.seconds),nanos:Zy(e.nanos)}}function Zy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function em(e){return"string"==typeof e?$y.fromBase64String(e):$y.fromUint8Array(e)}function tm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nm(e){var t=e.mapValue.fields.__previous_value__;return tm(t)?nm(t):t}function rm(e){var t=Xy(e.mapValue.fields.__local_write_time__.timestampValue);return new qy(t.seconds,t.nanos)}var im=p((function e(t,n,r,i,a,o,u,s){f(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),am=function(){function e(t,n){f(this,e),this.projectId=t,this.database=n||"(default)"}return p(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function om(e){return null==e}function um(e){return 0===e&&1/e==-1/0}function sm(e){return"number"==typeof e&&Number.isInteger(e)&&!um(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var cm=function(){function e(t){f(this,e),this.path=t}return p(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Gy.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Gy.fromString(t))}},{key:"fromName",value:function(t){return new e(Gy.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Gy.emptyPath())}},{key:"comparator",value:function(e,t){return Gy.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Gy(t.slice()))}}]),e}(),lm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hm={nullValue:"NULL_VALUE"};function fm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?tm(e)?4:Em(e)?9007199254740991:10:wy()}function dm(e,t){if(e===t)return!0;var n=fm(e);if(n!==fm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rm(e).isEqual(rm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Xy(e.timestampValue),r=Xy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return em(e.bytesValue).isEqual(em(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Zy(e.geoPointValue.latitude)===Zy(t.geoPointValue.latitude)&&Zy(e.geoPointValue.longitude)===Zy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Zy(e.integerValue)===Zy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Zy(e.doubleValue),r=Zy(t.doubleValue);return n===r?um(n)===um(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Uy(e.arrayValue.values||[],t.arrayValue.values||[],dm);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(By(n)!==By(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!dm(n[i],r[i])))return!1;return!0}(e,t);default:return wy()}}function pm(e,t){return void 0!==(e.values||[]).find((function(e){return dm(e,t)}))}function vm(e,t){if(e===t)return 0;var n=fm(e),r=fm(t);if(n!==r)return Fy(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fy(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Zy(e.integerValue||e.doubleValue),r=Zy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ym(e.timestampValue,t.timestampValue);case 4:return ym(rm(e),rm(t));case 5:return Fy(e.stringValue,t.stringValue);case 6:return function(e,t){var n=em(e),r=em(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Fy(n[i],r[i]);if(0!==a)return a}return Fy(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Fy(Zy(e.latitude),Zy(t.latitude));return 0!==n?n:Fy(Zy(e.longitude),Zy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=vm(n[i],r[i]);if(a)return a}return Fy(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===lm.mapValue&&t===lm.mapValue)return 0;if(e===lm.mapValue)return 1;if(t===lm.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Fy(r[o],a[o]);if(0!==u)return u;var s=vm(n[r[o]],i[a[o]]);if(0!==s)return s}return Fy(r.length,a.length)}(e.mapValue,t.mapValue);default:throw wy()}}function ym(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Fy(e,t);var n=Xy(e),r=Xy(t),i=Fy(n.seconds,r.seconds);return 0!==i?i:Fy(n.nanos,r.nanos)}function mm(e){return gm(e)}function gm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Xy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?em(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,cm.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=v(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=gm(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=v(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(gm(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):wy();var t,n}function km(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function wm(e){return!!e&&"integerValue"in e}function _m(e){return!!e&&"arrayValue"in e}function bm(e){return!!e&&"nullValue"in e}function xm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Im(e){return!!e&&"mapValue"in e}function Tm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return zy(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Tm(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Tm(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Em(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Sm(e){return"nullValue"in e?hm:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?km(am.empty(),cm.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:wy()}function Cm(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?km(am.empty(),cm.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?lm:wy()}function Nm(e,t){var n=vm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Am(e,t){var n=vm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Pm=function(){function e(t){f(this,e),this.value=t}return p(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Im(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tm(t)}},{key:"setAll",value:function(e){var t=this,n=Qy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Tm(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Im(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return dm(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Im(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){zy(t,(function(t,n){return e[t]=n}));var r,i=v(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Tm(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Rm(e){var t=[];return zy(e.fields,(function(e,n){var r=new Qy([e]);if(Im(n)){var i=Rm(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=v(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Yy(t)}var Dm=function(){function e(t,n,r,i,a,o){f(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return p(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Pm.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Pm.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,jy.min(),jy.min(),Pm.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,jy.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,jy.min(),Pm.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,jy.min(),Pm.empty(),2)}}]),e}(),Om=p((function e(t,n,r,i){f(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Lm(e){return e.fields.find((function(e){return 2===e.kind}))}function Mm(e){return e.fields.filter((function(e){return 2!==e.kind}))}Om.UNKNOWN_ID=-1;var Fm=p((function e(t,n){f(this,e),this.fieldPath=t,this.kind=n})),Um=function(){function e(t,n){f(this,e),this.sequenceNumber=t,this.offset=n}return p(e,null,[{key:"empty",value:function(){return new e(0,jm.min())}}]),e}();function Vm(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=jy.fromTimestamp(1e9===r?new qy(n+1,0):new qy(n,r));return new jm(i,cm.empty(),t)}function qm(e){return new jm(e.readTime,e.key,-1)}var jm=function(){function e(t,n,r){f(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return p(e,null,[{key:"min",value:function(){return new e(jy.min(),cm.empty(),-1)}},{key:"max",value:function(){return new e(jy.max(),cm.empty(),-1)}}]),e}();function Bm(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=cm.comparator(e.documentKey,t.documentKey))?n:Fy(e.largestBatchId,t.largestBatchId)}var zm=function(){function e(t,n){f(this,e),this.comparator=t,this.root=n||Km.EMPTY}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Km.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Km.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Wm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Wm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Wm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Wm(this.root,e,this.comparator,!0)}}]),e}(),Wm=function(){function e(t,n,r,i){f(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return p(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Km=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw wy();if(this.right.isRed())throw wy();var e=this.left.check();if(e!==this.right.check())throw wy();return e+(this.isRed()?0:1)}}]),e}();Km.EMPTY=null,Km.RED=!0,Km.BLACK=!1,Km.EMPTY=new(function(){function e(){f(this,e),this.size=0}return p(e,[{key:"key",get:function(){throw wy()}},{key:"value",get:function(){throw wy()}},{key:"color",get:function(){throw wy()}},{key:"left",get:function(){throw wy()}},{key:"right",get:function(){throw wy()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Km(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Gm=function(){function e(t){f(this,e),this.comparator=t,this.data=new zm(this.comparator)}return p(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Hm(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Hm(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Hm=function(){function e(t){f(this,e),this.iter=t}return p(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Qm(e){return e.hasNext()?e.getNext():void 0}var Ym=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;f(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function $m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ym(e,t,n,r,i,a,o)}function Jm(e){var t=by(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+mm(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),om(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return mm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return mm(e)})).join(",")),t.P=n}return t.P}function Xm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!pg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!dm(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yg(e.startAt,t.startAt)&&yg(e.endAt,t.endAt)}function Zm(e){return cm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function eg(e,t){return e.filters.filter((function(e){return e instanceof rg&&e.field.isEqual(t)}))}function tg(e,t,n){var r,i=hm,a=!0,o=v(eg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=hm,c=!0;switch(u.op){case"<":case"<=":s=Sm(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=hm}Nm({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Nm({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function ng(e,t,n){var r,i=lm,a=!0,o=v(eg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=lm,c=!0;switch(u.op){case">=":case">":s=Cm(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=lm}Am({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Am({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var rg=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(vm(t,this.value)):null!==t&&fm(this.value)===fm(t)&&this.v(vm(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wy()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new ig(e,t,r):"array-contains"===t?new sg(e,r):"in"===t?new cg(e,r):"not-in"===t?new lg(e,r):"array-contains-any"===t?new hg(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new ag(e,n):new og(e,n)}}]),n}(function(){return p((function e(){f(this,e)}))}()),ig=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,i)).key=cm.fromName(i.referenceValue),a}return p(n,[{key:"matches",value:function(e){var t=cm.comparator(e.key,this.key);return this.v(t)}}]),n}(rg),ag=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"in",r)).keys=ug("in",r),i}return p(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(rg),og=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"not-in",r)).keys=ug("not-in",r),i}return p(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(rg);function ug(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return cm.fromName(e.referenceValue)}))}var sg=function(e){g(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return _m(t)&&pm(t.arrayValue,this.value)}}]),n}(rg),cg=function(e){g(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"in",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&pm(this.value.arrayValue,t)}}]),n}(rg),lg=function(e){g(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"not-in",r)}return p(n,[{key:"matches",value:function(e){if(pm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!pm(this.value.arrayValue,t)}}]),n}(rg),hg=function(e){g(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains-any",r)}return p(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!_m(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return pm(t.value.arrayValue,e)}))}}]),n}(rg),fg=p((function e(t,n){f(this,e),this.position=t,this.inclusive=n})),dg=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";f(this,e),this.field=t,this.dir=n}));function pg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function vg(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?cm.comparator(cm.fromName(o.referenceValue),n.key):vm(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function yg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!dm(e.position[n],t.position[n]))return!1;return!0}var mg=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function gg(e,t,n,r,i,a,o,u){return new mg(e,t,n,r,i,a,o,u)}function kg(e){return new mg(e)}function wg(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function _g(e){var t,n=v(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function bg(e){return null!==e.collectionGroup}function xg(e){var t=by(e);if(null===t.D){t.D=[];var n=_g(t),r=wg(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new dg(n)),t.D.push(new dg(Qy.keyField(),"asc"));else{var i,a=!1,o=v(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new dg(Qy.keyField(),s))}}}return t.D}function Ig(e){var t=by(e);if(!t.C)if("F"===t.limitType)t.C=$m(t.path,t.collectionGroup,xg(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=v(xg(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new dg(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new fg(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new fg(t.startAt.position,t.startAt.inclusive):null;t.C=$m(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Tg(e,t,n){return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Eg(e,t){return Xm(Ig(e),Ig(t))&&e.limitType===t.limitType}function Sg(e){return"".concat(Jm(Ig(e)),"|lt:").concat(e.limitType)}function Cg(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(mm(t.value));var t})).join(", "),"]")),om(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return mm(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return mm(e)})).join(",")),"Target(".concat(t,")")}(Ig(e)),"; limitType=").concat(e.limitType,")")}function Ng(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cm.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=v(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=v(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=vg(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,xg(e),t))&&!(e.endAt&&!function(e,t,n){var r=vg(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,xg(e),t))}(e,t)}function Ag(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Pg(e){return function(t,n){var r,i=!1,a=v(xg(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Rg(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Rg(e,t,n){var r=e.field.isKeyField()?cm.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vm(r,i):wy()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return wy()}}function Dg(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:um(t)?"-0":t}}function Og(e){return{integerValue:""+e}}function Lg(e,t){return sm(t)?Og(t):Dg(e,t)}var Mg=p((function e(){f(this,e),this._=void 0}));function Fg(e,t,n){return e instanceof qg?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof jg?Bg(e,t):e instanceof zg?Wg(e,t):function(e,t){var n=Vg(e,t),r=Gg(n)+Gg(e.k);return wm(n)&&wm(e.k)?Og(r):Dg(e.M,r)}(e,t)}function Ug(e,t,n){return e instanceof jg?Bg(e,t):e instanceof zg?Wg(e,t):n}function Vg(e,t){return e instanceof Kg?wm(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var qg=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n)}(Mg),jg=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return p(n)}(Mg);function Bg(e,t){var n,r=Hg(t),i=v(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return dm(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var zg=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return p(n)}(Mg);function Wg(e,t){var n,r=Hg(t),i=v(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!dm(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Kg=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).M=e,i.k=r,i}return p(n)}(Mg);function Gg(e){return Zy(e.integerValue||e.doubleValue)}function Hg(e){return _m(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Qg=p((function e(t,n){f(this,e),this.field=t,this.transform=n}));var Yg=p((function e(t,n){f(this,e),this.version=t,this.transformResults=n})),$g=function(){function e(t,n){f(this,e),this.updateTime=t,this.exists=n}return p(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Jg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Xg=p((function e(){f(this,e)}));function Zg(e,t,n){e instanceof ik?function(e,t,n){var r=e.value.clone(),i=uk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ak?function(e,t,n){if(Jg(e.precondition,t)){var r=uk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ok(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ek(e,t,n){e instanceof ik?function(e,t,n){if(Jg(e.precondition,t)){var r=e.value.clone(),i=sk(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(rk(t),r).setHasLocalMutations()}}(e,t,n):e instanceof ak?function(e,t,n){if(Jg(e.precondition,t)){var r=sk(e.fieldTransforms,n,t),i=t.data;i.setAll(ok(e)),i.setAll(r),t.convertToFoundDocument(rk(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Jg(e.precondition,t)&&t.convertToNoDocument(jy.min())}(e,t)}function tk(e,t){var n,r=null,i=v(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Vg(a.transform,o||null);null!=u&&(null==r&&(r=Pm.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function nk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Uy(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof jg&&t instanceof jg||e instanceof zg&&t instanceof zg?Uy(e.elements,t.elements,dm):e instanceof Kg&&t instanceof Kg?dm(e.k,t.k):e instanceof qg&&t instanceof qg}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function rk(e){return e.isFoundDocument()?e.version:jy.min()}var ik=function(e){g(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return f(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return p(n)}(Xg),ak=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return f(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return p(n)}(Xg);function ok(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function uk(e,t,n){var r=new Map;_y(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ug(o,u,n[i]))}return r}function sk(e,t,n){var r,i=new Map,a=v(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Fg(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var ck,lk,hk=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return p(n)}(Xg),fk=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return p(n)}(Xg),dk=p((function e(t){f(this,e),this.count=t}));function pk(e){switch(e){default:return wy();case xy.CANCELLED:case xy.UNKNOWN:case xy.DEADLINE_EXCEEDED:case xy.RESOURCE_EXHAUSTED:case xy.INTERNAL:case xy.UNAVAILABLE:case xy.UNAUTHENTICATED:return!1;case xy.INVALID_ARGUMENT:case xy.NOT_FOUND:case xy.ALREADY_EXISTS:case xy.PERMISSION_DENIED:case xy.FAILED_PRECONDITION:case xy.ABORTED:case xy.OUT_OF_RANGE:case xy.UNIMPLEMENTED:case xy.DATA_LOSS:return!0}}function vk(e){if(void 0===e)return my("GRPC error has no .code"),xy.UNKNOWN;switch(e){case ck.OK:return xy.OK;case ck.CANCELLED:return xy.CANCELLED;case ck.UNKNOWN:return xy.UNKNOWN;case ck.DEADLINE_EXCEEDED:return xy.DEADLINE_EXCEEDED;case ck.RESOURCE_EXHAUSTED:return xy.RESOURCE_EXHAUSTED;case ck.INTERNAL:return xy.INTERNAL;case ck.UNAVAILABLE:return xy.UNAVAILABLE;case ck.UNAUTHENTICATED:return xy.UNAUTHENTICATED;case ck.INVALID_ARGUMENT:return xy.INVALID_ARGUMENT;case ck.NOT_FOUND:return xy.NOT_FOUND;case ck.ALREADY_EXISTS:return xy.ALREADY_EXISTS;case ck.PERMISSION_DENIED:return xy.PERMISSION_DENIED;case ck.FAILED_PRECONDITION:return xy.FAILED_PRECONDITION;case ck.ABORTED:return xy.ABORTED;case ck.OUT_OF_RANGE:return xy.OUT_OF_RANGE;case ck.UNIMPLEMENTED:return xy.UNIMPLEMENTED;case ck.DATA_LOSS:return xy.DATA_LOSS;default:return wy()}}(lk=ck||(ck={}))[lk.OK=0]="OK",lk[lk.CANCELLED=1]="CANCELLED",lk[lk.UNKNOWN=2]="UNKNOWN",lk[lk.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lk[lk.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lk[lk.NOT_FOUND=5]="NOT_FOUND",lk[lk.ALREADY_EXISTS=6]="ALREADY_EXISTS",lk[lk.PERMISSION_DENIED=7]="PERMISSION_DENIED",lk[lk.UNAUTHENTICATED=16]="UNAUTHENTICATED",lk[lk.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lk[lk.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lk[lk.ABORTED=10]="ABORTED",lk[lk.OUT_OF_RANGE=11]="OUT_OF_RANGE",lk[lk.UNIMPLEMENTED=12]="UNIMPLEMENTED",lk[lk.INTERNAL=13]="INTERNAL",lk[lk.UNAVAILABLE=14]="UNAVAILABLE",lk[lk.DATA_LOSS=15]="DATA_LOSS";var yk=function(){function e(t,n){f(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return p(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=v(n);try{for(i.s();!(r=i.n()).done;){var a=h(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){zy(this.inner,(function(t,n){var r,i=v(n);try{for(i.s();!(r=i.n()).done;){var a=h(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Wy(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),mk=new zm(cm.comparator);function gk(){return mk}var kk=new zm(cm.comparator);function wk(){for(var e=kk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function _k(){return new yk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var bk=new zm(cm.comparator),xk=new Gm(cm.comparator);function Ik(){for(var e=xk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Tk=new Gm(Fy);function Ek(){return Tk}var Sk=function(){function e(t,n,r,i,a){f(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return p(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ck.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(jy.min(),r,Ek(),gk(),Ik())}}]),e}(),Ck=function(){function e(t,n,r,i,a){f(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return p(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e($y.EMPTY_BYTE_STRING,n,Ik(),Ik(),Ik())}}]),e}(),Nk=p((function e(t,n,r,i){f(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Ak=p((function e(t,n){f(this,e),this.targetId=t,this.$=n})),Pk=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$y.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Rk=function(){function e(){f(this,e),this.B=0,this.L=Lk(),this.U=$y.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return p(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Ik(),t=Ik(),n=Ik();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:wy()}})),new Ck(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Lk()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Dk=function(){function e(t){f(this,e),this.nt=t,this.st=new Map,this.it=gk(),this.rt=Ok(),this.ot=new Gm(Fy)}return p(e,[{key:"ut",value:function(e){var t,n=v(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=v(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:wy()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Zm(i))if(0===n){var a=new cm(i.path);this.ct(t,a,Dm.newNoDocument(a,jy.min()))}else _y(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Zm(a.target)){var o=new cm(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Dm.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Ik();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Sk(e,n,this.ot,this.it,r);return this.it=gk(),this.rt=Ok(),this.ot=new Gm(Fy),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Rk,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Gm(Fy),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||yy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Rk),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Ok(){return new zm(cm.comparator)}function Lk(){return new zm(cm.comparator)}var Mk={asc:"ASCENDING",desc:"DESCENDING"},Fk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uk=p((function e(t,n){f(this,e),this.databaseId=t,this.N=n}));function Vk(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function qk(e,t){return e.N?t.toBase64():t.toUint8Array()}function jk(e,t){return Vk(e,t.toTimestamp())}function Bk(e){return _y(!!e),jy.fromTimestamp(function(e){var t=Xy(e);return new qy(t.seconds,t.nanos)}(e))}function zk(e,t){return function(e){return new Gy(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Wk(e){var t=Gy.fromString(e);return _y(dw(t)),t}function Kk(e,t){return zk(e.databaseId,t.path)}function Gk(e,t){var n=Wk(t);if(n.get(1)!==e.databaseId.projectId)throw new Iy(xy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Iy(xy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cm($k(n))}function Hk(e,t){return zk(e.databaseId,t)}function Qk(e){var t=Wk(e);return 4===t.length?Gy.emptyPath():$k(t)}function Yk(e){return new Gy(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $k(e){return _y(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jk(e,t,n){return{name:Kk(e,t),fields:n.value.mapValue.fields}}function Xk(e,t,n){var r=Gk(e,t.name),i=Bk(t.updateTime),a=new Pm({mapValue:{fields:t.fields}}),o=Dm.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Zk(e,t){return"found"in t?function(e,t){_y(!!t.found),t.found.name,t.found.updateTime;var n=Gk(e,t.found.name),r=Bk(t.found.updateTime),i=new Pm({mapValue:{fields:t.found.fields}});return Dm.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){_y(!!t.missing),_y(!!t.readTime);var n=Gk(e,t.missing),r=Bk(t.readTime);return Dm.newNoDocument(n,r)}(e,t):wy()}function ew(e,t){var n;if(t instanceof ik)n={update:Jk(e,t.key,t.value)};else if(t instanceof hk)n={delete:Kk(e,t.key)};else if(t instanceof ak)n={update:Jk(e,t.key,t.data),updateMask:fw(t.fieldMask)};else{if(!(t instanceof fk))return wy();n={verify:Kk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof qg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof jg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof zg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Kg)return{fieldPath:t.field.canonicalString(),increment:n.k};throw wy()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:jk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:wy()}(e,t.precondition)),n}function tw(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?$g.updateTime(Bk(e.updateTime)):void 0!==e.exists?$g.exists(e.exists):$g.none()}(t.currentDocument):$g.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)_y("REQUEST_TIME"===t.setToServerValue),n=new qg;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new jg(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new zg(i)}else"increment"in t?n=new Kg(e,t.increment):wy();var a=Qy.fromServerFormat(t.fieldPath);return new Qg(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Gk(e,t.update.name),a=new Pm({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Yy(t.map((function(e){return Qy.fromServerFormat(e)})))}(t.updateMask);return new ak(i,a,o,n,r)}return new ik(i,a,n,r)}if(t.delete){var u=Gk(e,t.delete);return new hk(u,n)}if(t.verify){var s=Gk(e,t.verify);return new fk(s,n)}return wy()}function nw(e,t){return{documents:[Hk(e,t.path)]}}function rw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Hk(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Hk(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(xm(e.value))return{unaryFilter:{field:sw(e.field),op:"IS_NAN"}};if(bm(e.value))return{unaryFilter:{field:sw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xm(e.value))return{unaryFilter:{field:sw(e.field),op:"IS_NOT_NAN"}};if(bm(e.value))return{unaryFilter:{field:sw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sw(e.field),op:uw(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:sw(e.field),direction:ow(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||om(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function iw(e){var t=Qk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_y(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=aw(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new dg(cw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return om(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new fg(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new fg(n,t)}(n.endAt)),gg(t,i,u,o,s,"F",c,l)}function aw(e){return e?void 0!==e.unaryFilter?[hw(e)]:void 0!==e.fieldFilter?[lw(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return aw(e)})).reduce((function(e,t){return e.concat(t)})):wy():[]}function ow(e){return Mk[e]}function uw(e){return Fk[e]}function sw(e){return{fieldPath:e.canonicalString()}}function cw(e){return Qy.fromServerFormat(e.fieldPath)}function lw(e){return rg.create(cw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wy()}}(e.fieldFilter.op),e.fieldFilter.value)}function hw(e){switch(e.unaryFilter.op){case"IS_NAN":var t=cw(e.unaryFilter.field);return rg.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=cw(e.unaryFilter.field);return rg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=cw(e.unaryFilter.field);return rg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=cw(e.unaryFilter.field);return rg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return wy()}}function fw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function dw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function pw(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=yw(t)),t=vw(e.get(n),t);return yw(t)}function vw(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function yw(e){return e+"\x01\x01"}function mw(e){var t=e.length;if(_y(t>=2),2===t)return _y("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Gy.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&wy(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:wy()}a=o+2}return new Gy(r)}var gw=["userId","batchId"];function kw(e,t){return[e,pw(t)]}function ww(e,t,n){return[e,pw(t),n]}var _w={},bw=["prefixPath","collectionGroup","readTime","documentId"],xw=["prefixPath","collectionGroup","documentId"],Iw=["collectionGroup","readTime","prefixPath","documentId"],Tw=["canonicalId","targetId"],Ew=["targetId","path"],Sw=["path","targetId"],Cw=["collectionId","parent"],Nw=["indexId","uid"],Aw=["uid","sequenceNumber"],Pw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Rw=["indexId","uid","orderedDocumentKey"],Dw=["userId","collectionPath","documentId"],Ow=["userId","collectionPath","largestBatchId"],Lw=["userId","collectionGroup","largestBatchId"],Mw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Fw=[].concat(Ie(Mw),["documentOverlays"]),Uw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vw=[].concat(Uw,["indexConfiguration","indexState","indexEntries"]),qw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jw=function(){function e(){f(this,e),this.onCommittedListeners=[]}return p(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Bw=function(){function e(t){var n=this;f(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return p(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&wy(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=v(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),zw=function(){function e(t,n){var r=this;f(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Ty,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Gw(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Jw(e.target.error);r.At.reject(new Gw(t,n))}}return p(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(yy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Qw(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Gw(n,t)}}}]),e}(),Ww=function(){function e(t,n,r){f(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(V())&&my("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return p(e,[{key:"Nt",value:function(){var e=Ee(Ce().mark((function e(t){var n=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return yy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Gw(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Iy(xy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Iy(xy.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Gw(t,n))},i.onupgradeneeded=function(e){yy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){yy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ee(Ce().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Ce().mark((function e(){var n,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=zw.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Bw.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,yy("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return yy("SimpleDb","Removing database:",e),Yw(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!G())return!1;if(e.St())return!0;var t=V(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/xoxo-game-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Kw=function(){function e(t){f(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return p(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Yw(this.Ft.delete())}}]),e}(),Gw=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,xy.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return p(n)}(Iy);function Hw(e){return"IndexedDbTransactionError"===e.name}var Qw=function(){function e(t){f(this,e),this.store=t}return p(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(yy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(yy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Yw(n)}},{key:"add",value:function(e){return yy("SimpleDb","ADD",this.store.name,e,e),Yw(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Yw(this.store.get(e)).next((function(n){return void 0===n&&(n=null),yy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return yy("SimpleDb","DELETE",this.store.name,e),Yw(this.store.delete(e))}},{key:"count",value:function(){return yy("SimpleDb","COUNT",this.store.name),Yw(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Bw((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Bw((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){yy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Bw((function(n,r){t.onerror=function(e){var t=Jw(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Bw((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Kw(i),o=t(i.primaryKey,i.value,a);if(o instanceof Bw){var u=o.catch((function(e){return a.done(),Bw.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Bw.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Yw(e){return new Bw((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Jw(e.target.error);n(t)}}))}var $w=!1;function Jw(e){var t=Ww.Vt(V());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Iy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return $w||($w=!0,setTimeout((function(){throw r}),0)),r}}return e}var Xw=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return p(n)}(jw);function Zw(e,t){var n=by(e);return Ww.xt(n.Ht,t)}var e_=function(){function e(t,n,r,i){f(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return p(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Zg(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=v(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&ek(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=v(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&ek(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(jy.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ik())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Uy(this.mutations,e.mutations,(function(e,t){return nk(e,t)}))&&Uy(this.baseMutations,e.baseMutations,(function(e,t){return nk(e,t)}))}}]),e}(),t_=function(){function e(t,n,r,i){f(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return p(e,null,[{key:"from",value:function(t,n,r){_y(t.mutations.length===r.length);for(var i=bk,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),n_=function(){function e(t,n){f(this,e),this.largestBatchId=t,this.mutation=n}return p(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),r_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jy.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:jy.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$y.EMPTY_BYTE_STRING;f(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return p(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),i_=p((function e(t){f(this,e),this.Jt=t}));function a_(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:o_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Kk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Vk(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:u_(t.version)};else{if(!t.isUnknownDocument())return wy();r.unknownDocument={path:n.path.toArray(),version:u_(t.version)}}return r}function o_(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function u_(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function s_(e){var t=new qy(e.seconds,e.nanoseconds);return jy.fromTimestamp(t)}function c_(e,t){for(var n=(t.baseMutations||[]).map((function(t){return tw(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return tw(e.Jt,t)})),u=qy.fromMillis(t.localWriteTimeMs);return new e_(t.batchId,u,n,o)}function l_(e){var t,n,r=s_(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?s_(e.lastLimboFreeSnapshotVersion):jy.min();return void 0!==e.query.documents?(_y(1===(n=e.query).documents.length),t=Ig(kg(Qk(n.documents[0])))):t=function(e){return Ig(iw(e))}(e.query),new r_(t,e.targetId,0,e.lastListenSequenceNumber,r,i,$y.fromBase64String(e.resumeToken))}function h_(e,t){var n,r=u_(t.snapshotVersion),i=u_(t.lastLimboFreeSnapshotVersion);n=Zm(t.target)?nw(e.Jt,t.target):rw(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Jm(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function f_(e){var t=iw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Tg(t,t.limit,"L"):t}function d_(e,t){return new n_(t.largestBatchId,tw(e.Jt,t.overlayMutation))}function p_(e,t){var n=t.path.lastSegment();return[e,pw(t.path.popLast()),n]}var v_=function(){function e(){f(this,e)}return p(e,[{key:"getBundleMetadata",value:function(e,t){return y_(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:s_(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return y_(e).put({bundleId:(n=t).id,createTime:u_(Bk(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return m_(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:f_(t.bundledQuery),readTime:s_(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return m_(e).put(function(e){return{name:e.name,readTime:u_(Bk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function y_(e){return Zw(e,"bundles")}function m_(e){return Zw(e,"namedQueries")}var g_=function(){function e(t,n){f(this,e),this.M=t,this.userId=n}return p(e,[{key:"getOverlay",value:function(e,t){var n=this;return k_(e).get(p_(this.userId,t)).next((function(e){return e?d_(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new n_(t,a);i.push(r.Xt(e,o))})),Bw.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(pw(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(k_(e).Qt("collectionPathOverlayIndex",i))})),Bw.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=_k(),a=pw(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return k_(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=d_(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=_k(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return k_(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=d_(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return k_(e).put(function(e,t,n){var r=h(p_(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ew(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function k_(e){return Zw(e,"documentOverlays")}var w_=function(){function e(){f(this,e)}return p(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Zy(e.integerValue));else if("doubleValue"in e){var n=Zy(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),um(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(em(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Em(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):wy()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=v(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),cm.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function __(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function b_(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=__(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}w_.fe=new w_;var x_=function(){function e(){f(this,e),this.buffer=new Uint8Array(1024),this.position=0}return p(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=b_(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=b_(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),I_=function(){function e(t){f(this,e),this.De=t}return p(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),T_=function(){function e(t){f(this,e),this.De=t}return p(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),E_=function(){function e(){f(this,e),this.De=new x_,this.Ce=new I_(this.De),this.xe=new T_(this.De)}return p(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),S_=function(){function e(t,n,r,i){f(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return p(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function C_(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=N_(e.arrayValue,t.arrayValue))?n:0!==(n=N_(e.directionalValue,t.directionalValue))?n:cm.comparator(e.documentKey,t.documentKey)}function N_(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var A_=function(){function e(t){f(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=v(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return p(e,[{key:"$e",value:function(e){var t=Lm(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Mm(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=v(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),P_=function(){function e(){f(this,e),this.qe=new R_}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Bw.resolve()}},{key:"getCollectionParents",value:function(e,t){return Bw.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Bw.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Bw.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Bw.resolve(null)}},{key:"getIndexType",value:function(e,t){return Bw.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Bw.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Bw.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Bw.resolve(jm.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Bw.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Bw.resolve()}}]),e}(),R_=function(){function e(){f(this,e),this.index={}}return p(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Gm(Gy.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Gm(Gy.comparator)).toArray()}}]),e}(),D_=new Uint8Array(0),O_=function(){function e(t,n){f(this,e),this.user=t,this.databaseId=n,this.Ke=new R_,this.Ge=new yk((function(e){return Jm(e)}),(function(e,t){return Xm(e,t)})),this.uid=t.uid||""}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:pw(i)};return L_(e).put(a)}return Bw.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Vy(t),""],!1,!0);return L_(e).qt(r).next((function(e){var r,i=v(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(mw(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=F_(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=F_(e),r=U_(e),i=M_(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=M_(e),i=!0,a=new Map;return Bw.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Ik(),o=[];return Bw.forEach(a,(function(i,a){var u;yy("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Jm(t)));var s=function(e,t){var n=Lm(t);if(void 0===n)return null;var r,i=v(eg(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=v(Mm(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=v(eg(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=v(Mm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?tg(e,o.fieldPath,e.startAt):ng(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new fg(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=v(Mm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ng(e,o.fieldPath,e.endAt):tg(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new fg(r,i)}(a,i),f=n.We(i,a,l),d=n.We(i,a,h),p=n.ze(i,a,c),y=n.He(i.indexId,s,f,l.inclusive,d,h.inclusive,p);return Bw.forEach(y,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=cm.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Bw.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(s){var h=t?u.Je(t[s/c]):D_,f=u.Ye(e,h,n[s%c],r),d=u.Xe(e,h,i[s%c],a),p=o.map((function(t){return u.Ye(e,h,t,!0)}));l.push.apply(l,Ie(u.createRange(f,d,p)))},f=0;f<s;++f)h(f);return l}},{key:"Ye",value:function(e,t,n,r){var i=new S_(e,cm.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new S_(e,cm.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new A_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=v(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Bw.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Gm(Qy.comparator),r=!1,i=v(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=v(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new E_,i=v(Mm(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);w_.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new E_;return w_.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new E_;return w_.fe.Zt(km(this.databaseId,t),n.Ne(function(e){var t=Mm(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new E_);var i,a=0,o=v(Mm(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=v(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.en(t,s.fieldPath)&&_m(c))r=this.nn(r,s,c);else{var f=h.Ne(s.kind);w_.fe.Zt(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Ie(e),a=[],o=v(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=v(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new E_;h.seed(l.Se()),w_.fe.Zt(s,h.Ne(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof rg&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=F_(e),i=U_(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Bw.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Um(t.sequenceNumber,new jm(s_(t.readTime),new cm(mw(t.documentKey)),t.largestBatchId)):Um.empty(),r=e.fields.map((function(e){var t=h(e,2),n=t[0],r=t[1];return new Fm(Qy.fromServerFormat(n),r)}));return new Om(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Fy(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=F_(e),a=U_(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Bw.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:u_(r.readTime),documentKey:pw(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Bw.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Bw.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Bw.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Bw.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return M_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return M_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=M_(e),i=new Gm(C_);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new S_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Gm(C_),r=this.Ze(t,e);if(null==r)return n;var i=Lm(t);if(null!=i){var a=e.data.field(i.fieldPath);if(_m(a)){var o,u=v(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new S_(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new S_(t.indexId,e.key,D_,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;yy("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Qm(a),s=Qm(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Qm(o)):l?(i(u),u=Qm(a)):(u=Qm(a),s=Qm(o))}}(r,i,C_,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Bw.waitFor(o)}},{key:"rn",value:function(e){var t=1;return U_(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return C_(e,t)})).filter((function(e,t,n){return!t||0!==C_(e,n[t-1])}));var r=[];r.push(e);var i,a=v(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=C_(o,e),s=C_(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,D_,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,D_,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Bw.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||Bm(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=jm.min()}))})).next((function(){return n}))}}]),e}();function L_(e){return Zw(e,"collectionParents")}function M_(e){return Zw(e,"indexEntries")}function F_(e){return Zw(e,"indexConfiguration")}function U_(e){return Zw(e,"indexState")}var V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q_=function(){function e(t,n,r){f(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return p(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function j_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){_y(1===u)})));var c,l=[],h=v(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=ww(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return Bw.waitFor(a).next((function(){return l}))}function B_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw wy();t=e.noDocument}return JSON.stringify(t).length}q_.DEFAULT_COLLECTION_PERCENTILE=10,q_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,q_.DEFAULT=new q_(41943040,q_.DEFAULT_COLLECTION_PERCENTILE,q_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),q_.DISABLED=new q_(-1,0,0);var z_=function(){function e(t,n,r,i){f(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return p(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return K_(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=G_(e),o=K_(e);return o.add({}).next((function(u){_y("number"==typeof u);var s,c=new e_(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return ew(e.Jt,t)})),i=n.mutations.map((function(t){return ew(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),h=[],f=new Gm((function(e,t){return Fy(e.canonicalString(),t.canonicalString())})),d=v(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,y=ww(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(y,_w))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),Bw.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return K_(e).get(t).next((function(e){return e?(_y(e.userId===n.userId),c_(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Bw.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return K_(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(_y(t.batchId>=r),a=c_(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return K_(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return K_(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return c_(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=kw(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return G_(e).Wt({range:i},(function(r,i,o){var u=h(r,3),s=u[0],c=u[1],l=u[2],f=mw(c);if(s===n.userId&&t.path.isEqual(f))return K_(e).get(l).next((function(e){if(!e)throw wy();_y(e.userId===n.userId),a.push(c_(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gm(Fy),i=[];return t.forEach((function(t){var a=kw(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=G_(e).Wt({range:o},(function(e,i,a){var o=h(e,3),u=o[0],s=o[1],c=o[2],l=mw(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Bw.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=kw(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Gm(Fy);return G_(e).Wt({range:o},(function(e,t,a){var o=h(e,3),s=o[0],c=o[1],l=o[2],f=mw(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(K_(e).get(t).next((function(e){if(null===e)throw wy();_y(e.userId===n.userId),r.push(c_(n.M,e))})))})),Bw.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return j_(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Bw.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Bw.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return G_(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=mw(e[1]);i.push(a)}else r.done()})).next((function(){_y(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return W_(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return H_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return _y(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function W_(e,t,n){var r=kw(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return G_(e).Wt({range:a,jt:!0},(function(e,n,r){var a=h(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function K_(e){return Zw(e,"mutations")}function G_(e){return Zw(e,"documentMutations")}function H_(e){return Zw(e,"mutationQueues")}var Q_=function(){function e(t){f(this,e),this.mn=t}return p(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Y_=function(){function e(t,n){f(this,e),this.referenceDelegate=t,this.M=n}return p(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Q_(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return jy.fromTimestamp(new qy(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return $_(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return _y(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return $_(e).Wt((function(o,u){var s=l_(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Bw.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return $_(e).Wt((function(e,n){var r=l_(n);t(r)}))}},{key:"pn",value:function(e){return J_(e).get("targetGlobalKey").next((function(e){return _y(null!==e),e}))}},{key:"In",value:function(e,t){return J_(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return $_(e).put(h_(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Jm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return $_(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=l_(n);Xm(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=X_(e);return t.forEach((function(t){var o=pw(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Bw.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=X_(e);return Bw.forEach(t,(function(t){var a=pw(t.path);return Bw.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=X_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=X_(e),i=Ik();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=mw(e[1]),a=new cm(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=pw(t.path),r=IDBKeyRange.bound([n],[Vy(n)],!1,!0),i=0;return X_(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=h(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return $_(e).get(t).next((function(e){return e?l_(e):null}))}}]),e}();function $_(e){return Zw(e,"targets")}function J_(e){return Zw(e,"targetGlobal")}function X_(e){return Zw(e,"targetDocuments")}function Z_(e){return eb.apply(this,arguments)}function eb(){return eb=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===xy.FAILED_PRECONDITION&&t.message===qw){e.next=2;break}throw t;case 2:yy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}function tb(e,t){var n=h(e,2),r=n[0],i=n[1],a=h(t,2),o=a[0],u=a[1],s=Fy(r,o);return 0===s?Fy(i,u):s}var nb=function(){function e(t){f(this,e),this.An=t,this.buffer=new Gm(tb),this.Rn=0}return p(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();tb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),rb=function(){function e(t,n){f(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return p(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;yy("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Ee(Ce().mark((function n(){return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Hw(n.t0)){n.next=12;break}yy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Z_(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),ib=function(){function e(t,n){f(this,e),this.Dn=t,this.params=n}return p(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Bw.resolve(Oy.A);var r=new nb(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(yy("LruGarbageCollector","Garbage collection skipped; disabled"),Bw.resolve(V_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(yy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),V_):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(yy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),vy()<=De.DEBUG&&yy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Bw.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),ab=function(){function e(t,n){f(this,e),this.db=t,this.garbageCollector=function(e,t){return new ib(e,t)}(this,n)}return p(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return ob(e,n)}},{key:"removeReference",value:function(e,t,n){return ob(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return ob(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return H_(e).zt((function(r){return W_(e,r,t).next((function(e){return e&&(n=!0),Bw.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,jy.min()),X_(e).delete([0,pw(o.path)])}))}));i.push(s)}})).next((function(){return Bw.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return ob(e,t)}},{key:"Mn",value:function(e,t){var n,r=X_(e),i=Oy.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=h(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Oy.A&&t(new cm(mw(n)),i),i=s,n=u):i=Oy.A})).next((function(){i!==Oy.A&&t(new cm(mw(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function ob(e,t){return X_(e).put(function(e,t){return{targetId:0,path:pw(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ub=function(){function e(){f(this,e),this.changes=new yk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return p(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Dm.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Bw.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),sb=function(){function e(t){f(this,e),this.M=t}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return hb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return hb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],o_(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Dm.newInvalidDocument(t);return hb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(fb(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Dm.newInvalidDocument(t)};return hb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(fb(t))},(function(e,i){r={document:n.$n(t,i),size:B_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=gk();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=gk(),i=new zm(cm.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,B_(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Bw.resolve();var r=new Gm(pb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(fb(r.first()),fb(r.last())),a=r.getIterator(),o=a.getNext();return hb(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=cm.fromSegments([].concat(Ie(t.prefixPath),[t.collectionGroup,t.documentId]));o&&pb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(fb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),o_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hb(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=gk(),i=v(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(cm.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=gk(),o=db(t,n),u=db(t,jm.max());return hb(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(cm.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new cb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return lb(e).get("remoteDocumentGlobalKey").next((function(e){return _y(!!e),e}))}},{key:"Fn",value:function(e,t){return lb(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Xk(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=cm.fromSegments(t.noDocument.path),i=s_(t.noDocument.readTime);n=Dm.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return wy();var a=cm.fromSegments(t.unknownDocument.path),o=s_(t.unknownDocument.version);n=Dm.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new qy(e[0],e[1]);return jy.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(jy.min()))return n}return Dm.newInvalidDocument(e)}}]),e}(),cb=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new yk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Gm((function(e,t){return Fy(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=a_(t.Kn.M,o);i=i.add(a.path.popLast());var c=B_(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=a_(t.Kn.M,o.convertToNoDocument(jy.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Bw.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(ub);function lb(e){return Zw(e,"remoteDocumentGlobal")}function hb(e){return Zw(e,"remoteDocumentsV14")}function fb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function db(e,t){var n=t.documentKey.path.toArray();return[e,o_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Fy(n[a],r[a]))return i;return(i=Fy(n.length,r.length))||((i=Fy(n[n.length-2],r[r.length-2]))||Fy(n[n.length-1],r[r.length-1]))}var vb=function(){function e(t){f(this,e),this.M=t}return p(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new zw("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gw,{unique:!0}),e.createObjectStore("documentMutations")}(e),yb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Bw.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),yb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jy.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gw,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Bw.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Dw});t.createIndex("collectionPathOverlayIndex",Ow,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Lw,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:bw});t.createIndex("documentKeyIndex",xw),t.createIndex("collectionGroupIndex",Iw)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Nw}).createIndex("sequenceNumberIndex",Aw,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Pw}).createIndex("documentKeyIndex",Rw,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=B_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Bw.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Bw.forEach(r,(function(r){_y(r.userId===n.userId);var i=c_(t.M,r);return j_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Gy(n),o=function(e){return[0,pw(e)]}(a);r.push(t.get(o).next((function(n){return n?Bw.resolve():function(n){return t.put({targetId:0,path:pw(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Bw.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Cw});var n=t.store("collectionParents"),r=new R_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:pw(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Gy(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=h(e,3),r=(n[0],n[1]),a=(n[2],mw(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=l_(r),a=h_(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new cm(Gy.fromString(i.document.name).popFirst(5)):i.noDocument?cm.fromSegments(i.noDocument.path):i.unknownDocument?cm.fromSegments(i.unknownDocument.path):wy()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Bw.waitFor(r)}))}}]),e}();function yb(e){e.createObjectStore("targetDocuments",{keyPath:Ew}).createIndex("documentTargetsIndex",Sw,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tw,{unique:!0}),e.createObjectStore("targetGlobal")}var mb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gb=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(f(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Iy(xy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ab(this,i),this.hs=n+"main",this.M=new i_(s),this.ls=new Ww(this.hs,this.ts,new vb(this.M)),this.fs=new Y_(this.referenceDelegate,this.M),this.ds=function(e){return new sb(e)}(this.M),this._s=new v_,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&my("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return p(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Iy(xy.FAILED_PRECONDITION,mb);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Oy(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=Ee(Ce().mark((function n(r){return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=Ee(Ce().mark((function t(n){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return wb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(Hw(t))return yy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return yy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return kb(e).get("owner").next((function(e){return Bw.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return wb(e).delete(this.clientId)}},{key:"vs",value:function(){var e=Ee(Ce().mark((function e(){var t,n,r,i,a=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Zw(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Bw.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=v(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Bw.resolve(!0):kb(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new Iy(xy.FAILED_PRECONDITION,mb);return!1}}return!(!t.networkEnabled||!t.inForeground)||wb(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&yy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ee(Ce().mark((function e(){var t=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Xw(e,Oy.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return wb(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return z_.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new O_(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return g_.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;yy("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?Vw:13===i?Uw:12===i?Fw:11===i?Mw:void wy();return this.ls.runTransaction(e,o,u,(function(i){return a=new Xw(i,r.es?r.es.next():Oy.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw my("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Iy(xy.FAILED_PRECONDITION,qw);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return kb(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Iy(xy.FAILED_PRECONDITION,mb)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kb(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=kb(e);return n.get("owner").next((function(e){return t.Ps(e)?(yy("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Bw.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(my("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!j()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return yy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return my("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(ff){my("Failed to set zombie client id.",ff)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(ff){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Ww.vt()}}]),e}();function kb(e){return Zw(e,"owner")}function wb(e){return Zw(e,"clientMetadata")}function _b(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var bb=function(){function e(t,n,r){f(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return p(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=v(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=v(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return cm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):bg(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new cm(t)).next((function(e){var t=wk();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=wk();return this.indexManager.getCollectionParents(e,i).next((function(o){return Bw.forEach(o,(function(o){var u=function(e,t){return new mg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=v(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=Dm.newInvalidDocument(s),r=r.insert(s,c)),ek(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Ng(t,n)||(r=r.remove(e))})),r}))}}]),e}(),xb=function(){function e(t,n,r,i){f(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return p(e,null,[{key:"Ys",value:function(t,n){var r,i=Ik(),a=Ik(),o=v(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ib=function(){function e(){f(this,e),this.Xs=!1}return p(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return Bw.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(jy.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(vy()<=De.DEBUG&&yy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cg(t)),i.ri(e,o,t,Vm(r,-1)))}))}},{key:"si",value:function(e,t){var n=new Gm(Pg(e));return t.forEach((function(t,r){Ng(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return vy()<=De.DEBUG&&yy("QueryEngine","Using full collection scan to execute query:",Cg(t)),this.Zs.Qs(e,t,jm.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Tb=function(){function e(t,n,r,i){f(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new zm(Fy),this.ai=new yk((function(e){return Jm(e)}),Xm),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return p(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new bb(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function Eb(e,t,n,r){return new Tb(e,t,n,r)}function Sb(e,t){return Cb.apply(this,arguments)}function Cb(){return Cb=Ee(Ce().mark((function e(t,n){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=by(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Ik(),s=v(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=v(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(w){h.e(w)}finally{h.f()}}}catch(w){s.e(w)}finally{s.f()}var d,p=v(n);try{for(p.s();!(d=p.n()).done;){var y=d.value;o.push(y.batchId);var m,g=v(y.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;u=u.add(k.key)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){p.e(w)}finally{p.f()}return r.fi.Ks(e,u).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Cb.apply(this,arguments)}function Nb(e,t){var n=by(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Bw.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);_y(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function Ab(e){var t=by(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function Pb(e,t){var n=by(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken($y.EMPTY_BYTE_STRING,jy.min()).withLastLimboFreeSnapshotVersion(jy.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=gk();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Rb(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(jy.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Bw.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ui=i,e}))}function Rb(e,t,n){var r=Ik();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=gk();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(jy.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):yy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Db(e,t){var n=by(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Ob(e,t){var n=by(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Bw.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new r_(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function Lb(e,t,n){return Mb.apply(this,arguments)}function Mb(){return Mb=Ee(Ce().mark((function e(t,n,r){var i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=by(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Hw(e.t1)){e.next=12;break}throw e.t1;case 12:yy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Mb.apply(this,arguments)}function Fb(e,t,n){var r=by(e),i=jy.min(),a=Ik();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=by(e),i=r.ai.get(n);return void 0!==i?Bw.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,Ig(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:jy.min(),n?a:Ik())})).next((function(e){return qb(r,Ag(t),e),{documents:e,_i:a}}))}))}function Ub(e,t){var n=by(e),r=by(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Vb(e,t){var n=by(e),r=n.ci.get(t)||jy.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,Vm(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return qb(n,t,e),e}))}function qb(e,t,n){var r=jy.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function jb(e,t,n,r){return Bb.apply(this,arguments)}function Bb(){return Bb=Ee(Ce().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,d,p;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=by(t),o=Ik(),u=gk(),s=v(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.wi(l.metadata.name),l.document&&(o=o.add(h)),(f=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),u=u.insert(h,f)}catch(y){s.e(y)}finally{s.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Ob(a,function(e){return Ig(kg(Gy.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Rb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function zb(e,t){return Wb.apply(this,arguments)}function Wb(){return Wb=Ee(Ce().mark((function e(t,n){var r,i,a,o=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Ik(),e.next=3,Ob(t,Ig(f_(n.bundledQuery)));case 3:return i=e.sent,a=by(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Bk(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken($y.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}var Kb=function(){function e(t){f(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return p(e,[{key:"getBundleMetadata",value:function(e,t){return Bw.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Bk(n.createTime)}),Bw.resolve()}},{key:"getNamedQuery",value:function(e,t){return Bw.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:f_(e.bundledQuery),readTime:Bk(e.readTime)}}(t)),Bw.resolve()}}]),e}(),Gb=function(){function e(){f(this,e),this.overlays=new zm(cm.comparator),this.Ii=new Map}return p(e,[{key:"getOverlay",value:function(e,t){return Bw.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Bw.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),Bw.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=_k(),i=t.length+1,a=new cm(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Bw.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new zm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=_k(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=_k(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Bw.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new n_(t,n));var a=this.Ii.get(t);void 0===a&&(a=Ik(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Hb=function(){function e(){f(this,e),this.Ti=new Gm(Qb.Ei),this.Ai=new Gm(Qb.Ri)}return p(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Qb(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new Qb(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new cm(new Gy([])),r=new Qb(n,e),i=new Qb(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new cm(new Gy([])),n=new Qb(t,e),r=new Qb(t,e+1),i=Ik();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Qb(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Qb=function(){function e(t,n){f(this,e),this.key=t,this.Ci=n}return p(e,null,[{key:"Ei",value:function(e,t){return cm.comparator(e.key,t.key)||Fy(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Fy(e.Ci,t.Ci)||cm.comparator(e.key,t.key)}}]),e}(),Yb=function(){function e(t,n){f(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new Gm(Qb.Ei)}return p(e,[{key:"checkEmpty",value:function(e){return Bw.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new e_(i,t,n,r);this.Bs.push(a);var o,u=v(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new Qb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Bw.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Bw.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return Bw.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Bw.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Bw.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Qb(t,0),i=new Qb(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),Bw.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gm(Fy);return t.forEach((function(e){var t=new Qb(e,0),i=new Qb(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),Bw.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;cm.isDocumentKey(i)||(i=i.child(""));var a=new Qb(new cm(i),0),o=new Gm(Fy);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),Bw.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;_y(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Bw.forEach(t.mutations,(function(i){var a=new Qb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Qb(t,0),r=this.Ni.firstAfterOrEqual(n);return Bw.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Bw.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),$b=function(){function e(t){f(this,e),this.$i=t,this.docs=new zm(cm.comparator),this.size=0}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Bw.resolve(n?n.document.mutableCopy():Dm.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=gk();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Dm.newInvalidDocument(e))})),Bw.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=gk(),i=new cm(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Bm(qm(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Bw.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){wy()}},{key:"Bi",value:function(e,t){return Bw.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Jb(this)}},{key:"getSize",value:function(e){return Bw.resolve(this.size)}}]),e}(),Jb=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).Kn=e,r}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Bw.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(ub),Xb=function(){function e(t){f(this,e),this.persistence=t,this.Li=new yk((function(e){return Jm(e)}),Xm),this.lastRemoteSnapshotVersion=jy.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Hb,this.targetCount=0,this.Ki=Q_.gn()}return p(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),Bw.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Bw.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Bw.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Bw.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Bw.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Q_(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Bw.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Bw.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Bw.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Bw.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Bw.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Bw.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Bw.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Bw.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Bw.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Bw.resolve(n)}},{key:"containsKey",value:function(e,t){return Bw.resolve(this.qi.containsKey(t))}}]),e}(),Zb=function(){function e(t,n){var r=this;f(this,e),this.Gi={},this.overlays={},this.es=new Oy(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Xb(this),this.indexManager=new P_,this.ds=new $b((function(e){return r.referenceDelegate.Qi(e)})),this.M=new i_(n),this._s=new Kb(this.M)}return p(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Gb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new Yb(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;yy("MemoryPersistence","Starting transaction:",e);var i=new ex(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return Bw.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),ex=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return p(n)}(jw),tx=function(){function e(t){f(this,e),this.persistence=t,this.Hi=new Hb,this.Ji=null}return p(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw wy()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Bw.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Bw.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Bw.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bw.forEach(this.Xi,(function(r){var i=cm.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,jy.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Bw.or([function(){return Bw.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function nx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function rx(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ix(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var ax=function(){function e(t,n,r,i){f(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return p(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Iy(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(my("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ox=function(){function e(t,n,r){f(this,e),this.targetId=t,this.state=n,this.error=r}return p(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Iy(i.error.code,i.error.message))),a?new e(t,i.state,r):(my("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ux=function(){function e(t,n){f(this,e),this.clientId=t,this.activeTargetIds=n}return p(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ek(),o=0;i&&o<r.activeTargetIds.length;++o)i=sm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(my("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),sx=function(){function e(t,n){f(this,e),this.clientId=t,this.onlineState=n}return p(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(my("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),cx=function(){function e(){f(this,e),this.activeTargetIds=Ek()}return p(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),lx=function(){function e(t,n,r,i,a){f(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new zm(Fy),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=nx(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new cx),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return p(e,[{key:"start",value:function(){var e=Ee(Ce().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=v(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(nx(this.persistenceKey,i)))&&(o=ux.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(u=this.storage.getItem(this.mr))&&(s=this.pr(u))&&this.Ir(s),c=v(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.ur(h)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ix(this.persistenceKey,e));if(n){var r=ox.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(ix(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return yy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){yy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){yy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(yy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void my("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(Ee(Ce().mark((function e(){var r,i,a,o,u,s,c;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}s=function(e){var t=Oy.A;if(null!=e)try{var n=JSON.parse(e);_y("number"==typeof n),t=n}catch(e){my("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Oy.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new ax(this.currentUser,e,t,n),i=rx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=rx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=ix(this.persistenceKey,e),i=new ox(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return ux.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ax.tr(new fy(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return ox.tr(r,t)}},{key:"pr",value:function(e){return sx.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:yy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Lr(o,u).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=Ek();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),hx=function(){function e(){f(this,e),this.Ur=new cx,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return p(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new cx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),fx=function(){function e(){f(this,e)}return p(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),dx=function(){function e(){var t=this;f(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return p(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){yy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=v(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){yy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=v(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),px={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},vx=function(){function e(t){f(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return p(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),yx=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return p(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ly;o.listenOnce(ay.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case iy.NO_ERROR:var t=o.getResponseJson();yy("Connection","XHR received:",JSON.stringify(t)),i(t);break;case iy.TIMEOUT:yy("Connection",'RPC "'+e+'" timed out'),a(new Iy(xy.DEADLINE_EXCEEDED,"Request time out"));break;case iy.HTTP_ERROR:var n=o.getStatus();if(yy("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(xy).indexOf(t)>=0?t:xy.UNKNOWN}(r.status);a(new Iy(u,r.message))}else a(new Iy(xy.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Iy(xy.UNAVAILABLE,"Connection failed."));break;default:wy()}}finally{yy("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ny(),a=ry(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new sy({})),this.lo(o.initMessageHeaders,t,n),q()||z()||V().indexOf("Electron/")>=0||W()||V().indexOf("MSAppHost/")>=0||B()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");yy("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new vx({Jr:function(e){l?yy("Connection","Not sending because WebChannel is closed:",e):(c||(yy("Connection","Opening WebChannel transport."),s.open(),c=!0),yy("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,cy.EventType.OPEN,(function(){l||yy("Connection","WebChannel transport opened.")})),f(s,cy.EventType.CLOSE,(function(){l||(l=!0,yy("Connection","WebChannel transport closed"),h.ro())})),f(s,cy.EventType.ERROR,(function(e){l||(l=!0,gy("Connection","WebChannel transport errored:",e),h.ro(new Iy(xy.UNAVAILABLE,"The operation could not be completed")))})),f(s,cy.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];_y(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){yy("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=ck[e];if(void 0!==t)return vk(t)}(a),u=i.message;void 0===o&&(o=xy.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.ro(new Iy(o,u)),s.close()}else yy("Connection","WebChannel received:",n),h.oo(n)}})),f(a,oy.STAT_EVENT,(function(e){e.stat===uy.PROXY?yy("Connection","Detected buffering proxy"):e.stat===uy.NOPROXY&&yy("Connection","Detected no buffering proxy")})),setTimeout((function(){h.io()}),0),h}}]),n}(function(){function e(t){f(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return p(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);yy("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return yy("RestConnection","Received: ",e),e}),(function(t){throw gy("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+dy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=px[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function mx(){return"undefined"!=typeof window?window:null}function gx(){return"undefined"!=typeof document?document:null}function kx(e){return new Uk(e,!0)}var wx=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;f(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return p(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&yy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),_x=function(){function e(t,n,r,i,a,o,u,s){f(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new wx(t,n)}return p(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===xy.RESOURCE_EXHAUSTED?(my(n.toString()),my("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===xy.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=h(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new Iy(xy.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(Ee(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return yy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(yy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),bx=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return f(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return p(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:wy()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(_y(void 0===t||"string"==typeof t),$y.fromBase64String(t||"")):(_y(void 0===t||t instanceof Uint8Array),$y.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?xy.UNKNOWN:vk(e.code);return new Iy(t,e.message||"")}(o);n=new Pk(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Gk(e,s.document.name),l=Bk(s.document.updateTime),h=new Pm({mapValue:{fields:s.document.fields}}),f=Dm.newFoundDocument(c,l,h),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Nk(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Gk(e,v.document),m=v.readTime?Bk(v.readTime):jy.min(),g=Dm.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Nk([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Gk(e,w.document),b=w.removedTargetIds||[];n=new Nk([],b,_,null)}else{if(!("filter"in t))return wy();t.filter;var x=t.filter;x.targetId;var I=x.count||0,T=new dk(I),E=x.targetId;n=new Ak(E,T)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return jy.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?jy.min():t.readTime?Bk(t.readTime):jy.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Yk(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Zm(r)?{documents:nw(e,r)}:{query:rw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=qk(e,t.resumeToken):t.snapshotVersion.compareTo(jy.min())>0&&(n.readTime=Vk(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wy()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Yk(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(_x),xx=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return f(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return p(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,Fi(k(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(_y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(_y(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Bk(e.updateTime):Bk(t);return n.isEqual(jy.min())&&(n=Bk(t)),new Yg(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Bk(e.commitTime);return this.listener.tu(n,t)}return _y(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Yk(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return ew(t.M,e)}))};this.Lo(n)}}]),n}(_x),Ix=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return p(n,[{key:"iu",value:function(){if(this.su)throw new Iy(xy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=h(i,2),o=a[0],u=a[1];return r.So.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Iy(xy.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=h(i,2),o=a[0],u=a[1];return r.So._o(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Iy(xy.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return p((function e(){f(this,e)}))}()),Tx=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return p(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(my(t),this.uu=!1):yy("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),Ex=p((function e(t,n,r,i,a){var o=this;f(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Fx(o),!e.t0){e.next=5;break}return yy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=by(t)).wu.add(4),e.next=4,Nx(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,Sx(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new Tx(r,i)}));function Sx(e){return Cx.apply(this,arguments)}function Cx(){return Cx=Ee(Ce().mark((function e(t){var n,r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fx(t)){e.next=18;break}n=v(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Cx.apply(this,arguments)}function Nx(e){return Ax.apply(this,arguments)}function Ax(){return Ax=Ee(Ce().mark((function e(t){var n,r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=v(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ax.apply(this,arguments)}function Px(e,t){var n=by(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Mx(n)?Lx(n):fI(n).Mo()&&Dx(n,t))}function Rx(e,t){var n=by(e),r=fI(n);n._u.delete(t),r.Mo()&&Ox(n,t),0===n._u.size&&(r.Mo()?r.$o():Fx(n)&&n.yu.set("Unknown"))}function Dx(e,t){e.pu.Z(t.targetId),fI(e).Ho(t)}function Ox(e,t){e.pu.Z(t),fI(e).Jo(t)}function Lx(e){e.pu=new Dk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),fI(e).start(),e.yu.au()}function Mx(e){return Fx(e)&&!fI(e).ko()&&e._u.size>0}function Fx(e){return 0===by(e).wu.size}function Ux(e){e.pu=void 0}function Vx(e){return qx.apply(this,arguments)}function qx(){return qx=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){Dx(t,e)}));case 1:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function jx(e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ux(t),Mx(t)?(t.yu.lu(n),Lx(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Bx.apply(this,arguments)}function zx(e,t,n){return Wx.apply(this,arguments)}function Wx(){return Wx=Ee(Ce().mark((function e(t,n,r){var i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof Pk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ee(Ce().mark((function e(t,n){var r,i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=v(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),yy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Kx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Nk?t.pu.ut(n):n instanceof Ak?t.pu._t(n):t.pu.ht(n),r.isEqual(jy.min())){e.next=29;break}return e.prev=14,e.next=17,Ab(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken($y.EMPTY_BYTE_STRING,n.snapshotVersion)),Ox(e,t);var r=new r_(n.target,t,1,n.sequenceNumber);Dx(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),yy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Kx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Wx.apply(this,arguments)}function Kx(e,t,n){return Gx.apply(this,arguments)}function Gx(){return Gx=Ee(Ce().mark((function e(t,n,r){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hw(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,Nx(t);case 5:t.yu.set("Offline"),r||(r=function(){return Ab(t.localStore)}),t.asyncQueue.enqueueRetryable(Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,Sx(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Gx.apply(this,arguments)}function Hx(e,t){return t().catch((function(n){return Kx(e,n,t)}))}function Qx(e){return Yx.apply(this,arguments)}function Yx(){return Yx=Ee(Ce().mark((function e(t){var n,r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=by(t),r=dI(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!$x(n)){e.next=19;break}return e.prev=3,e.next=6,Db(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Jx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Kx(n,e.t0);case 17:e.next=2;break;case 19:Xx(n)&&Zx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Yx.apply(this,arguments)}function $x(e){return Fx(e)&&e.du.length<10}function Jx(e,t){e.du.push(t);var n=dI(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Xx(e){return Fx(e)&&!dI(e).ko()&&e.du.length>0}function Zx(e){dI(e).start()}function eI(e){return tI.apply(this,arguments)}function tI(){return tI=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:dI(t).nu();case 1:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e){return rI.apply(this,arguments)}function rI(){return rI=Ee(Ce().mark((function e(t){var n,r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=dI(t),r=v(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}function iI(e,t,n){return aI.apply(this,arguments)}function aI(){return aI=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=t_.from(i,n,r),e.next=3,Hx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Qx(t);case 5:case"end":return e.stop()}}),e)}))),aI.apply(this,arguments)}function oI(e,t){return uI.apply(this,arguments)}function uI(){return uI=Ee(Ce().mark((function e(t,n){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&dI(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ee(Ce().mark((function e(t,n){var r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pk(i=n.code)||i===xy.ABORTED){e.next=7;break}return r=t.du.shift(),dI(t).Fo(),e.next=5,Hx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Qx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Xx(t)&&Zx(t);case 5:case"end":return e.stop()}}),e)}))),uI.apply(this,arguments)}function sI(e,t){return cI.apply(this,arguments)}function cI(){return cI=Ee(Ce().mark((function e(t,n){var r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=by(t)).asyncQueue.verifyOperationInProgress(),yy("RemoteStore","RemoteStore received new credentials"),i=Fx(r),r.wu.add(3),e.next=6,Nx(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,Sx(r);case 12:case"end":return e.stop()}}),e)}))),cI.apply(this,arguments)}function lI(e,t){return hI.apply(this,arguments)}function hI(){return hI=Ee(Ce().mark((function e(t,n){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=by(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,Sx(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,Nx(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),hI.apply(this,arguments)}function fI(e){return e.Iu||(e.Iu=function(e,t,n){var r=by(e);return r.iu(),new bx(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Vx.bind(null,e),eo:jx.bind(null,e),zo:zx.bind(null,e)}),e.mu.push(function(){var t=Ee(Ce().mark((function t(n){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Mx(e)?Lx(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Ux(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function dI(e){return e.Tu||(e.Tu=function(e,t,n){var r=by(e);return r.iu(),new xx(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:eI.bind(null,e),eo:oI.bind(null,e),eu:nI.bind(null,e),tu:iI.bind(null,e)}),e.mu.push(function(){var t=Ee(Ce().mark((function t(n){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Qx(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(yy("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var pI=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ty,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return p(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Iy(xy.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function vI(e,t){if(my("AsyncQueue","".concat(t,": ").concat(e)),Hw(e))return new Iy(xy.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var yI=function(){function e(t){f(this,e),this.comparator=t?function(e,n){return t(e,n)||cm.comparator(e.key,n.key)}:function(e,t){return cm.comparator(e.key,t.key)},this.keyedMap=wk(),this.sortedSet=new zm(this.comparator)}return p(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),mI=function(){function e(){f(this,e),this.Eu=new zm(cm.comparator)}return p(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):wy():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),gI=function(){function e(t,n,r,i,a,o,u,s){f(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return p(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,yI.emptySet(n),a,r,i,!0,!1)}}]),e}(),kI=p((function e(){f(this,e),this.Ru=void 0,this.listeners=[]})),wI=p((function e(){f(this,e),this.queries=new yk((function(e){return Sg(e)}),Eg),this.onlineState="Unknown",this.bu=new Set}));function _I(e,t){return bI.apply(this,arguments)}function bI(){return bI=Ee(Ce().mark((function e(t,n){var r,i,a,o,u;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=by(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new kI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=vI(e.t0,"Initialization of query '".concat(Cg(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&SI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),bI.apply(this,arguments)}function xI(e,t){return II.apply(this,arguments)}function II(){return II=Ee(Ce().mark((function e(t,n){var r,i,a,o,u;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=by(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),II.apply(this,arguments)}function TI(e,t){var n,r=by(e),i=!1,a=v(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=v(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Ru=o}}}catch(h){a.e(h)}finally{a.f()}i&&SI(r)}function EI(e,t,n){var r=by(e),i=r.queries.get(t);if(i){var a,o=v(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function SI(e){e.bu.forEach((function(e){e.next()}))}var CI=function(){function e(t,n,r){f(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return p(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=v(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new gI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=gI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),NI=function(){function e(t,n){f(this,e),this.payload=t,this.byteLength=n}return p(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),AI=function(){function e(t){f(this,e),this.M=t}return p(e,[{key:"wi",value:function(e){return Gk(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Xk(this.M,e.document,!1):Dm.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return Bk(e)}}]),e}(),PI=function(){function e(t,n,r){f(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RI(t)}return p(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Gy.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new AI(this.M),i=v(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=v(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Ik()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ee(Ce().mark((function e(){var t,n,r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jb(this.localStore,new AI(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=v(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,zb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function RI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var DI=p((function e(t){f(this,e),this.key=t})),OI=p((function e(t){f(this,e),this.key=t})),LI=function(){function e(t,n){f(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=Ik(),this.mutatedKeys=Ik(),this.Gu=Pg(t),this.Qu=new yI(this.Gu)}return p(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new mI,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Ng(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Gu(h,s)>0||c&&n.Gu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wy()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new gI(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new mI,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Ik(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new OI(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new DI(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=Ik();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return gI.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),MI=p((function e(t,n,r){f(this,e),this.query=t,this.targetId=n,this.view=r})),FI=p((function e(t){f(this,e),this.key=t,this.na=!1})),UI=function(){function e(t,n,r,i,a,o){f(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new yk((function(e){return Sg(e)}),Eg),this.ra=new Map,this.oa=new Set,this.ua=new zm(cm.comparator),this.aa=new Map,this.ca=new Hb,this.ha={},this.la=new Map,this.fa=Q_.yn(),this.onlineState="Unknown",this.da=void 0}return p(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function VI(e,t){return qI.apply(this,arguments)}function qI(){return qI=Ee(Ce().mark((function e(t,n){var r,i,a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=RT(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Ob(r.localStore,Ig(n));case 8:return u=e.sent,r.isPrimaryClient&&Px(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,jI(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),qI.apply(this,arguments)}function jI(e,t,n,r){return BI.apply(this,arguments)}function BI(){return BI=Ee(Ce().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=Ee(Ce().mark((function e(t,n,r,i){var a,o,u;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Fb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(sT(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Fb(t.localStore,n,!0);case 3:return a=e.sent,o=new LI(n,a._i),u=o.Wu(a.documents),s=Ck.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),sT(t,r,c.Xu),l=new MI(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}function zI(e,t){return WI.apply(this,arguments)}function WI(){return WI=Ee(Ce().mark((function e(t,n){var r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=by(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!Eg(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Lb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Rx(r.remoteStore,i.targetId),oT(r,i.targetId)})).catch(Z_);case 9:e.next=14;break;case 11:return oT(r,i.targetId),e.next=14,Lb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),WI.apply(this,arguments)}function KI(e,t,n){return GI.apply(this,arguments)}function GI(){return GI=Ee(Ce().mark((function e(t,n,r){var i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=DT(t),e.prev=1,e.next=4,function(e,t){var n,r=by(e),i=qy.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Ik());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,u=[],s=v(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=tk(c,n.get(c.key));null!=l&&u.push(new ak(c.key,l,Rm(l.value.mapValue),$g.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new zm(Fy)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,hT(i,a.changes);case 9:return e.next=11,Qx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=vI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),GI.apply(this,arguments)}function HI(e,t){return QI.apply(this,arguments)}function QI(){return QI=Ee(Ce().mark((function e(t,n){var r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=by(t),e.prev=1,e.next=4,Pb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(_y(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?_y(n.na):e.removedDocuments.size>0&&(_y(n.na),n.na=!1))})),e.next=8,hT(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Z_(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),QI.apply(this,arguments)}function YI(e,t,n){var r=by(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=by(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=v(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&SI(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function $I(e,t,n){return JI.apply(this,arguments)}function JI(){return JI=Ee(Ce().mark((function e(t,n,r){var i,a,o,u,s,c;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=by(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new zm(cm.comparator)).insert(o,Dm.newNoDocument(o,jy.min())),s=Ik().add(o),c=new Sk(jy.min(),new Map,new Gm(Fy),u,s),e.next=9,HI(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),lT(i),e.next=16;break;case 14:return e.next=16,Lb(i.localStore,n,!1).then((function(){return oT(i,n,r)})).catch(Z_);case 16:case"end":return e.stop()}}),e)}))),JI.apply(this,arguments)}function XI(e,t){return ZI.apply(this,arguments)}function ZI(){return ZI=Ee(Ce().mark((function e(t,n){var r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=by(t),i=n.batch.batchId,e.prev=1,e.next=4,Nb(r.localStore,n);case 4:return a=e.sent,aT(r,i,null),iT(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,hT(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Z_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ZI.apply(this,arguments)}function eT(e,t,n){return tT.apply(this,arguments)}function tT(){return tT=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=by(t),e.prev=1,e.next=4,function(e,t){var n=by(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return _y(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,aT(i,n,r),iT(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,hT(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Z_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),tT.apply(this,arguments)}function nT(e,t){return rT.apply(this,arguments)}function rT(){return rT=Ee(Ce().mark((function e(t,n){var r,i,a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fx((r=by(t)).remoteStore)||yy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=by(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=vI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),rT.apply(this,arguments)}function iT(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function aT(e,t,n){var r=by(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function oT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=v(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||uT(e,t)}))}function uT(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(Rx(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),lT(e))}function sT(e,t,n){var r,i=v(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof DI?(e.ca.addReference(a.key,t),cT(e,a)):a instanceof OI?(yy("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||uT(e,a.key)):wy()}}catch(o){i.e(o)}finally{i.f()}}function cT(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(yy("SyncEngine","New document in limbo: "+n),e.oa.add(r),lT(e))}function lT(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new cm(Gy.fromString(t)),r=e.fa.next();e.aa.set(r,new FI(n)),e.ua=e.ua.insert(n,r),Px(e.remoteStore,new r_(Ig(kg(n.path)),r,2,Oy.A))}}function hT(e,t,n){return fT.apply(this,arguments)}function fT(){return fT=Ee(Ce().mark((function e(t,n,r){var i,a,o,u;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=by(t),a=[],o=[],u=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){u.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=xb.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sa.zo(a),e.next=9,function(){var e=Ee(Ce().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=by(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Bw.forEach(n,(function(t){return Bw.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Bw.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Hw(e.t0)){e.next=10;break}throw e.t0;case 10:yy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=v(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),fT.apply(this,arguments)}function dT(e,t){return pT.apply(this,arguments)}function pT(){return pT=Ee(Ce().mark((function e(t,n){var r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=by(t)).currentUser.isEqual(n)){e.next=11;break}return yy("SyncEngine","User change. New user:",n.toKey()),e.next=5,Sb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new Iy(xy.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,hT(r,i.di);case 11:case"end":return e.stop()}}),e)}))),pT.apply(this,arguments)}function vT(e,t){var n=by(e),r=n.aa.get(t);if(r&&r.na)return Ik().add(r.key);var i=Ik(),a=n.ra.get(t);if(!a)return i;var o,u=v(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function yT(e,t){return mT.apply(this,arguments)}function mT(){return mT=Ee(Ce().mark((function e(t,n){var r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=by(t),e.next=3,Fb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&sT(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),mT.apply(this,arguments)}function gT(e,t){return kT.apply(this,arguments)}function kT(){return kT=Ee(Ce().mark((function e(t,n){var r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=by(t),e.abrupt("return",Vb(r.localStore,n).then((function(e){return hT(r,e)})));case 2:case"end":return e.stop()}}),e)}))),kT.apply(this,arguments)}function wT(e,t,n,r){return _T.apply(this,arguments)}function _T(){return _T=Ee(Ce().mark((function e(t,n,r,i){var a,o;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=by(t),e.next=3,function(e,t){var n=by(e),r=by(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):Bw.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Qx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(aT(a,n,i||null),iT(a,n),function(e,t){by(by(e).Bs)._n(t)}(a.localStore,n)):wy();case 11:return e.next=13,hT(a,o);case 13:e.next=16;break;case 15:yy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),_T.apply(this,arguments)}function bT(e,t){return xT.apply(this,arguments)}function xT(){return xT=Ee(Ce().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(RT(r=by(t)),DT(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,IT(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,lI(r.remoteStore,!0);case 9:o=v(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Px(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return oT(r,t),Lb(r.localStore,t,!0)})),Rx(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,IT(r,c);case 21:return function(e){var t=by(e);t.aa.forEach((function(e,n){Rx(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new zm(cm.comparator)}(r),r.da=!1,e.next=25,lI(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),xT.apply(this,arguments)}function IT(e,t,n){return TT.apply(this,arguments)}function TT(){return TT=Ee(Ce().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d,p,y,m,g;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=by(t),a=[],o=[],u=v(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.ra.get(c))||0===h.length){e.next=34;break}return e.next=11,Ob(i.localStore,Ig(h[0]));case 11:l=e.sent,f=v(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,y=i.ia.get(p),e.next=20,yT(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Ub(i.localStore,c);case 36:return g=e.sent,e.next=39,Ob(i.localStore,g);case 39:return l=e.sent,e.next=42,jI(i,ET(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),TT.apply(this,arguments)}function ET(e){return gg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ST(e){var t=by(e);return by(by(t.localStore).persistence).Fs()}function CT(e,t,n,r){return NT.apply(this,arguments)}function NT(){return NT=Ee(Ce().mark((function e(t,n,r,i){var a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=by(t)).da){e.next=3;break}return e.abrupt("return",void yy("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Vb(a.localStore,Ag(o[0]));case 10:return u=e.sent,s=Sk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,hT(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Lb(a.localStore,n,!0);case 17:return oT(a,n,i),e.abrupt("break",20);case 19:wy();case 20:case"end":return e.stop()}}),e)}))),NT.apply(this,arguments)}function AT(e,t,n){return PT.apply(this,arguments)}function PT(){return PT=Ee(Ce().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=RT(t)).da){e.next=45;break}a=v(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return yy("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Ub(i.localStore,u);case 12:return s=e.sent,e.next=15,Ob(i.localStore,s);case 15:return c=e.sent,e.next=18,jI(i,ET(s),c.targetId,!1);case 18:Px(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=v(r),e.prev=30,f=Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Lb(i.localStore,t,!1).then((function(){Rx(i.remoteStore,t),oT(i,t)})).catch(Z_);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),PT.apply(this,arguments)}function RT(e){var t=by(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=HI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$I.bind(null,t),t.sa.zo=TI.bind(null,t.eventManager),t.sa.wa=EI.bind(null,t.eventManager),t}function DT(e){var t=by(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=XI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eT.bind(null,t),t}function OT(e,t,n){var r=by(e);(function(){var e=Ee(Ce().mark((function e(t,n,r){var i,a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=by(e),r=Bk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(RI(i)),a=new PI(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,hT(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=by(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(gy("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var LT=function(){function e(){f(this,e),this.synchronizeTabs=!1}return p(e,[{key:"initialize",value:function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=kx(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return Eb(this.persistence,new Ib,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Zb(tx.Yi,this.M)}},{key:"ga",value:function(e){return new hx}},{key:"terminate",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),MT=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return p(n,[{key:"initialize",value:function(){var e=Ee(Ce().mark((function e(t){var r=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fi(k(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,DT(this.Ta.syncEngine);case 6:return e.next=8,Qx(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return Eb(this.persistence,new Ib,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new rb(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=_b(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?q_.withCacheSize(this.cacheSizeBytes):q_.DEFAULT;return new gb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,mx(),gx(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new hx}}]),n}(LT),FT=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return p(n,[{key:"initialize",value:function(){var e=Ee(Ce().mark((function e(t){var r,i=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fi(k(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof lx,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:wT.bind(null,r),Br:CT.bind(null,r),Lr:AT.bind(null,r),Fs:ST.bind(null,r),Fr:gT.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bT(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=mx();if(!lx.vt(t))throw new Iy(xy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=_b(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(MT),UT=function(){function e(){f(this,e)}return p(e,[{key:"initialize",value:function(){var e=Ee(Ce().mark((function e(t,n){var r=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return YI(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=dT.bind(null,this.syncEngine),e.next=12,lI(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new wI}},{key:"createDatastore",value:function(e){var t,n=kx(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new yx(t));return function(e,t,n,r){return new Ix(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return YI(o.syncEngine,e,0)},a=dx.vt()?new dx:new fx,new Ex(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new UI(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=by(t),yy("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,Nx(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function VT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ee(Ce().mark((function r(){var i;return Ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var qT=function(){function e(t){f(this,e),this.observer=t,this.muted=!1}return p(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),jT=function(){function e(t,n){var r=this;f(this,e),this.Ra=t,this.M=n,this.metadata=new Ty,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return p(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=Ee(Ce().mark((function e(){var t,n,r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new NI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=Ee(Ce().mark((function e(){var t,n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=Ee(Ce().mark((function e(){var t,n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BT=function(){function e(t){f(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return p(e,[{key:"lookup",value:function(){var e=Ee(Ce().mark((function e(t){var n,r=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Iy(xy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ee(Ce().mark((function e(t,n){var r,i,a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=by(t),i=Yk(r.M)+"/documents",a={documents:n.map((function(e){return Kk(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Zk(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());_y(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new hk(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ee(Ce().mark((function e(){var t,n=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=cm.fromPath(t);n.mutations.push(new fk(r,n.precondition(r)))})),e.next=7,function(){var e=Ee(Ce().mark((function e(t,n){var r,i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=by(t),i=Yk(r.M)+"/documents",a={writes:n.map((function(e){return ew(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wy();t=jy.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Iy(xy.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$g.updateTime(t):$g.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(jy.min()))throw new Iy(xy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $g.updateTime(t)}return $g.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),zT=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new wx(this.asyncQueue,"transaction_retry")}return p(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(Ee(Ce().mark((function t(){var n,r;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new BT(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!om(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!pk(t)}return!1}}]),e}(),WT=function(){function e(t,n,r,i){var a=this;f(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fy.UNAUTHENTICATED,this.clientId=My.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yy("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return yy("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return p(e,[{key:"getConfiguration",value:function(){var e=Ee(Ce().mark((function e(){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Iy(xy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ty;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ee(Ce().mark((function n(){var r;return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=vI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function KT(e,t){return GT.apply(this,arguments)}function GT(){return GT=Ee(Ce().mark((function e(t,n){var r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),yy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Sb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),GT.apply(this,arguments)}function HT(e,t){return QT.apply(this,arguments)}function QT(){return QT=Ee(Ce().mark((function e(t,n){var r,i;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,YT(t);case 3:return r=e.sent,yy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return sI(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return sI(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),QT.apply(this,arguments)}function YT(e){return $T.apply(this,arguments)}function $T(){return $T=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return yy("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,KT(t,new LT);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),$T.apply(this,arguments)}function JT(e){return XT.apply(this,arguments)}function XT(){return XT=Ee(Ce().mark((function e(t){return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return yy("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,HT(t,new UT);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),XT.apply(this,arguments)}function ZT(e){return YT(e).then((function(e){return e.persistence}))}function eE(e){return YT(e).then((function(e){return e.localStore}))}function tE(e){return JT(e).then((function(e){return e.remoteStore}))}function nE(e){return JT(e).then((function(e){return e.syncEngine}))}function rE(e){return iE.apply(this,arguments)}function iE(){return iE=Ee(Ce().mark((function e(t){var n,r;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JT(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=VI.bind(null,n.syncEngine),r.onUnlisten=zI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ty;return e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function i(){return Ce().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new qT({next:function(a){t.enqueueAndForget((function(){return xI(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Iy(xy.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Iy(xy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new CI(kg(n.path),a,{includeMetadataChanges:!0,ku:!0});return _I(e,o)},i.next=3,rE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function oE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ty;return e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function i(){return Ce().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new qT({next:function(n){t.enqueueAndForget((function(){return xI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Iy(xy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new CI(n,a,{includeMetadataChanges:!0,ku:!0});return _I(e,o)},i.next=3,rE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var uE=new Map;function sE(e,t,n){if(!n)throw new Iy(xy.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cE(e,t,n,r){if(!0===t&&!0===r)throw new Iy(xy.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function lE(e){if(!cm.isDocumentKey(e))throw new Iy(xy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hE(e){if(cm.isDocumentKey(e))throw new Iy(xy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function fE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":wy()}function dE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Iy(xy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=fE(e);throw new Iy(xy.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function pE(e,t){if(t<=0)throw new Iy(xy.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var vE=function(){function e(t){var n;if(f(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Iy(xy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Iy(xy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,cE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return p(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),yE=function(){function e(t,n,r){f(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vE({}),this._settingsFrozen=!1,t instanceof am?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Iy(xy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new am(e.options.projectId)}(t))}return p(e,[{key:"app",get:function(){if(!this._app)throw new Iy(xy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Iy(xy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sy;switch(e.type){case"gapi":var t=e.client;return _y(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Py(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Iy(xy.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=uE.get(e);t&&(yy("ComponentProvider","Removing Datastore"),uE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function mE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=dE(e,yE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&gy("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=fy.MOCK_USER;else{o=U(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Iy(xy.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new fy(s)}e._authCredentials=new Cy(new Ey(o,u))}}var gE=function(){function e(t,n,r){f(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return p(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new wE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),kE=function(){function e(t,n,r){f(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return p(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),wE=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,kg(i)))._path=i,a.type="collection",a}return p(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new gE(this.firestore,null,new cm(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(kE);function _E(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=be(e),sE("collection","path",t),e instanceof yE){var a=Gy.fromString.apply(Gy,[t].concat(r));return hE(a),new wE(e,null,a)}if(!(e instanceof gE||e instanceof wE))throw new Iy(xy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Gy.fromString.apply(Gy,[t].concat(r)));return hE(o),new wE(e.firestore,null,o)}function bE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=be(e),1===arguments.length&&(t=My.R()),sE("doc","path",t),e instanceof yE){var a=Gy.fromString.apply(Gy,[t].concat(r));return lE(a),new gE(e,null,new cm(a))}if(!(e instanceof gE||e instanceof wE))throw new Iy(xy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Gy.fromString.apply(Gy,[t].concat(r)));return lE(o),new gE(e.firestore,e instanceof wE?e.converter:null,new cm(o))}function xE(e,t){return e=be(e),t=be(t),(e instanceof gE||e instanceof wE)&&(t instanceof gE||t instanceof wE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function IE(e,t){return e=be(e),t=be(t),e instanceof kE&&t instanceof kE&&e.firestore===t.firestore&&Eg(e._query,t._query)&&e.converter===t.converter}var TE=function(){function e(){var t=this;f(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new wx(this,"async_queue_retry"),this.Qa=function(){var e=gx();e&&yy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=gx();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return p(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=gx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new Ty;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=Ee(Ce().mark((function e(){var t=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Hw(e.t0)){e.next=12;break}throw e.t0;case 12:yy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw my("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=pI.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&wy()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=Ee(Ce().mark((function e(){var t;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=v(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=v(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function EE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=v(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var SE=function(){function e(){f(this,e),this._progressObserver={},this._taskCompletionResolver=new Ty,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return p(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),CE=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new TE,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return p(n,[{key:"_terminate",value:function(){return this._firestoreClient||AE(this),this._firestoreClient.terminate()}}]),n}(yE);function NE(e){return e._firestoreClient||AE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function AE(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new im(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new WT(e._authCredentials,e._appCheckCredentials,e._queue,r)}function PE(e,t,n){var r=new Ty;return e.asyncQueue.enqueue(Ee(Ce().mark((function i(){return Ce().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,KT(e,n);case 3:return i.next=5,HT(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===xy.FAILED_PRECONDITION||e.code===xy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function RE(e){return function(e){return e.asyncQueue.enqueue(Ee(Ce().mark((function t(){var n,r;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZT(e);case 2:return n=t.sent,t.next=5,tE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=by(e);return t.wu.delete(0),Sx(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(NE(e=dE(e,CE)))}function DE(e){return function(e){return e.asyncQueue.enqueue(Ee(Ce().mark((function t(){var n,r;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZT(e);case 2:return n=t.sent,t.next=5,tE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=by(t)).wu.add(0),e.next=4,Nx(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(NE(e=dE(e,CE)))}function OE(e,t){var n=NE(e=dE(e,CE)),r=new SE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new jT(e,t)}(function(e,t){if(e instanceof Uint8Array)return VT(e,t);if(e instanceof ArrayBuffer)return VT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,kx(t));e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=OT,t.next=3,nE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function LE(e,t){return function(e,t){return e.asyncQueue.enqueue(Ee(Ce().mark((function n(){return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=by(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,eE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(NE(e=dE(e,CE)),t).then((function(t){return t?new kE(e,null,t.query):null}))}function ME(e){if(e._initialized||e._terminated)throw new Iy(xy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var FE=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Iy(xy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qy(n)}return p(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var UE=function(){function e(t){f(this,e),this._byteString=t}return p(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e($y.fromBase64String(t))}catch(t){throw new Iy(xy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e($y.fromUint8Array(t))}}]),e}(),VE=p((function e(t){f(this,e),this._methodName=t})),qE=function(){function e(t,n){if(f(this,e),!isFinite(t)||t<-90||t>90)throw new Iy(xy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Iy(xy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return p(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Fy(this._lat,e._lat)||Fy(this._long,e._long)}}]),e}(),jE=/^__.*__$/,BE=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ak(e,this.data,this.fieldMask,t,this.fieldTransforms):new ik(e,this.data,t,this.fieldTransforms)}}]),e}(),zE=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return new ak(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function WE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wy()}}var KE=function(){function e(t,n,r,i,a,o){f(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return p(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return hS(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(WE(this.ec)&&jE.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),GE=function(){function e(t,n,r){f(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||kx(t)}return p(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new KE({ec:e,methodName:t,hc:n,path:Qy.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function HE(e){var t=e._freezeSettings(),n=kx(e._databaseId);return new GE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function QE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);uS("Data must be an object, but it was:",o,r);var u,s,c=aS(r,o);if(a.merge)u=new Yy(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=v(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=sS(t,d,n);if(!o.contains(p))throw new Iy(xy.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));fS(h,p)||h.push(p)}}catch(y){f.e(y)}finally{f.f()}u=new Yy(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new BE(new Pm(c),u,s)}var YE=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(VE);function $E(e,t,n){return new KE({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var JE=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){return new Qg(e.path,new qg)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(VE),XE=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).fc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=$E(this,e,!0),n=this.fc.map((function(e){return iS(e,t)})),r=new jg(n);return new Qg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VE),ZE=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).fc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=$E(this,e,!0),n=this.fc.map((function(e){return iS(e,t)})),r=new zg(n);return new Qg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VE),eS=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).dc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=new Kg(e.M,Lg(e.M,this.dc));return new Qg(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VE);function tS(e,t,n,r){var i=e.lc(1,t,n);uS("Data must be an object, but it was:",i,r);var a=[],o=Pm.empty();zy(r,(function(e,r){var u=lS(t,e,n);r=be(r);var s=i.oc(u);if(r instanceof YE)a.push(u);else{var c=iS(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Yy(a);return new zE(o,u,i.fieldTransforms)}function nS(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[sS(t,r,n)],s=[i];if(a.length%2!=0)throw new Iy(xy.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(sS(t,a[c])),s.push(a[c+1]);for(var l=[],h=Pm.empty(),f=u.length-1;f>=0;--f)if(!fS(l,u[f])){var d=u[f],p=s[f];p=be(p);var v=o.oc(d);if(p instanceof YE)l.push(d);else{var y=iS(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new Yy(l);return new zE(h,m,o.fieldTransforms)}function rS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return iS(n,e.lc(r?4:3,t))}function iS(e,t){if(oS(e=be(e)))return uS("Unsupported field value:",t,e),aS(e,t);if(e instanceof VE)return function(e,t){if(!WE(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=v(e);try{for(a.s();!(n=a.n()).done;){var o=iS(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=be(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Lg(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=qy.fromDate(e);return{timestampValue:Vk(t.M,n)}}if(e instanceof qy){var r=new qy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Vk(t.M,r)}}if(e instanceof qE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof UE)return{bytesValue:qk(t.M,e._byteString)};if(e instanceof gE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:zk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(fE(e)))}(e,t)}function aS(e,t){var n={};return Wy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zy(e,(function(e,r){var i=iS(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function oS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof qy||e instanceof qE||e instanceof UE||e instanceof gE||e instanceof VE)}function uS(e,t,n){if(!oS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=fE(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function sS(e,t,n){if((t=be(t))instanceof FE)return t._internalPath;if("string"==typeof t)return lS(e,t);throw hS("Field path arguments must be of type string or ",e,!1,void 0,n)}var cS=new RegExp("[~\\*/\\[\\]]");function lS(e,t,n){if(t.search(cS)>=0)throw hS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(FE,Ie(t.split(".")))._internalPath}catch(r){throw hS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hS(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Iy(xy.INVALID_ARGUMENT,u+e+s)}function fS(e,t){return e.some((function(e){return e.isEqual(t)}))}var dS=function(){function e(t,n,r,i,a){f(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return p(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new gE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new pS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(vS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),pS=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){return Fi(k(n.prototype),"data",this).call(this)}}]),n}(dS);function vS(e,t){return"string"==typeof t?lS(e,t):t instanceof FE?t._internalPath:t._delegate._internalPath}var yS=function(){function e(t,n){f(this,e),this.hasPendingWrites=t,this.fromCache=n}return p(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),mS=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return f(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return p(n,[{key:"exists",value:function(){return Fi(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new gS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(vS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(dS),gS=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fi(k(n.prototype),"data",this).call(this,e)}}]),n}(mS),kS=function(){function e(t,n,r,i){f(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new yS(i.hasPendingWrites,i.fromCache),this.query=r}return p(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new gS(n._firestore,n._userDataWriter,r.key,r,new yS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Iy(xy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new gS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new gS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:wS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function wS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wy()}}function _S(e,t){return e instanceof mS&&t instanceof mS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof kS&&t instanceof kS&&e._firestore===t._firestore&&IE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function bS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Iy(xy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xS=p((function e(){f(this,e)}));function IS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var TS=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return p(n,[{key:"_apply",value:function(e){var t=HE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Iy(xy.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){MS(o,a);var s,c=[],l=v(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(LS(r,e,h))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=LS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||MS(o,a),u=rS(n,"where",o,"in"===a||"not-in"===a);var f=rg.create(i,a,u);return function(e,t){if(t.S()){var n=_g(e);if(null!==n&&!n.isEqual(t.field))throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=wg(e);null!==r&&FS(e,t.field,r)}var i=function(e,t){var n,r=v(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Iy(xy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Iy(xy.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new kE(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(xS);var ES=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return p(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new dg(t,n);return function(e,t){if(null===wg(e)){var n=_g(e);null!==n&&FS(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new kE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new mg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(xS);var SS=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return p(n,[{key:"_apply",value:function(e){return new kE(e.firestore,e.converter,Tg(e._query,this.yc,this.Ic))}}]),n}(xS);var CS=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return p(n,[{key:"_apply",value:function(e){var t=OS(e,this.type,this.Tc,this.Ec);return new kE(e.firestore,e.converter,function(e,t){return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(xS);function NS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new CS("startAt",t,!0)}function AS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new CS("startAfter",t,!1)}var PS=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return p(n,[{key:"_apply",value:function(e){var t=OS(e,this.type,this.Tc,this.Ec);return new kE(e.firestore,e.converter,function(e,t){return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(xS);function RS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PS("endBefore",t,!1)}function DS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PS("endAt",t,!0)}function OS(e,t,n,r){if(n[0]=be(n[0]),n[0]instanceof dS)return function(e,t,n,r,i){if(!r)throw new Iy(xy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=v(xg(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(km(t,r.key));else{var c=r.data.field(s.field);if(tm(c))throw new Iy(xy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new fg(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=HE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Iy(xy.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!bg(e)&&-1!==c.indexOf("/"))throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Gy.fromString(c));if(!cm.isDocumentKey(l))throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new cm(l);u.push(km(t,h))}else{var f=rS(n,r,c);u.push(f)}}return new fg(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function LS(e,t,n){if("string"==typeof(n=be(n))){if(""===n)throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bg(t)&&-1!==n.indexOf("/"))throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Gy.fromString(n));if(!cm.isDocumentKey(r))throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return km(e,new cm(r))}if(n instanceof gE)return km(e,n._key);throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(fE(n),"."))}function MS(e,t){if(!Array.isArray(e)||0===e.length)throw new Iy(xy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Iy(xy.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function FS(e,t,n){if(!n.isEqual(t))throw new Iy(xy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var US={maxAttempts:5},VS=function(){function e(){f(this,e)}return p(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(fm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(em(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wy()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return zy(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new qE(Zy(e.latitude),Zy(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=nm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(rm(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Xy(e);return new qy(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Gy.fromString(e);_y(dw(n));var r=new am(n.get(1),n.get(3)),i=new cm(n.popFirst(5));return r.isEqual(t)||my("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function qS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var jS=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new UE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new gE(this.firestore,null,t)}}]),n}(VS),BS=function(){function e(t,n){f(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=HE(t)}return p(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=zS(e,this._firestore),i=qS(r.converter,t,n),a=QE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,$g.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=zS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=be(t))||t instanceof FE?nS(this._dataReader,"WriteBatch.update",i._key,t,n,o):tS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,$g.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=zS(e,this._firestore);return this._mutations=this._mutations.concat(new hk(t._key,$g.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Iy(xy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function zS(e,t){if((e=be(e)).firestore!==t)throw new Iy(xy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var WS=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new UE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new gE(this.firestore,null,t)}}]),n}(VS);function KS(e){e=dE(e,gE);var t=dE(e.firestore,CE),n=NE(t),r=new WS(t);return function(e,t){var n=new Ty;return e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function r(){return Ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ee(Ce().mark((function e(t,n,r){var i,a;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=by(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Iy(xy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=vI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,eE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new mS(t,r,e._key,n,new yS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function GS(e){e=dE(e,kE);var t=dE(e.firestore,CE),n=NE(t),r=new WS(t);return function(e,t){var n=new Ty;return e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function r(){return Ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ee(Ce().mark((function e(t,n,r){var i,a,o,u,s;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fb(t,n,!0);case 3:i=e.sent,a=new LI(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=vI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,eE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new kS(t,r,e,n)}))}function HS(e,t,n){e=dE(e,gE);var r=dE(e.firestore,CE),i=qS(e.converter,t,n);return JS(r,[QE(HE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,$g.none())])}function QS(e,t,n){e=dE(e,gE);for(var r=dE(e.firestore,CE),i=HE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return JS(r,[("string"==typeof(t=be(t))||t instanceof FE?nS(i,"updateDoc",e._key,t,n,o):tS(i,"updateDoc",e._key,t)).toMutation(e._key,$g.exists(!0))])}function YS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=be(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||EE(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(EE(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof gE)l=dE(e.firestore,CE),h=kg(e._key.path),c={next:function(t){n[s]&&n[s](XS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=dE(e,kE);l=dE(p.firestore,CE),h=p._query;var v=new WS(l);c={next:function(e){n[s]&&n[s](new kS(l,v,p,e))},error:n[s+1],complete:n[s+2]},bS(e._query)}return function(e,t,n,r){var i=new qT(r),a=new CI(t,i,n);return e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_I,t.next=3,rE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xI,t.next=3,rE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(NE(l),h,f,c)}function $S(e,t){return function(e,t){var n=new qT(t);return e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){by(e).bu.add(t),t.next()},t.next=3,rE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function t(){return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){by(e).bu.delete(t)},t.next=3,rE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(NE(e=dE(e,CE)),EE(t)?t:{next:t})}function JS(e,t){return function(e,t){var n=new Ty;return e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function r(){return Ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=KI,r.next=3,nE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(NE(e),t)}function XS(e,t,n){var r=n.docs.get(t._key),i=new WS(e);return new mS(e,i,t._key,r,new yS(n.hasPendingWrites,n.fromCache),t.converter)}var ZS=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r))._firestore=e,i}return p(n,[{key:"get",value:function(e){var t=this,r=zS(e,this._firestore),i=new WS(this._firestore);return Fi(k(n.prototype),"get",this).call(this,e).then((function(e){return new mS(t._firestore,i,r._key,e._document,new yS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){f(this,e),this._firestore=t,this._transaction=n,this._dataReader=HE(t)}return p(e,[{key:"get",value:function(e){var t=this,n=zS(e,this._firestore),r=new jS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return wy();var i=e[0];if(i.isFoundDocument())return new dS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new dS(t._firestore,r,n._key,null,n.converter);throw wy()}))}},{key:"set",value:function(e,t,n){var r=zS(e,this._firestore),i=qS(r.converter,t,n),a=QE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=zS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=be(t))||t instanceof FE?nS(this._dataReader,"Transaction.update",i._key,t,n,o):tS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=zS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function eC(e,t,n){e=dE(e,CE);var r=Object.assign(Object.assign({},US),n);return function(e){if(e.maxAttempts<1)throw new Iy(xy.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Ty;return e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function i(){var a;return Ce().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return JT(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new zT(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(NE(e),(function(n){return t(new ZS(e,n))}),r)}function tC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new XE("arrayUnion",t)}function nC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){dy=e}(bt),vt(new Ne("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new CE(i,new Ny(e.getProvider("auth-internal")),new Dy(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ct(hy,"3.4.9",e),Ct(hy,"3.4.9","esm2017")}();function rC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Iy("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function iC(){if("undefined"===typeof Uint8Array)throw new Iy("unimplemented","Uint8Arrays are not available in this environment.")}function aC(){if("undefined"==typeof atob)throw new Iy("unimplemented","Blobs are unavailable in Firestore in this environment.")}var oC=function(){function e(t){f(this,e),this._delegate=t}return p(e,[{key:"toBase64",value:function(){return aC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return iC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return aC(),new e(UE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return iC(),new e(UE.fromUint8Array(t))}}]),e}();function uC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=v(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var sC=function(){function e(){f(this,e)}return p(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){ME(e=dE(e,CE));var n=NE(e),r=e._freezeSettings(),i=new UT;return PE(n,i,new MT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){ME(e=dE(e,CE));var t=NE(e),n=e._freezeSettings(),r=new UT;return PE(t,r,new FT(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Iy(xy.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ty;return e._queue.enqueueAndForgetEvenWhileRestricted(Ee(Ce().mark((function n(){return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ee(Ce().mark((function e(t){var n;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ww.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ww.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(_b(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),cC=function(){function e(t,n,r){var i=this;f(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof am||(this._appCompat=t)}return p(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||gy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return RE(this._delegate)}},{key:"disableNetwork",value:function(){return DE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&cE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Ty;return e.asyncQueue.enqueueAndForget(Ee(Ce().mark((function n(){return Ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=nT,n.next=3,nE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(NE(e=dE(e,CE)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return $S(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Iy("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new xC(this,_E(this._delegate,e))}catch(t){throw vC(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new pC(this,bE(this._delegate,e))}catch(t){throw vC(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new wC(this,function(e,t){if(e=dE(e,yE),sE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Iy(xy.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new kE(e,null,function(e){return new mg(Gy.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw vC(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return eC(this._delegate,(function(n){return e(new hC(t,n))}))}},{key:"batch",value:function(){var e=this;return NE(this._delegate),new fC(new BS(this._delegate,(function(t){return JS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return OE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return LE(this._delegate,e).then((function(e){return e?new wC(t,e):null}))}}]),e}(),lC=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new oC(new UE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return pC.forKey(t,this.firestore,null)}}]),n}(VS);var hC=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new lC(t)}return p(e,[{key:"get",value:function(e){var t=this,n=IC(e);return this._delegate.get(n).then((function(e){return new gC(t._firestore,new mS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=IC(e);return n?(rC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IC(e);return this._delegate.delete(t),this}}]),e}(),fC=function(){function e(t){f(this,e),this._delegate=t}return p(e,[{key:"set",value:function(e,t,n){var r=IC(e);return n?(rC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),dC=function(){function e(t,n,r){f(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return p(e,[{key:"fromFirestore",value:function(e,t){var n=new gS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kC(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new lC(t),n),i.set(n,a)),a}}]),e}();dC.INSTANCES=new WeakMap;var pC=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lC(t)}return p(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new xC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new xC(this.firestore,_E(this._delegate,e))}catch(t){throw vC(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=be(e))instanceof gE&&xE(this._delegate,e)}},{key:"set",value:function(e,t){t=rC("DocumentReference.set",t);try{return t?HS(this._delegate,e,t):HS(this._delegate,e)}catch(n){throw vC(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?QS(this._delegate,e):QS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw vC(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return JS(dE(e.firestore,CE),[new hk(e._key,$g.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yC(n),a=mC(n,(function(t){return new gC(e.firestore,new mS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return YS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?KS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=dE(e,gE);var t=dE(e.firestore,CE);return aE(NE(t),e._key,{source:"server"}).then((function(n){return XS(t,e,n)}))}(this._delegate):function(e){e=dE(e,gE);var t=dE(e.firestore,CE);return aE(NE(t),e._key).then((function(n){return XS(t,e,n)}))}(this._delegate),t.then((function(e){return new gC(n.firestore,new mS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Iy("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new gE(n._delegate,r,new cm(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new gE(n._delegate,r,t))}}]),e}();function vC(e,t,n){return e.message=e.message.replace(t,n),e}function yC(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!uC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function mC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=uC(e[0])?e[0]:uC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var gC=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"ref",get:function(){return new pC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return _S(this._delegate,e._delegate)}}]),e}(),kC=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||wy()}(void 0!==t),t}}]),n}(gC),wC=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lC(t)}return p(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,IS(this._delegate,function(e,t,n){var r=t,i=vS("where",e);return new TS(i,r,n)}(t,n,r)))}catch(i){throw vC(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,IS(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=vS("orderBy",e);return new ES(n,t)}(t,n)))}catch(r){throw vC(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,IS(this._delegate,function(e){return pE("limit",e),new SS("limit",e,"F")}(t)))}catch(n){throw vC(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,IS(this._delegate,function(e){return pE("limitToLast",e),new SS("limitToLast",e,"L")}(t)))}catch(n){throw vC(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,IS(this._delegate,NS.apply(void 0,arguments)))}catch(t){throw vC(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,IS(this._delegate,AS.apply(void 0,arguments)))}catch(t){throw vC(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,IS(this._delegate,RS.apply(void 0,arguments)))}catch(t){throw vC(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,IS(this._delegate,DS.apply(void 0,arguments)))}catch(t){throw vC(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return IE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?GS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=dE(e,kE);var t=dE(e.firestore,CE),n=NE(t),r=new WS(t);return oE(n,e._query,{source:"server"}).then((function(n){return new kS(t,r,e,n)}))}(this._delegate):function(e){e=dE(e,kE);var t=dE(e.firestore,CE),n=NE(t),r=new WS(t);return bS(e._query),oE(n,e._query).then((function(n){return new kS(t,r,e,n)}))}(this._delegate),t.then((function(e){return new bC(n.firestore,new kS(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yC(n),a=mC(n,(function(t){return new bC(e.firestore,new kS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return YS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),_C=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new kC(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),bC=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"query",get:function(){return new wC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new kC(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new _C(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new kC(n._firestore,r))}))}},{key:"isEqual",value:function(e){return _S(this._delegate,e._delegate)}}]),e}(),xC=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return p(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new pC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new pC(this.firestore,void 0===e?bE(this._delegate):bE(this._delegate,e))}catch(t){throw vC(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=dE(e.firestore,CE),r=bE(e),i=qS(e.converter,t);return JS(n,[QE(HE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,$g.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new pC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return xE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(dC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(wC);function IC(e){return dE(e,gE)}var TC=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I(FE,n)}return p(e,[{key:"isEqual",value:function(e){return(e=be(e))instanceof FE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Qy.keyField().canonicalString())}}]),e}(),EC=function(){function e(t){f(this,e),this._delegate=t}return p(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new JE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new YE("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=tC.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=nC.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new eS("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),SC={Firestore:cC,GeoPoint:qE,Timestamp:qy,Blob:oC,Transaction:hC,WriteBatch:fC,DocumentReference:pC,DocumentSnapshot:gC,Query:wC,QueryDocumentSnapshot:kC,QuerySnapshot:bC,CollectionReference:xC,FieldPath:TC,FieldValue:EC,setLogLevel:function(e){!function(e){py.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ne("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},SC)))}(e,(function(e,t){return new cC(e,t,new sC)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(Xt);var CC="@firebase/database",NC="0.13.0",AC="";function PC(e){AC=e}var RC=function(){function e(t){f(this,e),this.domStorage_=t,this.prefix_="firebase:"}return p(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ee(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Z(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),DC=function(){function e(){f(this,e),this.cache_={},this.isInMemoryStorage=!0}return p(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ne(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),OC=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new RC(t)}}catch(n){}return new DC},LC=OC("localStorage"),MC=OC("sessionStorage"),FC=new qe("@firebase/database"),UC=function(){var e=1;return function(){return e++}}(),VC=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,N(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new he;n.update(t);var r=n.digest();return R.encodeByteArray(r)},qC=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ee(r):r,t+=" "}return t},jC=null,BC=!0,zC=function(e,t){N(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(FC.logLevel=De.VERBOSE,jC=FC.log.bind(FC),t&&MC.set("logging_enabled",!0)):"function"===typeof e?jC=e:(jC=null,MC.remove("logging_enabled"))},WC=function(){if(!0===BC&&(BC=!1,null===jC&&!0===MC.get("logging_enabled")&&zC(!0)),jC){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=qC.apply(null,t);jC(r)}},KC=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];WC.apply(void 0,[e].concat(n))}},GC=function(){var e="FIREBASE INTERNAL ERROR: "+qC.apply(void 0,arguments);FC.error(e)},HC=function(){var e="FIREBASE FATAL ERROR: ".concat(qC.apply(void 0,arguments));throw FC.error(e),new Error(e)},QC=function(){var e="FIREBASE WARNING: "+qC.apply(void 0,arguments);FC.warn(e)},YC=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},$C="[MIN_NAME]",JC="[MAX_NAME]",XC=function(e,t){if(e===t)return 0;if(e===$C||t===JC)return-1;if(t===$C||e===JC)return 1;var n=sN(e),r=sN(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},ZC=function(e,t){return e===t?0:e<t?-1:1},eN=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ee(t))},tN=function e(t){if("object"!==typeof t||null===t)return ee(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=ee(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},nN=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function rN(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var iN=function(e){N(!YC(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var aN=new RegExp("^-?(0*)\\d{1,10}$"),oN=-2147483648,uN=2147483647,sN=function(e){if(aN.test(e)){var t=Number(e);if(t>=oN&&t<=uN)return t}return null},cN=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw QC("Exception was thrown by user callback.",e),t}),Math.floor(0))}},lN=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},hN=function(){function e(t,n){var r=this;f(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return p(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){QC('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),fN=function(){function e(t,n,r){var i=this;f(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return p(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(WC("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',QC(e)}}]),e}(),dN=function(){function e(t){f(this,e),this.accessToken=t}return p(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();dN.OWNER="owner";var pN="5",vN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yN="websocket",mN="long_polling",gN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];f(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=LC.get("host:"+t)||this._host}return p(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&LC.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function kN(e,t,n){var r;if(N("string"===typeof t,"typeof type must == string"),N("object"===typeof n,"typeof params must == object"),t===yN)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==mN)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return rN(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var wN=function(){function e(){f(this,e),this.counters_={}}return p(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ne(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return M(void 0,this.counters_)}}]),e}(),_N={},bN={};function xN(e){var t=e.toString();return _N[t]||(_N[t]=new wN),_N[t]}var IN=function(){function e(t){f(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return p(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&cN((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),TN="start",EN="close",SN=function(){function e(t,n,r,i,a,o,u){var s=this;f(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=KC(t),this.stats_=xN(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),kN(n,mN,e)}}return p(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new IN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(K()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new CN((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===TN)n.id=a,n.password=o;else{if(i!==EN)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=pN,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&vN.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ee(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=D(t),r=nN(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!K()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ee(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!K()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),CN=function(){function e(t,n,r,i){if(f(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,K())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=UC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){WC("frame writing exception"),u.stack&&WC(u.stack),WC(u)}}}return p(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;K()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){WC("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||WC("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),NN=null;"undefined"!==typeof MozWebSocket?NN=MozWebSocket:"undefined"!==typeof WebSocket&&(NN=WebSocket);var AN=function(){function e(t,n,r,i,a,o,u){f(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=KC(this.connId),this.stats_=xN(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return p(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,LC.set("previous_websocket_failure",!0);try{if(K()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(pN,"/").concat(AC,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/xoxo-game-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new NN(this.connURL,[],undefined)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){LC.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Z(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(N(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ee(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=nN(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=pN,!K()&&"undefined"!==typeof location&&location.hostname&&vN.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),kN(e,yN,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==NN&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return LC.isInMemoryStorage||!0===LC.get("previous_websocket_failure")}}]),e}();AN.responsesRequiredToBeHealthy=2,AN.healthyTimeout=3e4;var PN=function(){function e(t){f(this,e),this.initTransports_(t)}return p(e,[{key:"initTransports_",value:function(t){var n=AN&&AN.isAvailable(),r=n&&!AN.previouslyFailed();if(t.webSocketOnly&&(n||QC("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[AN];else{var i,a=this.transports_=[],o=v(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[SN,AN]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();PN.globalTransportInitialized_=!1;var RN=function(){function e(t,n,r,i,a,o,u,s,c,l){f(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=KC("c:"+this.id+":"),this.transportManager_=new PN(n),this.log_("Connection created"),this.start_()}return p(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=lN((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=eN("t",e),n=eN("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=eN("t",e),n=eN("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=eN("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?GC("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):GC("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),pN!==n&&QC("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),lN((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lN((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(LC.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),DN=function(){function e(){f(this,e)}return p(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),ON=function(){function e(t){f(this,e),this.allowedEvents_=t,this.listeners_={},N(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return p(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Ie(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){N(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),LN=function(e){g(n,e);var t=x(n);function n(){var e;return f(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||q()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return p(n,[{key:"getInitialEvent",value:function(e){return N("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(ON),MN=function(){function e(t,n){if(f(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return p(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function FN(){return new MN("")}function UN(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function VN(e){return e.pieces_.length-e.pieceNum_}function qN(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new MN(e.pieces_,t)}function jN(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function BN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function zN(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new MN(t,0)}function WN(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof MN)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new MN(n,0)}function KN(e){return e.pieceNum_>=e.pieces_.length}function GN(e,t){var n=UN(e),r=UN(t);if(null===n)return t;if(n===r)return GN(qN(e),qN(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function HN(e,t){for(var n=BN(e,0),r=BN(t,0),i=0;i<n.length&&i<r.length;i++){var a=XC(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function QN(e,t){if(VN(e)!==VN(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function YN(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(VN(e)>VN(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var $N=p((function e(t,n){f(this,e),this.errorPrefix_=n,this.parts_=BN(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ke(this.parts_[r]);JN(this)}));function JN(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+XN(e))}function XN(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var ZN=function(e){g(n,e);var t=x(n);function n(){var e,r,i;return f(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return p(n,[{key:"getInitialEvent",value:function(e){return N("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(ON),eA=1e3,tA=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u,s,c){var l;if(f(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=KC("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=eA,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!K())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return ZN.getInstance().on("visible",l.onVisible_,y(l)),-1===e.host.indexOf("fblocal")&&LN.getInstance().on("online",l.onOnline_,y(l)),l}return p(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ee(i)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new F,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=te(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=te(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ee(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):GC("Unrecognized action received from server: "+ee(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=eA,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=eA,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=eA),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Ee(Ce().mark((function e(){var t,r,i,a,o,u,s,c,l,f,d,p,v,y,m=this;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){N(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=h(d,2),v=p[0],y=p[1],u?WC("getToken() completed but was canceled"):(WC("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,s=new RN(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){QC(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&QC(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){WC("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){WC("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ie(this.interruptReasons_)&&(this.reconnectDelay_=eA,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return tN(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new MN(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){WC("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){WC("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=v(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=v(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";K()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+AC.replace(/\./g,"-")]=1,q()?e["framework.cordova"]=1:z()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=LN.getInstance().currentlyOnline();return ie(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ne(e,"w")){var n=re(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();QC("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(DN);tA.nextPersistentConnectionId_=0,tA.nextConnectionId_=0;var nA,rA=function(){function e(t,n){f(this,e),this.name=t,this.node=n}return p(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),iA=function(){function e(){f(this,e)}return p(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new rA($C,e),r=new rA($C,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return rA.MIN}}]),e}(),aA=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"compare",value:function(e,t){return XC(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw A("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return rA.MIN}},{key:"maxPost",value:function(){return new rA(JC,nA)}},{key:"makePost",value:function(e,t){return N("string"===typeof e,"KeyIndex indexValue must always be a string."),new rA(e,nA)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return nA},set:function(e){nA=e}}]),n}(iA),oA=new aA,uA=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;f(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return p(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),sA=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:hA.EMPTY_NODE,this.right=null!=a?a:hA.EMPTY_NODE}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return hA.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return hA.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();sA.RED=!0,sA.BLACK=!1;var cA,lA=function(){function e(){f(this,e)}return p(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new sA(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),hA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;f(this,e),this.comparator_=t,this.root_=n}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,sA.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,sA.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new uA(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new uA(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new uA(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new uA(this.root_,null,this.comparator_,!0,e)}}]),e}();function fA(e,t){return XC(e.name,t.name)}function dA(e,t){return XC(e,t)}hA.EMPTY_NODE=new lA;var pA,vA,yA,mA=function(e){return"number"===typeof e?"number:"+iN(e):"string:"+e},gA=function(e){if(e.isLeafNode()){var t=e.val();N("string"===typeof t||"number"===typeof t||"object"===typeof t&&ne(t,".sv"),"Priority must be a string or number.")}else N(e===cA||e.isEmpty(),"priority of unexpected type.");N(e===cA||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},kA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;f(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,N(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),gA(this.priorityNode_)}return p(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return KN(t)?this:".priority"===UN(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=UN(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(N(".priority"!==r||1===VN(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(qN(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+mA(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?iN(this.value_):this.value_,this.lazyHash_=VC(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(N(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return N(i>=0,"Unknown leaf type: "+n),N(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return pA},set:function(e){pA=e}}]),e}();kA.VALUE_TYPE_ORDER=["object","boolean","number","string"];var wA,_A,bA=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?XC(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return rA.MIN}},{key:"maxPost",value:function(){return new rA(JC,new kA("[PRIORITY-POST]",yA))}},{key:"makePost",value:function(e,t){var n=vA(e);return new rA(t,new kA("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(iA),xA=new bA,IA=Math.log(2),TA=function(){function e(t){f(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/IA,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return p(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),EA=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new sA(o,a.node,sA.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new sA(o,a.node,sA.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new sA(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,sA.BLACK):(u(h,sA.BLACK),u(h,sA.RED))}return a}(new TA(e.length));return new hA(r||t,a)},SA={},CA=function(){function e(t,n){f(this,e),this.indexes_=t,this.indexSet_=n}return p(e,[{key:"get",value:function(e){var t=re(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hA?t:null}},{key:"hasIndex",value:function(e){return ne(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){N(t!==oA,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(rA.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?EA(i,t.getCompare()):SA;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(ae(this.indexes_,(function(e,i){var a=re(r.indexSet_,i);if(N(a,"Missing index implementation for "+i),e===SA){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(rA.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),EA(o,a.getCompare())}return SA}var c=n.get(t.name),l=e;return c&&(l=l.remove(new rA(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(ae(this.indexes_,(function(e){if(e===SA)return e;var r=n.get(t.name);return r?e.remove(new rA(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return N(SA&&xA,"ChildrenNode.ts has not been loaded"),wA=wA||new e({".priority":SA},{".priority":xA})}}]),e}(),NA=function(){function e(t,n,r){f(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&gA(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return p(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||_A}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?_A:t}},{key:"getChild",value:function(e){var t=UN(e);return null===t?this:this.getImmediateChild(t).getChild(qN(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(N(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new rA(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?_A:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=UN(e);if(null===n)return t;N(".priority"!==UN(e)||1===VN(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(qN(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(xA,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+mA(this.getPriority().val())+":"),this.forEachChild(xA,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":VC(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new rA(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new rA(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new rA(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,rA.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,rA.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===AA?-1:0}},{key:"withIndex",value:function(t){if(t===oA||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===oA||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(xA),r=t.getIterator(xA),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===oA?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return _A||(_A=new e(new hA(dA),null,CA.Default))}}]),e}();NA.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var AA=new(function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.call(this,new hA(dA),NA.EMPTY_NODE,CA.Default)}return p(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return NA.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(NA));Object.defineProperties(rA,{MIN:{value:new rA($C,NA.EMPTY_NODE)},MAX:{value:new rA(JC,AA)}}),aA.__EMPTY_NODE=NA.EMPTY_NODE,kA.__childrenNodeConstructor=NA,cA=AA,function(e){yA=e}(AA);function PA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return NA.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),N(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new kA(n,PA(t))}if(e instanceof Array){var r=NA.EMPTY_NODE;return rN(e,(function(t,n){if(ne(e,t)&&"."!==t.substring(0,1)){var i=PA(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(PA(t))}var i=[],a=!1,o=e;if(rN(o,(function(e,t){if("."!==e.substring(0,1)){var n=PA(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new rA(e,n)))}})),0===i.length)return NA.EMPTY_NODE;var u=EA(i,fA,(function(e){return e.name}),dA);if(a){var s=EA(i,xA.getCompare());return new NA(u,PA(t),new CA({".priority":s},{".priority":xA}))}return new NA(u,PA(t),CA.Default)}!function(e){vA=e}(PA);var RA=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this)).indexPath_=e,N(!KN(e)&&".priority"!==UN(e),"Can't create PathIndex with empty path or .priority key"),r}return p(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?XC(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=PA(e),r=NA.EMPTY_NODE.updateChild(this.indexPath_,n);return new rA(t,r)}},{key:"maxPost",value:function(){var e=NA.EMPTY_NODE.updateChild(this.indexPath_,AA);return new rA(JC,e)}},{key:"toString",value:function(){return BN(this.indexPath_,0).join("/")}}]),n}(iA),DA=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?XC(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return rA.MIN}},{key:"maxPost",value:function(){return rA.MAX}},{key:"makePost",value:function(e,t){var n=PA(e);return new rA(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(iA),OA=new DA,LA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",MA=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=LA.charAt(n%64),n=Math.floor(n/64);N(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=LA.charAt(t[r]);return N(20===o.length,"nextPushId: Length should be 20."),o}}(),FA=function(e){if("2147483647"===e)return"-";var t=sN(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return JC;var a=n[i],o=LA.charAt(LA.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},UA=function(e){if("-2147483648"===e)return $C;var t=sN(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=LA.charAt(LA.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function VA(e){return{type:"value",snapshotNode:e}}function qA(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function jA(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function BA(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var zA=function(){function e(t){f(this,e),this.index_=t}return p(e,[{key:"updateChild",value:function(e,t,n,r,i,a){N(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(jA(t,o)):N(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(qA(t,n)):a.trackChildChange(BA(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(xA,(function(e,r){t.hasChild(e)||n.trackChildChange(jA(e,r))})),t.isLeafNode()||t.forEachChild(xA,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(BA(t,r,i))}else n.trackChildChange(qA(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?NA.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),WA=function(){function e(t){f(this,e),this.indexedFilter_=new zA(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return p(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new rA(t,n))||(n=NA.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=NA.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(NA.EMPTY_NODE);var i=this;return t.forEachChild(xA,(function(e,t){i.matches(new rA(e,t))||(r=r.updateImmediateChild(e,NA.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),KA=function(){function e(t){f(this,e),this.rangedFilter_=new WA(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return p(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new rA(t,n))||(n=NA.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=NA.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=NA.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(NA.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,s)<=0?f++:r=r.updateImmediateChild(p.name,NA.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;N(u.numChildren()===this.limit_,"");var s=new rA(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(BA(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(jA(t,h));var p=u.updateImmediateChild(t,NA.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(qA(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(jA(c.name,c.node)),i.trackChildChange(qA(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,NA.EMPTY_NODE)):e}}]),e}(),GA=function(){function e(){f(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xA}return p(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$C}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:JC}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===xA}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function HA(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function QA(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function YA(e,t){var n=e.copy();return n.index_=t,n}function $A(e){var t,n={};return e.isDefault()||(e.index_===xA?t="$priority":e.index_===OA?t="$value":e.index_===oA?t="$key":(N(e.index_ instanceof RA,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ee(t),e.startSet_&&(n.startAt=ee(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+ee(e.indexStartName_))),e.endSet_&&(n.endAt=ee(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+ee(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function JA(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==xA&&(t.i=e.index_.toString()),t}var XA=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=KC("p:rest:"),o.listens_={},o}return p(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=$A(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),re(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=$A(e._queryParams),r=e._path.toString(),i=new F;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=h(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+se(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Z(c.responseText)}catch(n){QC("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&QC("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(N(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(DN),ZA=function(){function e(){f(this,e),this.rootNode_=NA.EMPTY_NODE}return p(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function eP(){return{value:null,children:new Map}}function tP(e,t,n){if(KN(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=UN(t);e.children.has(r)||e.children.set(r,eP()),tP(e.children.get(r),t=qN(t),n)}}function nP(e,t){if(KN(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(xA,(function(t,n){tP(e,new MN(t),n)})),nP(e,t)}if(e.children.size>0){var r=UN(t);if(t=qN(t),e.children.has(r))nP(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function rP(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){rP(r,new MN(t.toString()+"/"+e),n)}))}var iP,aP=function(){function e(t){f(this,e),this.collection_=t,this.last_=null}return p(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&rN(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),oP=function(){function e(t,n){f(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new aP(t);var r=1e4+2e4*Math.random();lN(this.reportStats_.bind(this),Math.floor(r))}return p(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;rN(t,(function(t,i){i>0&&ne(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),lN(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function uP(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(iP||(iP={}));var sP,cP=function(){function e(t,n,r){f(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=iP.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return p(e,[{key:"operationForChild",value:function(t){if(KN(this.path)){if(null!=this.affectedTree.value)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new MN(t));return new e(FN(),n,this.revert)}return N(UN(this.path)===t,"operationForChild called for unrelated child."),new e(qN(this.path),this.affectedTree,this.revert)}}]),e}(),lP=function(){function e(t,n){f(this,e),this.source=t,this.path=n,this.type=iP.LISTEN_COMPLETE}return p(e,[{key:"operationForChild",value:function(t){return KN(this.path)?new e(this.source,FN()):new e(this.source,qN(this.path))}}]),e}(),hP=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.snap=r,this.type=iP.OVERWRITE}return p(e,[{key:"operationForChild",value:function(t){return KN(this.path)?new e(this.source,FN(),this.snap.getImmediateChild(t)):new e(this.source,qN(this.path),this.snap)}}]),e}(),fP=function(){function e(t,n,r){f(this,e),this.source=t,this.path=n,this.children=r,this.type=iP.MERGE}return p(e,[{key:"operationForChild",value:function(t){if(KN(this.path)){var n=this.children.subtree(new MN(t));return n.isEmpty()?null:n.value?new hP(this.source,FN(),n.value):new e(this.source,FN(),n)}return N(UN(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,qN(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),dP=function(){function e(t,n,r){f(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return p(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(KN(e))return this.isFullyInitialized()&&!this.filtered_;var t=UN(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),pP=p((function e(t){f(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function vP(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw A("Should only compare child_ events.");var r=new rA(t.childName,t.snapshotNode),i=new rA(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function yP(e,t){return{eventCache:e,serverCache:t}}function mP(e,t,n,r){return yP(new dP(t,n,r),e.serverCache)}function gP(e,t,n,r){return yP(e.eventCache,new dP(t,n,r))}function kP(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function wP(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var _P=function(){return sP||(sP=new hA(ZC)),sP},bP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_P();f(this,e),this.value=t,this.children=n}return p(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:FN(),value:this.value};if(KN(e))return null;var n=UN(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(qN(e),t);return null!=i?{path:WN(new MN(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(KN(t))return this;var n=UN(t),r=this.children.get(n);return null!==r?r.subtree(qN(t)):new e(null)}},{key:"set",value:function(t,n){if(KN(t))return new e(n,this.children);var r=UN(t),i=(this.children.get(r)||new e(null)).set(qN(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(KN(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=UN(t),r=this.children.get(n);if(r){var i,a=r.remove(qN(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(KN(e))return this.value;var t=UN(e),n=this.children.get(t);return n?n.get(qN(e)):null}},{key:"setTree",value:function(t,n){if(KN(t))return n;var r,i=UN(t),a=(this.children.get(i)||new e(null)).setTree(qN(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(FN(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(WN(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,FN(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(KN(e))return null;var i=UN(e),a=this.children.get(i);return a?a.findOnPath_(qN(e),WN(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,FN(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(KN(t))return this;this.value&&r(n,this.value);var i=UN(t),a=this.children.get(i);return a?a.foreachOnPath_(qN(t),WN(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(FN(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(WN(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return rN(t,(function(e,t){n=n.set(new MN(e),t)})),n}}]),e}(),xP=function(){function e(t){f(this,e),this.writeTree_=t}return p(e,null,[{key:"empty",value:function(){return new e(new bP(null))}}]),e}();function IP(e,t,n){if(KN(t))return new xP(new bP(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=GN(i,t);return a=a.updateChild(o,n),new xP(e.writeTree_.set(i,a))}var u=new bP(n),s=e.writeTree_.setTree(t,u);return new xP(s)}function TP(e,t,n){var r=e;return rN(n,(function(e,n){r=IP(r,WN(t,e),n)})),r}function EP(e,t){if(KN(t))return xP.empty();var n=e.writeTree_.setTree(t,new bP(null));return new xP(n)}function SP(e,t){return null!=CP(e,t)}function CP(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(GN(n.path,t)):null}function NP(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(xA,(function(e,n){t.push(new rA(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new rA(e,n.value))})),t}function AP(e,t){if(KN(t))return e;var n=CP(e,t);return new xP(null!=n?new bP(n):e.writeTree_.subtree(t))}function PP(e){return e.writeTree_.isEmpty()}function RP(e,t){return DP(FN(),e.writeTree_,t)}function DP(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(N(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=DP(WN(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(WN(e,".priority"),r)),n}function OP(e,t){return QP(t,e)}function LP(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function MP(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));N(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&FP(u,r.path)?i=!1:YN(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=VP(e.allWrites,UP,FN()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=EP(e.visibleWrites,r.path):rN(r.children,(function(t){e.visibleWrites=EP(e.visibleWrites,WN(r.path,t))}));return!0}return!1}function FP(e,t){if(e.snap)return YN(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&YN(WN(e.path,n),t))return!0;return!1}function UP(e){return e.visible}function VP(e,t,n){for(var r=xP.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)YN(n,o)?r=IP(r,u=GN(n,o),a.snap):YN(o,n)&&(u=GN(o,n),r=IP(r,FN(),a.snap.getChild(u)));else{if(!a.children)throw A("WriteRecord should have .snap or .children");if(YN(n,o))r=TP(r,u=GN(n,o),a.children);else if(YN(o,n))if(KN(u=GN(o,n)))r=TP(r,FN(),a.children);else{var s=re(a.children,UN(u));if(s){var c=s.getChild(qN(u));r=IP(r,FN(),c)}}}}}return r}function qP(e,t,n,r,i){if(r||i){var a=AP(e.visibleWrites,t);if(!i&&PP(a))return n;if(i||null!=n||SP(a,FN())){return RP(VP(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(YN(e.path,t)||YN(t,e.path))}),t),n||NA.EMPTY_NODE)}return null}var o=CP(e.visibleWrites,t);if(null!=o)return o;var u=AP(e.visibleWrites,t);return PP(u)?n:null!=n||SP(u,FN())?RP(u,n||NA.EMPTY_NODE):null}function jP(e,t,n,r){return qP(e.writeTree,e.treePath,t,n,r)}function BP(e,t){return function(e,t,n){var r=NA.EMPTY_NODE,i=CP(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(xA,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=AP(e.visibleWrites,t);return n.forEachChild(xA,(function(e,t){var n=RP(AP(a,new MN(e)),t);r=r.updateImmediateChild(e,n)})),NP(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return NP(AP(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function zP(e,t,n,r){return function(e,t,n,r,i){N(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=WN(t,n);if(SP(e.visibleWrites,a))return null;var o=AP(e.visibleWrites,a);return PP(o)?i.getChild(n):RP(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function WP(e,t){return function(e,t){return CP(e.visibleWrites,t)}(e.writeTree,WN(e.treePath,t))}function KP(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=AP(e.visibleWrites,t),c=CP(s,FN());if(null!=c)u=c;else{if(null==n)return[];u=RP(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function GP(e,t,n){return function(e,t,n,r){var i=WN(t,n),a=CP(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?RP(AP(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function HP(e,t){return QP(WN(e.treePath,t),e.writeTree)}function QP(e,t){return{treePath:e,writeTree:t}}var YP=function(){function e(){f(this,e),this.changeMap=new Map}return p(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;N("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),N(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,BA(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,jA(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,qA(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw A("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,BA(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),$P=new(function(){function e(){f(this,e)}return p(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),JP=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return p(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new dP(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return GP(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wP(this.viewCache_),i=KP(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function XP(e,t,n,r,i){var a,o,u=new YP;if(n.type===iP.OVERWRITE){var s=n;s.source.fromUser?a=tR(e,t,s.path,s.snap,r,i,u):(N(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!KN(s.path),a=eR(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===iP.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=WN(n,r);nR(t,UN(c))&&(u=tR(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=WN(n,r);nR(t,UN(c))||(u=tR(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(N(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=iR(e,t,c.path,c.children,r,i,o,u))}else if(n.type===iP.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=WP(r,n))return t;var u,s=new JP(r,t,i),c=t.eventCache.getNode();if(KN(n)||".priority"===UN(n)){var l;if(t.serverCache.isFullyInitialized())l=jP(r,wP(t));else{var h=t.serverCache.getNode();N(h instanceof NA,"serverChildren would be complete if leaf node"),l=BP(r,h)}l=l,u=e.filter.updateFullNode(c,l,a)}else{var f=UN(n),d=GP(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,qN(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,NA.EMPTY_NODE,qN(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=jP(r,wP(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=WP(r,FN()),mP(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=WP(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(KN(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return eR(e,t,n,s.getNode().getChild(n),i,a,u,o);if(KN(n)){var c=new bP(null);return s.getNode().forEachChild(oA,(function(e,t){c=c.set(new MN(e),t)})),iR(e,t,n,c,i,a,u,o)}return t}var l=new bP(null);return r.foreach((function(e,t){var r=WN(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),iR(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==iP.LISTEN_COMPLETE)throw A("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=gP(t,a.getNode(),a.isFullyInitialized()||KN(n),a.isFiltered());return ZP(e,o,n,r,$P,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=kP(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(VA(kP(t)))}}(t,a,h),{viewCache:a,changes:h}}function ZP(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=WP(r,n))return t;if(KN(n))if(N(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=wP(t),l=BP(r,c instanceof NA?c:NA.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=jP(r,wP(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=UN(n);if(".priority"===f){N(1===VN(n),"Can't have a priority with additional path components");var d=s.getNode(),p=zP(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=qN(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=zP(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=GP(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return mP(t,o,s.isFullyInitialized()||KN(n),e.filter.filtersNodes())}function eR(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(KN(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=UN(n);if(!c.isCompleteForPath(n)&&VN(n)>1)return t;var d=qN(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,$P,null)}var v=gP(t,s,c.isFullyInitialized()||KN(n),l.filtersNodes());return ZP(e,v,n,i,new JP(i,v,a),u)}function tR(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new JP(i,t,a);if(KN(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=mP(t,s,!0,e.filter.filtersNodes());else{var h=UN(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=mP(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=qN(n),p=c.getNode().getImmediateChild(h);if(KN(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===jN(d)&&v.getChild(zN(d)).isEmpty()?v:v.updateChild(d,r):NA.EMPTY_NODE}if(p.equals(f))u=t;else u=mP(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function nR(e,t){return e.eventCache.isCompleteForChild(t)}function rR(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function iR(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=KN(n)?r:new bP(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=rR(0,t.serverCache.getNode().getImmediateChild(n),r);c=eR(e,c,new MN(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var h=rR(0,t.serverCache.getNode().getImmediateChild(n),r);c=eR(e,c,new MN(n),h,i,a,o,u)}})),c}var aR,oR=function(){function e(t,n){f(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new zA(i.getIndex()),o=(r=i).loadsAllData()?new zA(r.getIndex()):r.hasLimit()?new KA(r):new WA(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(NA.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(NA.EMPTY_NODE,s.getNode(),null),h=new dP(c,u.isFullyInitialized(),a.filtersNodes()),d=new dP(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=yP(d,h),this.eventGenerator_=new pP(this.query_)}return p(e,[{key:"query",get:function(){return this.query_}}]),e}();function uR(e,t){var n=wP(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!KN(t)&&!n.getImmediateChild(UN(t)).isEmpty())?n.getChild(t):null}function sR(e){return 0===e.eventRegistrations_.length}function cR(e,t,n){var r=[];if(n){N(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function lR(e,t,n,r){t.type===iP.MERGE&&null!==t.source.queryId&&(N(wP(e.viewCache_),"We should always have a full cache before handling merges"),N(kP(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=XP(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,N(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),N(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),N(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,hR(e,u.changes,u.viewCache.eventCache.getNode(),null)}function hR(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),vP(e,i,"child_removed",t,r,n),vP(e,i,"child_added",t,r,n),vP(e,i,"child_moved",a,r,n),vP(e,i,"child_changed",t,r,n),vP(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var fR,dR=p((function e(){f(this,e),this.views=new Map}));function pR(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return N(null!=a,"SyncTree gave us an op for an invalid query."),lR(a,t,n,r)}var o,u=[],s=v(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(lR(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function vR(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=jP(n,i?r:null),s=!1;u?s=!0:r instanceof NA?(u=BP(n,r),s=!1):(u=NA.EMPTY_NODE,s=!1);var c=yP(new dP(u,s,!1),new dP(r,i,!1));return new oR(t,c)}return o}function yR(e,t,n,r,i,a){var o=vR(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xA,(function(e,t){r.push(qA(e,t))})),n.isFullyInitialized()&&r.push(VA(n.getNode())),hR(e,r,n.getNode(),t)}(o,n)}function mR(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=bR(e);if("default"===i){var s,c=v(e.views.entries());try{for(c.s();!(s=c.n()).done;){var l=h(s.value,2),f=l[0],d=l[1];o=o.concat(cR(d,n,r)),sR(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(y){c.e(y)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(cR(p,n,r)),sR(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!bR(e)&&a.push(new(N(aR,"Reference.ts has not been loaded"),aR)(t._repo,t._path)),{removed:a,events:o}}function gR(e){var t,n=[],r=v(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function kR(e,t){var n,r=null,i=v(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||uR(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function wR(e,t){if(t._queryParams.loadsAllData())return xR(e);var n=t._queryIdentifier;return e.views.get(n)}function _R(e,t){return null!=wR(e,t)}function bR(e){return null!=xR(e)}function xR(e){var t,n=v(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var IR=1,TR=p((function e(t){f(this,e),this.listenProvider_=t,this.syncPointTree_=new bP(null),this.pendingWriteTree_={visibleWrites:xP.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function ER(e,t,n,r,i){return function(e,t,n,r,i){N(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=IP(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?OR(e,new hP({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function SR(e,t,n,r){!function(e,t,n,r){N(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=TP(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=bP.fromObject(n);return OR(e,new fP({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function CR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=LP(e.pendingWriteTree_,t),i=MP(e.pendingWriteTree_,t);if(i){var a=new bP(null);return null!=r.snap?a=a.set(FN(),!0):rN(r.children,(function(e){a=a.set(new MN(e),!0)})),OR(e,new cP(r.path,a,n))}return[]}function NR(e,t,n){return OR(e,new hP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function AR(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||_R(a,t))){var u=mR(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var s=u.removed;o=u.events;var c=-1!==s.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return bR(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&bR(t))return[xR(t)];var r=[];return t&&(r=gR(t)),rN(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,y=FR(e,p);e.listenProvider_.startListening(zR(v),UR(e,v),y.hashFn,y.onComplete)}}if(!l&&s.length>0&&!r)if(c){e.listenProvider_.stopListening(zR(t),null)}else s.forEach((function(t){var n=e.queryToTagMap.get(VR(t));e.listenProvider_.stopListening(zR(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=VR(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,s)}return o}function PR(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=GN(e,r);i=i||kR(t,n),a=a||bR(t)}));var o,u=e.syncPointTree_.get(r);(u?(a=a||bR(u),i=i||kR(u,FN())):(u=new dR,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?o=!0:(o=!1,i=NA.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=kR(t,FN());n&&(i=i.updateImmediateChild(e,n))})));var s=_R(u,t);if(!s&&!t._queryParams.loadsAllData()){var c=VR(t);N(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=IR++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var h=yR(u,t,n,OP(e.pendingWriteTree_,r),i,o);if(!s&&!a){var f=wR(u,t);h=h.concat(function(e,t,n){var r=t._path,i=UR(e,t),a=FR(e,n),o=e.listenProvider_.startListening(zR(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)N(!bR(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!KN(e)&&t&&bR(t))return[xR(t).query];var r=[];return t&&(r=r.concat(gR(t).map((function(e){return e.query})))),rN(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(zR(l),UR(e,l))}return o}(e,t,f))}return h}function RR(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=kR(n,GN(e,t));if(r)return r}));return qP(r,t,i,n,!0)}function DR(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=GN(e,n);r=r||kR(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||kR(i,FN()):(i=new dR,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new dP(r,!0,!1):null;return function(e){return kP(e.viewCache_)}(vR(i,t,OP(e.pendingWriteTree_,t._path),a?o.getNode():NA.EMPTY_NODE,a))}function OR(e,t){return LR(t,e.syncPointTree_,null,OP(e.pendingWriteTree_,FN()))}function LR(e,t,n,r){if(KN(e.path))return MR(e,t,n,r);var i=t.get(FN());null==n&&null!=i&&(n=kR(i,FN()));var a=[],o=UN(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=HP(r,o);a=a.concat(LR(u,s,c,l))}return i&&(a=a.concat(pR(i,e,r,n))),a}function MR(e,t,n,r){var i=t.get(FN());null==n&&null!=i&&(n=kR(i,FN()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=HP(r,t),s=e.operationForChild(t);s&&(a=a.concat(MR(s,i,o,u)))})),i&&(a=a.concat(pR(i,e,r,n))),a}function FR(e,t){var n=t.query,r=UR(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||NA.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=qR(e,n);if(r){var i=jR(r),a=i.path,o=i.queryId,u=GN(a,t);return BR(e,a,new lP(uP(o),u))}return[]}(e,n._path,r):function(e,t){return OR(e,new lP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return AR(e,n,null,i)}}}function UR(e,t){var n=VR(t);return e.queryToTagMap.get(n)}function VR(e){return e._path.toString()+"$"+e._queryIdentifier}function qR(e,t){return e.tagToQueryMap.get(t)}function jR(e){var t=e.indexOf("$");return N(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new MN(e.substr(0,t))}}function BR(e,t,n){var r=e.syncPointTree_.get(t);return N(r,"Missing sync point for query tag that we're tracking"),pR(r,n,OP(e.pendingWriteTree_,t),null)}function zR(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(N(fR,"Reference.ts has not been loaded"),fR)(e._repo,e._path):e}var WR=function(){function e(t){f(this,e),this.node_=t}return p(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),KR=function(){function e(t,n){f(this,e),this.syncTree_=t,this.path_=n}return p(e,[{key:"getImmediateChild",value:function(t){var n=WN(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return RR(this.syncTree_,this.path_)}}]),e}(),GR=function(e,t,n){return e&&"object"===typeof e?(N(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?HR(e[".sv"],t,n):"object"===typeof e[".sv"]?QR(e[".sv"],t):void N(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},HR=function(e,t,n){if("timestamp"===e)return n.timestamp;N(!1,"Unexpected server value: "+e)},QR=function(e,t,n){e.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&N(!1,"Unexpected increment value: "+r);var i=t.node();if(N(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},YR=function(e,t,n,r){return JR(t,new KR(n,e),r)},$R=function(e,t,n){return JR(e,new WR(t),n)};function JR(e,t,n){var r,i=e.getPriority().val(),a=GR(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=GR(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new kA(u,PA(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new kA(a))),s.forEachChild(xA,(function(e,i){var a=JR(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var XR=p((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};f(this,e),this.name=t,this.parent=n,this.node=r}));function ZR(e,t){for(var n=t instanceof MN?t:new MN(t),r=e,i=UN(n);null!==i;){var a=re(r.node.children,i)||{children:{},childCount:0};r=new XR(i,r,a),i=UN(n=qN(n))}return r}function eD(e){return e.node.value}function tD(e,t){e.node.value=t,oD(e)}function nD(e){return e.node.childCount>0}function rD(e,t){rN(e.node.children,(function(n,r){t(new XR(n,e,r))}))}function iD(e,t,n,r){n&&!r&&t(e),rD(e,(function(e){iD(e,t,!0,r)})),n&&r&&t(e)}function aD(e){return new MN(null===e.parent?e.name:aD(e.parent)+"/"+e.name)}function oD(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===eD(e)&&!nD(e)}(n),i=ne(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,oD(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,oD(e))}(e.parent,e.name,e)}var uD=/[\[\].#$\/\u0000-\u001F\u007F]/,sD=/[\[\].#$\u0000-\u001F\u007F]/,cD=10485760,lD=function(e){return"string"===typeof e&&0!==e.length&&!uD.test(e)},hD=function(e){return"string"===typeof e&&0!==e.length&&!sD.test(e)},fD=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!YC(e)||e&&"object"===typeof e&&ne(e,".sv")},dD=function(e,t,n,r){r&&void 0===t||pD(ye(e,"value"),t,n)},pD=function e(t,n,r){var i=r instanceof MN?new $N(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+XN(i));if("function"===typeof n)throw new Error(t+"contains a function "+XN(i)+" with contents = "+n.toString());if(YC(n))throw new Error(t+"contains "+n.toString()+" "+XN(i));if("string"===typeof n&&n.length>cD/3&&ke(n)>cD)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+XN(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(rN(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!lD(n)))throw new Error(t+" contains an invalid key ("+n+") "+XN(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=ke(s),JN(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ke(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+XN(i)+" in addition to actual children.")}},vD=function(e,t,n,r){if(!r||void 0!==t){var i=ye(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];rN(t,(function(e,t){var r=new MN(e);if(pD(i,t,WN(n,r)),".priority"===jN(r)&&!fD(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=BN(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!lD(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(HN);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&YN(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},yD=function(e,t,n){if(!n||void 0!==t){if(YC(t))throw new Error(ye(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fD(t))throw new Error(ye(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},mD=function(e,t,n,r){if((!r||void 0!==n)&&!lD(n))throw new Error(ye(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gD=function(e,t,n,r){if((!r||void 0!==n)&&!hD(n))throw new Error(ye(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kD=function(e,t){if(".info"===UN(t))throw new Error(e+" failed = Can't modify data under /.info/")},wD=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!lD(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),hD(e)}(n))throw new Error(ye(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},_D=p((function e(){f(this,e),this.eventLists_=[],this.recursionDepth_=0}));function bD(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||QN(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function xD(e,t,n){bD(e,n),TD(e,(function(e){return QN(e,t)}))}function ID(e,t,n){bD(e,n),TD(e,(function(e){return YN(e,t)||YN(t,e)}))}function TD(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(ED(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function ED(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();jC&&WC("event: "+n.toString()),cN(r)}}}var SD="repo_interrupt",CD=function(){function e(t,n,r,i){f(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _D,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=eP(),this.transactionQueueTree_=new XR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return p(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function ND(e,t,n){if(e.stats_=xN(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new XA(e.repoInfo_,(function(t,n,r,i){RD(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return DD(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ee(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new tA(e.repoInfo_,t,(function(t,n,r,i){RD(e,t,n,r,i)}),(function(t){DD(e,t)}),(function(t){!function(e,t){rN(t,(function(t,n){OD(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return bN[n]||(bN[n]=t()),bN[n]}(e.repoInfo_,(function(){return new oP(e.stats_,e.server_)})),e.infoData_=new ZA,e.infoSyncTree_=new TR({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=NR(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),OD(e,"connected",!1),e.serverSyncTree_=new TR({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);ID(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function AD(e){var t=e.infoData_.getNode(new MN(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function PD(e){return(t=(t={timestamp:AD(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function RD(e,t,n,r,i){e.dataUpdateCount++;var a=new MN(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=ae(n,(function(e){return PA(e)}));o=function(e,t,n,r){var i=qR(e,r);if(i){var a=jR(i),o=a.path,u=a.queryId,s=GN(o,t),c=bP.fromObject(n);return BR(e,o,new fP(uP(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=PA(n);o=function(e,t,n,r){var i=qR(e,r);if(null!=i){var a=jR(i),o=a.path,u=a.queryId,s=GN(o,t);return BR(e,o,new hP(uP(u),s,n))}return[]}(e.serverSyncTree_,a,s,i)}else if(r){var c=ae(n,(function(e){return PA(e)}));o=function(e,t,n){var r=bP.fromObject(n);return OR(e,new fP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=PA(n);o=NR(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=GD(e,a)),ID(e.eventQueue_,h,o)}function DD(e,t){OD(e,"connected",t),!1===t&&function(e){jD(e,"onDisconnectEvents");var t=PD(e),n=eP();rP(e.onDisconnect_,FN(),(function(r,i){var a=YR(r,i,e.serverSyncTree_,t);tP(n,r,a)}));var r=[];rP(n,FN(),(function(t,n){r=r.concat(NR(e.serverSyncTree_,t,n));var i=JD(e,t);GD(e,i)})),e.onDisconnect_=eP(),ID(e.eventQueue_,FN(),r)}(e)}function OD(e,t,n){var r=new MN("/.info/"+t),i=PA(n);e.infoData_.updateSnapshot(r,i);var a=NR(e.infoSyncTree_,r,i);ID(e.eventQueue_,r,a)}function LD(e){return e.nextWriteId_++}function MD(e,t,n,r,i){jD(e,"set",{path:t.toString(),value:n,priority:r});var a=PD(e),o=PA(n,r),u=RR(e.serverSyncTree_,t),s=$R(o,u,a),c=LD(e),l=ER(e.serverSyncTree_,t,s,c,!0);bD(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||QC("set at "+t+" failed: "+n);var o=CR(e.serverSyncTree_,c,!a);ID(e.eventQueue_,t,o),BD(e,i,n,r)}));var h=JD(e,t);GD(e,h),ID(e.eventQueue_,h,[])}function FD(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&nP(e.onDisconnect_,t),BD(e,n,r,i)}))}function UD(e,t,n,r){var i=PA(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&tP(e.onDisconnect_,t,i),BD(e,r,n,a)}))}function VD(e,t,n){var r;r=".info"===UN(t._path)?AR(e.infoSyncTree_,t,n):AR(e.serverSyncTree_,t,n),xD(e.eventQueue_,t._path,r)}function qD(e){e.persistentConnection_&&e.persistentConnection_.interrupt(SD)}function jD(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];WC.apply(void 0,[t].concat(r))}function BD(e,t,n,r){t&&cN((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function zD(e,t,n){return RR(e.serverSyncTree_,t,n)||NA.EMPTY_NODE}function WD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||$D(e,t),eD(t)){var n=QD(e,t);N(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&KD(e,aD(t),n)}else nD(t)&&rD(t,(function(t){WD(e,t)}))}function KD(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=zD(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];N(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=GN(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){jD(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(CR(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);$D(e,ZR(e.transactionQueueTree_,t)),WD(e,e.transactionQueueTree_),ID(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)cN(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{QC("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}GD(e,t)}}),o)}function GD(e,t){var n=HD(e,t),r=aD(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=GN(n,s.path),l=!1,h=void 0;if(N(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(CR(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,h="maxretry",i=i.concat(CR(e.serverSyncTree_,s.currentWriteId,!0));else{var f=zD(e,s.path,o);s.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){pD("transaction failed: Data returned ",d,s.path);var p=PA(d);"object"===typeof d&&null!=d&&ne(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=s.currentWriteId,y=PD(e),m=$R(p,f,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=LD(e),o.splice(o.indexOf(v),1),i=(i=i.concat(ER(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(CR(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(CR(e.serverSyncTree_,s.currentWriteId,!0))}ID(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},s=0;s<t.length;s++)u(s);$D(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)cN(r[c]);WD(e,e.transactionQueueTree_)}(e,QD(e,n),r),r}function HD(e,t){var n,r=e.transactionQueueTree_;for(n=UN(t);null!==n&&void 0===eD(r);)r=ZR(r,n),n=UN(t=qN(t));return r}function QD(e,t){var n=[];return YD(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function YD(e,t,n){var r=eD(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);rD(t,(function(t){YD(e,t,n)}))}function $D(e,t){var n=eD(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,tD(t,n.length>0?n:void 0)}rD(t,(function(t){$D(e,t)}))}function JD(e,t){var n=aD(HD(e,t)),r=ZR(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){XD(e,t)})),XD(e,r),iD(r,(function(t){XD(e,t)})),n}function XD(e,t){var n=eD(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(N(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(N(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(CR(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?tD(t,void 0):n.length=a+1,ID(e.eventQueue_,aD(t),i);for(var u=0;u<r.length;u++)cN(r[u])}}var ZD=function(e,t){var n=eO(e),r=n.namespace;"firebase.com"===n.domain&&HC(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||HC("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&QC("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new gN(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new MN(n.pathString)}},eO=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=v(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):QC("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},tO=function(){function e(t,n,r,i){f(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return p(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+ee(this.snapshot.exportVal())}}]),e}(),nO=function(){function e(t,n,r){f(this,e),this.eventRegistration=t,this.error=n,this.path=r}return p(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),rO=function(){function e(t,n){f(this,e),this.snapshotCallback=t,this.cancelCallback=n}return p(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),iO=function(){function e(t,n){f(this,e),this._repo=t,this._path=n}return p(e,[{key:"cancel",value:function(){var e=new F;return FD(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){kD("OnDisconnect.remove",this._path);var e=new F;return UD(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){kD("OnDisconnect.set",this._path),dD("OnDisconnect.set",e,this._path,!1);var t=new F;return UD(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){kD("OnDisconnect.setWithPriority",this._path),dD("OnDisconnect.setWithPriority",e,this._path,!1),yD("OnDisconnect.setWithPriority",t,!1);var n=new F;return function(e,t,n,r,i){var a=PA(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&tP(e.onDisconnect_,t,a),BD(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){kD("OnDisconnect.update",this._path),vD("OnDisconnect.update",e,this._path,!1);var t=new F;return function(e,t,n,r){if(ie(n))return WC("onDisconnect().update() called with empty data.  Don't do anything."),void BD(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&rN(n,(function(n,r){var i=PA(r);tP(e.onDisconnect_,WN(t,n),i)})),BD(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),aO=function(){function e(t,n,r,i){f(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return p(e,[{key:"key",get:function(){return KN(this._path)?null:jN(this._path)}},{key:"ref",get:function(){return new cO(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=JA(this._queryParams),t=tN(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return JA(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=be(t))instanceof e))return!1;var n=this._repo===t._repo,r=QN(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function oO(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function uO(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===oA){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==$C)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==JC)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===xA){if(null!=t&&!fD(t)||null!=n&&!fD(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(N(e.getIndex()instanceof RA||e.getIndex()===OA,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function sO(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var cO=function(e){g(n,e);var t=x(n);function n(e,r){return f(this,n),t.call(this,e,r,new GA,!1)}return p(n,[{key:"parent",get:function(){var e=zN(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(aO),lO=function(){function e(t,n,r){f(this,e),this._node=t,this.ref=n,this._index=r}return p(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new MN(t),r=dO(this.ref,t);return new e(this._node.getChild(n),r,xA)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,dO(n.ref,r),xA))}))}},{key:"hasChild",value:function(e){var t=new MN(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function hO(e,t){return(e=be(e))._checkNotDeleted("ref"),void 0!==t?dO(e._root,t):e._root}function fO(e,t){(e=be(e))._checkNotDeleted("refFromURL");var n=ZD(t,e._repo.repoInfo_.nodeAdmin);wD("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||HC("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),hO(e,n.path.toString())}function dO(e,t){var n,r,i,a;return null===UN((e=be(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),gD(n,r,i,a)):gD("child","path",t,!1),new cO(e._repo,WN(e._path,t))}function pO(e,t){e=be(e),kD("push",e._path),dD("push",t,e._path,!0);var n,r=AD(e._repo),i=MA(r),a=dO(e,i),o=dO(e,i);return n=null!=t?yO(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function vO(e){return kD("remove",e._path),yO(e,null)}function yO(e,t){e=be(e),kD("set",e._path),dD("set",t,e._path,!1);var n=new F;return MD(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function mO(e,t){e=be(e),kD("setPriority",e._path),yD("setPriority",t,!1);var n=new F;return MD(e._repo,WN(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function gO(e,t,n){if(kD("setWithPriority",e._path),dD("setWithPriority",t,e._path,!1),yD("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new F;return MD(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function kO(e,t){vD("update",t,e._path,!1);var n=new F;return function(e,t,n,r){jD(e,"update",{path:t.toString(),value:n});var i=!0,a=PD(e),o={};if(rN(n,(function(n,r){i=!1,o[n]=YR(WN(t,n),PA(r),e.serverSyncTree_,a)})),i)WC("update() called with empty data.  Don't do anything."),BD(0,r,"ok",void 0);else{var u=LD(e),s=SR(e.serverSyncTree_,t,o,u);bD(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||QC("update at "+t+" failed: "+n);var o=CR(e.serverSyncTree_,u,!a),s=o.length>0?GD(e,t):t;ID(e.eventQueue_,s,o),BD(0,r,n,i)})),rN(n,(function(n){var r=JD(e,WN(t,n));GD(e,r)})),ID(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function wO(e){return function(e,t){var n=DR(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=PA(n).withIndex(t._queryParams.getIndex()),i=NR(e.serverSyncTree_,t._path,r);return xD(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return jD(e,"get for query "+ee(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=be(e))._repo,e).then((function(t){return new lO(t,new cO(e._repo,e._path),e._queryParams.getIndex())}))}var _O=function(){function e(t){f(this,e),this.callbackContext=t}return p(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new tO("value",this,new lO(e.snapshotNode,new cO(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new nO(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),bO=function(){function e(t,n){f(this,e),this.eventType=t,this.callbackContext=n}return p(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new nO(this,e,t):null}},{key:"createEvent",value:function(e,t){N(null!=e.childName,"Child events should have a childName.");var n=dO(new cO(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new tO(e.type,this,new lO(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function xO(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){VD(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new rO(n,a||void 0),c="value"===t?new _O(s):new bO(t,s);return function(e,t,n){var r;r=".info"===UN(t._path)?PR(e.infoSyncTree_,t,n):PR(e.serverSyncTree_,t,n),xD(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return VD(e._repo,e,c)}}function IO(e,t,n,r){return xO(e,"value",t,n,r)}function TO(e,t,n,r){return xO(e,"child_added",t,n,r)}function EO(e,t,n,r){return xO(e,"child_changed",t,n,r)}function SO(e,t,n,r){return xO(e,"child_moved",t,n,r)}function CO(e,t,n,r){return xO(e,"child_removed",t,n,r)}function NO(e,t,n){var r=null,i=n?new rO(n):null;"value"===t?r=new _O(i):t&&(r=new bO(t,i)),VD(e._repo,e,r)}var AO=p((function e(){f(this,e)})),PO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return p(n,[{key:"_apply",value:function(e){dD("endAt",this._value,e._path,!0);var t=QA(e._queryParams,this._value,this._key);if(sO(t),uO(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new aO(e._repo,e._path,t,e._orderByCalled)}}]),n}(AO);function RO(e,t){return mD("endAt","key",t,!0),new PO(e,t)}var DO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return p(n,[{key:"_apply",value:function(e){dD("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===oA?("string"===typeof t&&(t=UA(t)),r=QA(e,t,n)):r=QA(e,t,null==n?$C:UA(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(sO(t),uO(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new aO(e._repo,e._path,t,e._orderByCalled)}}]),n}(AO);function OO(e,t){return mD("endBefore","key",t,!0),new DO(e,t)}var LO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return p(n,[{key:"_apply",value:function(e){dD("startAt",this._value,e._path,!0);var t=HA(e._queryParams,this._value,this._key);if(sO(t),uO(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new aO(e._repo,e._path,t,e._orderByCalled)}}]),n}(AO);function MO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return mD("startAt","key",t,!0),new LO(e,t)}var FO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return p(n,[{key:"_apply",value:function(e){dD("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===oA?("string"===typeof t&&(t=FA(t)),r=HA(e,t,n)):r=HA(e,t,null==n?JC:FA(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(sO(t),uO(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new aO(e._repo,e._path,t,e._orderByCalled)}}]),n}(AO);function UO(e,t){return mD("startAfter","key",t,!0),new FO(e,t)}var VO=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this))._limit=e,r}return p(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new aO(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(AO);function qO(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new VO(e)}var jO=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this))._limit=e,r}return p(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new aO(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(AO);function BO(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new jO(e)}var zO=function(e){g(n,e);var t=x(n);function n(e){var r;return f(this,n),(r=t.call(this))._path=e,r}return p(n,[{key:"_apply",value:function(e){oO(e,"orderByChild");var t=new MN(this._path);if(KN(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new RA(t),r=YA(e._queryParams,n);return uO(r),new aO(e._repo,e._path,r,!0)}}]),n}(AO);function WO(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gD("orderByChild","path",e,!1),new zO(e)}var KO=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"_apply",value:function(e){oO(e,"orderByKey");var t=YA(e._queryParams,oA);return uO(t),new aO(e._repo,e._path,t,!0)}}]),n}(AO);function GO(){return new KO}var HO=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"_apply",value:function(e){oO(e,"orderByPriority");var t=YA(e._queryParams,xA);return uO(t),new aO(e._repo,e._path,t,!0)}}]),n}(AO);function QO(){return new HO}var YO=function(e){g(n,e);var t=x(n);function n(){return f(this,n),t.apply(this,arguments)}return p(n,[{key:"_apply",value:function(e){oO(e,"orderByValue");var t=YA(e._queryParams,OA);return uO(t),new aO(e._repo,e._path,t,!0)}}]),n}(AO);function $O(){return new YO}var JO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._value=e,i._key=r,i}return p(n,[{key:"_apply",value:function(e){if(dD("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new PO(this._value,this._key)._apply(new LO(this._value,this._key)._apply(e))}}]),n}(AO);function XO(e,t){return mD("equalTo","key",t,!0),new JO(e,t)}function ZO(e){for(var t=be(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){N(!aR,"__referenceConstructor has already been defined"),aR=e}(cO),function(e){N(!fR,"__referenceConstructor has already been defined"),fR=e}(cO);var eL={},tL=!1;function nL(e,t,n,r){e.repoInfo_=new gN("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function rL(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||HC("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),WC("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=ZD(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/xoxo-game-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=ZD(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new dN(dN.OWNER):new fN(e.name,e.options,t);wD("Invalid Firebase Database URL",u),KN(u.path)||HC("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=eL[t.name];i||(i={},eL[t.name]=i);var a=i[e.toURLString()];a&&HC("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new CD(e,tL,n,r),i[e.toURLString()]=a,a}(s,e,l,new hN(e.name,n));return new iL(h,e)}var iL=function(){function e(t,n){f(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return p(e,[{key:"_repo",get:function(){return this._instanceStarted||(ND(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new cO(this._repo,FN())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=eL[t];n&&n[e.key]===e||HC("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),qD(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&HC("Cannot call "+e+" on a deleted database.")}}]),e}();function aL(){PN.IS_TRANSPORT_INITIALIZED&&QC("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function oL(){aL(),SN.forceDisallow()}function uL(){aL(),AN.forceDisallow(),SN.forceAllow()}function sL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=be(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&HC("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&HC('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new dN(dN.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:U(r.mockUserToken,e.app.options.projectId);a=new dN(o)}nL(i,t,n,a)}function cL(e){(e=be(e))._checkNotDeleted("goOffline"),qD(e._repo)}function lL(e){var t;(e=be(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(SD)}function hL(e,t){zC(e,t)}var fL={".sv":"timestamp"};var dL=function(){function e(t,n){f(this,e),this.committed=t,this.snapshot=n}return p(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function pL(e,t,n){var r;if(e=be(e),kD("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new F,o=IO(e,(function(){}));return function(e,t,n,r,i,a){jD(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:UC(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=zD(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{pD("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=ZR(e.transactionQueueTree_,t),h=eD(l)||[];h.push(o),tD(l,h),"object"===typeof s&&null!==s&&ne(s,".priority")?(c=re(s,".priority"),N(fD(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(RR(e.serverSyncTree_,t)||NA.EMPTY_NODE).getPriority().val();var f=PD(e),d=PA(s,c),p=$R(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=LD(e);var v=ER(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);ID(e.eventQueue_,t,v),WD(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new lO(r,new cO(e._repo,e._path),xA),a.resolve(new dL(n,i)))}),o,i),a.promise}tA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},tA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){PC(bt),vt(new Ne("database",(function(e,t){var n=t.instanceIdentifier;return rL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ct(CC,NC,e),Ct(CC,NC,"esm2017")}();var vL=new qe("@firebase/database-compat"),yL=function(e){var t="FIREBASE WARNING: "+e;vL.warn(t)},mL=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(ye(e,t)+"must be a boolean.")},gL=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ye(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},kL=function(){function e(t){f(this,e),this._delegate=t}return p(e,[{key:"cancel",value:function(e){ve("OnDisconnect.cancel",0,1,arguments.length),me("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){ve("OnDisconnect.remove",0,1,arguments.length),me("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){ve("OnDisconnect.set",1,2,arguments.length),me("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){ve("OnDisconnect.setWithPriority",2,3,arguments.length),me("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(ve("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,yL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}me("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),wL=function(){function e(t,n){f(this,e),this.committed=t,this.snapshot=n}return p(e,[{key:"toJSON",value:function(){return ve("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),_L=function(){function e(t,n){f(this,e),this._database=t,this._delegate=n}return p(e,[{key:"val",value:function(){return ve("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return ve("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return ve("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return ve("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return ve("DataSnapshot.child",0,1,arguments.length),t=String(t),gD("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return ve("DataSnapshot.hasChild",1,1,arguments.length),gD("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return ve("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return ve("DataSnapshot.forEach",1,1,arguments.length),me("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return ve("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return ve("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return ve("DataSnapshot.ref",0,0,arguments.length),new xL(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),bL=function(){function e(t,n){f(this,e),this.database=t,this._delegate=n}return p(e,[{key:"on",value:function(t,n,r,i){var a,o=this;ve("Query.on",2,4,arguments.length),me("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new _L(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return IO(this._delegate,s,c),n;case"child_added":return TO(this._delegate,s,c),n;case"child_removed":return CO(this._delegate,s,c),n;case"child_changed":return EO(this._delegate,s,c),n;case"child_moved":return SO(this._delegate,s,c),n;default:throw new Error(ye("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(ve("Query.off",0,3,arguments.length),gL("Query.off",e,!0),me("Query.off","callback",t,!0),ge("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,NO(this._delegate,e,r)}else NO(this._delegate,e)}},{key:"get",value:function(){var e=this;return wO(this._delegate).then((function(t){return new _L(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;ve("Query.once",1,4,arguments.length),me("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new F,s=function(e,t){var r=new _L(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":IO(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":TO(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":CO(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":EO(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":SO(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(ye("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return ve("Query.limitToFirst",1,1,arguments.length),new e(this.database,ZO(this._delegate,qO(t)))}},{key:"limitToLast",value:function(t){return ve("Query.limitToLast",1,1,arguments.length),new e(this.database,ZO(this._delegate,BO(t)))}},{key:"orderByChild",value:function(t){return ve("Query.orderByChild",1,1,arguments.length),new e(this.database,ZO(this._delegate,WO(t)))}},{key:"orderByKey",value:function(){return ve("Query.orderByKey",0,0,arguments.length),new e(this.database,ZO(this._delegate,GO()))}},{key:"orderByPriority",value:function(){return ve("Query.orderByPriority",0,0,arguments.length),new e(this.database,ZO(this._delegate,QO()))}},{key:"orderByValue",value:function(){return ve("Query.orderByValue",0,0,arguments.length),new e(this.database,ZO(this._delegate,$O()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ve("Query.startAt",0,2,arguments.length),new e(this.database,ZO(this._delegate,MO(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ve("Query.startAfter",0,2,arguments.length),new e(this.database,ZO(this._delegate,UO(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ve("Query.endAt",0,2,arguments.length),new e(this.database,ZO(this._delegate,RO(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ve("Query.endBefore",0,2,arguments.length),new e(this.database,ZO(this._delegate,OO(t,n)))}},{key:"equalTo",value:function(t,n){return ve("Query.equalTo",1,2,arguments.length),new e(this.database,ZO(this._delegate,XO(t,n)))}},{key:"toString",value:function(){return ve("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return ve("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(ve("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new xL(this.database,new cO(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,me(e,"cancel",r.cancel,!0),r.context=n,ge(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(ye(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),xL=function(e){g(n,e);var t=x(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,new aO(r._repo,r._path,new GA,!1))).database=e,i._delegate=r,i}return p(n,[{key:"getKey",value:function(){return ve("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return ve("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,dO(this._delegate,e))}},{key:"getParent",value:function(){ve("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return ve("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){ve("Reference.set",1,2,arguments.length),me("Reference.set","onComplete",t,!0);var n=yO(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(ve("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,yL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}kD("Reference.update",this._delegate._path),me("Reference.update","onComplete",t,!0);var i=kO(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){ve("Reference.setWithPriority",2,3,arguments.length),me("Reference.setWithPriority","onComplete",n,!0);var r=gO(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){ve("Reference.remove",0,1,arguments.length),me("Reference.remove","onComplete",e,!0);var t=vO(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;ve("Reference.transaction",1,3,arguments.length),me("Reference.transaction","transactionUpdate",e,!1),me("Reference.transaction","onComplete",t,!0),mL("Reference.transaction","applyLocally",n,!0);var i=pL(this._delegate,e,{applyLocally:n}).then((function(e){return new wL(e.committed,new _L(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){ve("Reference.setPriority",1,2,arguments.length),me("Reference.setPriority","onComplete",t,!0);var n=mO(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;ve("Reference.push",0,2,arguments.length),me("Reference.push","onComplete",t,!0);var i=pO(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return kD("Reference.onDisconnect",this._delegate._path),new kL(new iO(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(bL),IL=function(){function e(t,n){var r=this;f(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:oL,forceLongPolling:uL}}return p(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};sL(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(ve("database.ref",0,1,arguments.length),e instanceof xL){var t=fO(this._delegate,e.toString());return new xL(this,t)}var n=hO(this._delegate,e);return new xL(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";ve(t,1,1,arguments.length);var n=fO(this._delegate,e);return new xL(this,n)}},{key:"goOffline",value:function(){return ve("database.goOffline",0,0,arguments.length),cL(this._delegate)}},{key:"goOnline",value:function(){return ve("database.goOnline",0,0,arguments.length),lL(this._delegate)}}]),e}();IL.ServerValue={TIMESTAMP:fL,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var TL=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;PC(r);var s=new Pe("auth-internal",new Oe("database-standalone"));return s.setComponent(new Ne("auth-internal",(function(){return i}),"PRIVATE")),{instance:new IL(rL(t,s,void 0,n,u),t),namespace:a}}}),EL=IL.ServerValue;!function(e){e.INTERNAL.registerComponent(new Ne("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new IL(i,r)}),"PUBLIC").setServiceProps({Reference:xL,Query:bL,Database:IL,DataSnapshot:_L,enableLogging:hL,INTERNAL:TL,ServerValue:EL}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.0")}(Xt);var SL,CL=Xt.initializeApp({apiKey:"AIzaSyCyrbXREjqMqKcVRDHugxtbtgwSJ11VJn0",authDomain:"xoxo-game-22373.firebaseapp.com",projectId:"xoxo-game-22373",storageBucket:"xoxo-game-22373.appspot.com",messagingSenderId:"993958192351",appId:"1:993958192351:web:0651c1dbea5a0bff41756a",measurementId:"G-8SFYTZB36S"}),NL=(Xt.analytics(CL),Xt.database(CL)),AL=new Uint8Array(16);function PL(){if(!SL&&!(SL="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return SL(AL)}var RL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var DL=function(e){return"string"===typeof e&&RL.test(e)},OL=[],LL=0;LL<256;++LL)OL.push((LL+256).toString(16).substr(1));var ML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(OL[e[t+0]]+OL[e[t+1]]+OL[e[t+2]]+OL[e[t+3]]+"-"+OL[e[t+4]]+OL[e[t+5]]+"-"+OL[e[t+6]]+OL[e[t+7]]+"-"+OL[e[t+8]]+OL[e[t+9]]+"-"+OL[e[t+10]]+OL[e[t+11]]+OL[e[t+12]]+OL[e[t+13]]+OL[e[t+14]]+OL[e[t+15]]).toLowerCase();if(!DL(n))throw TypeError("Stringified UUID is invalid");return n};var FL,UL=function(e,t,n){var r=(e=e||{}).random||(e.rng||PL)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return ML(r)},VL=n(184),qL=(0,t.createContext)({}),jL=function(){return(0,t.useContext)(qL)},BL=function(e){var n=h((0,t.useState)(""),2),r=n[0],i=n[1],a=h((0,t.useState)("singlePlayer"),2),u=a[0],s=a[1],c=h((0,t.useState)(!1),2),l=c[0],f=c[1],d=h((0,t.useState)(null),2),p=d[0],v=d[1],y=h((0,t.useState)("X"),2),m=y[0],g=y[1],k=(0,t.useRef)(null),w=function(e){"multiPlayer"===u?k.current.update(e):v((function(t){return o(o({},t),e)}))};return console.log({playingAs:m,playerName:r,room:p}),(0,VL.jsx)(qL.Provider,{value:{room:p,playingAs:m,playerName:r,setPlayerName:i,roomLoading:l,setRoomLoading:f,onStart:function(e){return e.preventDefault(),"multiPlayer"===u?(console.log("onPlayerSubmit"),f(!0),NL.ref("/rooms").orderByChild("player2").equalTo("").limitToFirst(1).once("value",(function(e){var t=e.val();if(t){var n=Object.keys(t)[0];k.current=NL.ref("/rooms/".concat(n)),k.current.update({player2:r}).then((function(){k.current.on("value",(function(e){g("O"),v(e.val()),f(!1)}))}))}else{var i=UL();k.current=NL.ref("/rooms/".concat(i)),k.current.set({player1:r,player2:"",turn:"X",data:Array(9).fill(""),winner:""}).then((function(){k.current.on("value",(function(e){g("X"),v(e.val()),f(!1)}))}))}}))):v({player1:r,player2:"Computer",turn:"X",data:Array(9).fill(""),winner:""}),!1},setGameData:function(e){w({data:e})},setTurn:function(e){w({turn:e})},setWinner:function(e){w({winner:e})},playingMode:u,setPlayingMode:s},children:e.children})};function zL(){return zL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zL.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(FL||(FL={}));var WL=function(e){return e};var KL="beforeunload",GL="popstate";function HL(e){e.preventDefault(),e.returnValue=""}function QL(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function YL(){return Math.random().toString(36).substr(2,8)}function $L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function JL(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var XL=(0,t.createContext)(null);var ZL=(0,t.createContext)(null);var eM=(0,t.createContext)({outlet:null,matches:[]});function tM(e,t){if(!e)throw new Error(t)}function nM(e,t,n){void 0===n&&(n="/");var r=lM(("string"===typeof t?JL(t):t).pathname||"/",n);if(null==r)return null;var i=rM(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=uM(i[o],r);return a}function rM(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||tM(!1),a.relativePath=a.relativePath.slice(r.length));var o=hM([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&tM(!1),rM(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:oM(o,e.index),routesMeta:u})})),t}var iM=/^:\w+$/,aM=function(e){return"*"===e};function oM(e,t){var n=e.split("/"),r=n.length;return n.some(aM)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!aM(e)})).reduce((function(e,t){return e+(iM.test(t)?3:""===t?1:10)}),r)}function uM(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=sM({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var h=u.route;a.push({params:r,pathname:hM([i,l.pathname]),pathnameBase:fM(hM([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=hM([i,l.pathnameBase]))}return a}function sM(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=h(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(GC){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function cM(e,t,n){var r,i="string"===typeof e?JL(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?JL(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:dM(a),hash:pM(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function lM(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var hM=function(e){return e.join("/").replace(/\/\/+/g,"/")},fM=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},dM=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},pM=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function vM(){return null!=(0,t.useContext)(ZL)}function yM(){return vM()||tM(!1),(0,t.useContext)(ZL).location}function mM(){vM()||tM(!1);var e=(0,t.useContext)(XL),n=e.basename,r=e.navigator,i=(0,t.useContext)(eM).matches,a=yM().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=cM(e,JSON.parse(o),a);"/"!==n&&(i.pathname=hM([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function gM(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(eM.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function kM(e){tM(!1)}function wM(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?FL.Pop:u,c=e.navigator,l=e.static,h=void 0!==l&&l;vM()&&tM(!1);var f=fM(r),d=(0,t.useMemo)((function(){return{basename:f,navigator:c,static:h}}),[f,c,h]);"string"===typeof o&&(o=JL(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,w=void 0===k?"":k,_=p.state,b=void 0===_?null:_,x=p.key,I=void 0===x?"default":x,T=(0,t.useMemo)((function(){var e=lM(y,f);return null==e?null:{pathname:e,search:g,hash:w,state:b,key:I}}),[f,y,g,w,b,I]);return null==T?null:(0,t.createElement)(XL.Provider,{value:d},(0,t.createElement)(ZL.Provider,{children:a,value:{location:T,navigationType:s}}))}function _M(e){var n=e.children,r=e.location;return function(e,n){vM()||tM(!1);var r,i=(0,t.useContext)(eM).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,yM());if(n){var c,l="string"===typeof n?JL(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||tM(!1),r=l}else r=s;var h=r.pathname||"/",f=nM(e,{pathname:"/"===u?h:h.slice(u.length)||"/"});return gM(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:hM([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:hM([u,e.pathnameBase])})})),i)}(bM(n),r)}function bM(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==kM&&tM(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=bM(e.props.children)),n.push(r)}else n.push.apply(n,bM(e.props.children))})),n}function xM(){var e=jL().room,t=e.data,n=e.winner;return(0,VL.jsxs)("div",{className:"grid-winner",children:["Winner:",t[n[0]],(0,VL.jsx)(IM,{data:t,containerStyle:{width:200,height:200,backgroundColor:"rgb(255, 165, 0, 0 )",margin:"auto"},cellStyle:{background:"orange",fontSize:44,color:"#333",margin:"auto",width:55,height:55},winner:n})]})}function IM(e){var t=jL().room,n=t.player1,r=t.player2,i=t.turn;return console.log({turn:i}),(0,VL.jsxs)(VL.Fragment,{children:[!e.containerStyle&&(0,VL.jsxs)("div",{className:"top-bar",children:[(0,VL.jsx)("div",{className:"show-player-x ".concat("X"===i&&"active-player"),children:n}),(0,VL.jsx)("div",{className:"show-player-o ".concat("O"===i&&"active-player"),children:r})]}),""===e.winner||e.containerStyle?(0,VL.jsx)("div",{className:"grid-container",style:e.containerStyle,children:new Array(9).fill("").map((function(t,n){return(0,VL.jsx)("div",{className:"grid-cell",onClick:function(t){return e.handleOnClick(t,n)},style:e.cellStyle,children:(0,VL.jsx)("div",{id:n===e.winner[0]||n===e.winner[1]||n===e.winner[2]?"strike":null,children:e.data[n]})},"cell-".concat(n))}))}):(0,VL.jsx)(xM,{})]})}var TM=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];function EM(){var e=jL(),n=e.playingMode,r=e.playingAs,i=e.room,a=i.data,o=i.turn,u=i.winner,s=e.setGameData,c=e.setTurn,l=e.setWinner;function f(e){return d.apply(this,arguments)}function d(){return d=Ee(Ce().mark((function e(t){var r,i,u=arguments;return Ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"O",(i=Ie(a))[t]=r,e.next=5,setTimeout((function(){return s(i)}),"singlePlayer"===n&&"O"===o?400:0).then(c("X"===r?"O":"X"));case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}console.log({playingAs:r});return(0,t.useEffect)((function(){if("singlePlayer"===n)for(var e in TM)if(2===TM[e].filter((function(e){return"X"===a[e]})).length&&1===TM[e].filter((function(e){return""===a[e]})).length&&"O"===o||2===TM[e].filter((function(e){return"O"===a[e]})).length&&1===TM[e].filter((function(e){return""===a[e]})).length&&"O"===o){for(var t in TM[e])if(""===a[TM[e][t]])return void f(TM[e][t]);return}if(0===a.filter((function(e){return""===e})).length&&"O"===o)l("Game is TIE");else if("O"===o&&"singlePlayer"===n)if(""===a[4])f(4);else for(var r in a)if(""===a[r])return void f(r);for(var i=0;i<TM.length;i++){var u=h(TM[i],3),s=u[0],c=u[1],d=u[2];if(a[s]&&a[s]===a[c]&&a[s]===a[d])return console.log("WINNER:",a[s]),void l([s,c,d])}}),[a]),(0,VL.jsx)("div",{className:"top-level-container",children:(0,VL.jsx)(IM,{handleOnClick:function(e,t){""===a[t]&&o===r&&(console.log("turn:"+o),f(t,r))},data:a,winner:u})})}var SM=function(){var e=jL(),t=e.playerName,n=e.setPlayerName,r=e.onStart;return(0,VL.jsxs)("form",{className:"player-form",onSubmit:r,children:[(0,VL.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}}),(0,VL.jsx)("button",{className:"glow-on-hover type=",type:"submit",children:"Enter your Name"})]})};function CM(){var e=jL().room;return console.log({room:e}),e?(0,VL.jsx)(EM,{}):(0,VL.jsx)(SM,{})}var NM=function(){var e=jL().setPlayingMode,t=mM();return(0,VL.jsx)("div",{className:"menu-container",children:(0,VL.jsx)("ul",{className:"menu-list",children:[{name:"singlePlayer",label:"Single-Player"},{name:"duoPlayer",label:"Duo-Player"},{name:"multiPlayer",label:"Multi-Player"}].map((function(n,r){return(0,VL.jsx)("li",{className:"glow-on-hover",onClick:function(){return r=n.name,e(r),void t("/game");var r},children:n.label},r)}))})})},AM=function(){return(0,VL.jsxs)(_M,{children:[(0,VL.jsx)(kM,{exact:!0,path:"/xoxo-game-react",element:(0,VL.jsx)(NM,{})}),(0,VL.jsx)(kM,{exact:!0,path:"/game",element:(0,VL.jsx)(CM,{})}),(0,VL.jsx)(kM,{exact:!0,path:"/PlayerForm",element:(0,VL.jsx)(SM,{})}),(0,VL.jsx)(kM,{exact:!0,path:"/XOXO",element:(0,VL.jsx)(IM,{})}),(0,VL.jsx)(kM,{exact:!0,path:"/GameWinner",element:(0,VL.jsx)(xM,{})})]})};function PM(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,WL({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(GL,(function(){if(a)h.call(a),a=null;else{var e=FL.Pop,t=i(),n=t[0],r=t[1];if(h.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){m(-1*o)}},m(o))}}else y(e)}}));var o=FL.Pop,u=i(),s=u[0],c=u[1],l=QL(),h=QL();function f(e){return"string"===typeof e?e:$L(e)}function d(e,t){return void 0===t&&(t=null),WL(zL({pathname:c.pathname,hash:"",search:""},"string"===typeof e?JL(e):e,{state:t,key:YL()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},f(e)]}function v(e,t,n){return!h.length||(h.call({action:e,location:t,retry:n}),!1)}function y(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function m(e){r.go(e)}null==s&&(s=0,r.replaceState(zL({},r.state,{idx:s}),""));var g={get action(){return o},get location(){return c},createHref:f,push:function e(t,i){var a=FL.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var u=p(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(GC){n.location.assign(l)}y(a)}},replace:function e(t,n){var i=FL.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),y(i)}},go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(e){return l.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&n.addEventListener(KL,HL),function(){t(),h.length||n.removeEventListener(KL,HL)}}};return g}({window:i}));var o=a.current,u=h((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(wM,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}var RM=function(){return(0,VL.jsx)(BL,{children:(0,VL.jsx)(PM,{children:(0,VL.jsx)(AM,{})})})},DM=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,VL.jsx)(t.StrictMode,{children:(0,VL.jsx)(RM,{})})),DM()}()}();
//# sourceMappingURL=main.ac3bd138.js.map